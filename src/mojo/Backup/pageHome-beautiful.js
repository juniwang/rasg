(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.lang = {};
    w.Mojo.lang['ui'] = {
        'zh_tw': {
            'Agree': '同意',
            'Agreed': '',
            'Assist Lose': '救援失敗',
            'Assist Win': '救援成功',
            'Back': '返回',
            'Back to {{:scenario}}': '返回{{:scenario}}',
            'Base Informations': '基礎資料',
            'Close': '關閉',
            'Congratulations': '恭喜',
            'Congratulations! You got a card!': '恭喜你獲得了一張卡牌！',
            'Congratulations! You got rewards!': '恭喜你獲得獎勵！',
            'Denied': '',
            'Deny': '拒絕',
            'Do': '執行',
            'Duel': '切磋',
            'Fight Informations': '戰鬥資訊',
            'For Help': '求援',
            'For Help Again': '再次求援',
            'Force Invite': '勢力邀請',
            'Force War': '勢力戰',
            'Friend Assist Request': '好友求援',
            'Friend Confirmation': '好友確認',
            'Friend Delete': '割袍斷義',
            'Friend Message': '好友消息',
            'Friend PK Lose': '切磋戰敗',
            'Friend PK Win': '切磋勝利',
            'Friend Rejection': '好友拒絕',
            'Friend Request': '好友請求',
            'In War': '參戰',
            'In War2': '',
            'Introduction': '簡介',
            'Leave Message': '留言',
            'Level': '難度：',
            'More Messages': '更多消息',
            'Next': '後一頁',
            'PK Lose': '戰敗',
            'PK Win': '勝利',
            'Previous': '前一頁',
            'Progress': '完成度',
            'Ranking': '',
            'Refresh Succ': '刷新成功',
            'Reject': '拒絕',
            'Reply': '回覆',
            'Requirement': '任務需求',
            'Retaliate': '反擊',
            'Reward': '任務獎勵',
            'Select': '選',
            'Select a friend': '選擇好友',
            'Send': '發送',
            'Send Troops': '出兵',
            'System Message': '系統消息',
            'Thanko_kr': '致謝',
            'Thanks': '致谢',
            'Type message': '發送消息',
            'View Force': '查看勢力',
            'View More': '查看更多',
            'ago': '前',
            'day': '天',
            'days': '天',
            'hour': '小時',
            'hours': '小時',
            'lost_title': '',
            'minute': '分鐘',
            'minutes': '分鐘',
            'second': '秒',
            'seconds': '秒',
            'ui War': '勢力戰',
        },
        'zh_cn': {
            'Agree': '同意',
            'Agreed': '已同意',
            'Assist Lose': '救援失败',
            'Assist Win': '救援成功',
            'Back': '返回',
            'Back to {{:scenario}}': '返回{{:scenario}}',
            'Base Informations': '基础信息',
            'Close': '关闭',
            'Congratulations': '恭喜',
            'Congratulations! You got a card!': '恭喜你获得了一张卡牌！',
            'Congratulations! You got rewards!': '恭喜你获得奖励！',
            'Denied': '已拒绝',
            'Deny': '拒绝',
            'Do': '执行',
            'Duel': '切磋',
            'Fight Informations': '战斗信息',
            'For Help': '求援',
            'For Help Again': '再次求援',
            'Force Invite': '势力邀请',
            'Force War': '抢粮战',
            'Friend Assist Request': '好友求援',
            'Friend Confirmation': '好友确认',
            'Friend Delete': '割袍断义',
            'Friend Message': '好友消息',
            'Friend PK Lose': '切磋战败',
            'Friend PK Win': '切磋胜利',
            'Friend Rejection': '好友拒绝',
            'Friend Request': '好友请求',
            'In War': '参战',
            'In War2': '战斗',
            'Introduction': '简介',
            'Leave Message': '留言',
            'Level': '难度：',
            'More Messages': '更多消息',
            'Next': '后一页',
            'PK Lose': '战败',
            'PK Win': '胜利',
            'Previous': '前一页',
            'Progress': '完成度',
            'Ranking': '排行榜消息',
            'Refresh Succ': '刷新成功',
            'Reject': '拒绝',
            'Reply': '回复',
            'Requirement': '任务需求',
            'Retaliate': '反击',
            'Reward': '任务奖励',
            'Select': '选',
            'Select a friend': '选择好友',
            'Send': '发送',
            'Send Troops': '出兵',
            'System Message': '系统消息',
            'Thanko_kr': '致谢',
            'Thanks': '致谢',
            'Type message': '发送消息',
            'View Force': '查看势力',
            'View More': '查看更多',
            'ago': '前',
            'day': '天',
            'days': '天',
            'hour': '小时',
            'hours': '小时',
            'lost_title': '失去称号',
            'minute': '分钟',
            'minutes': '分钟',
            'second': '秒',
            'seconds': '秒',
            'ui War': '抢粮战',
        },
    };
    w.Mojo.lang['common'] = {
        'zh_tw': {
            'Go Statistics': '查看統計',
            'acceleration for restore ep': '&#149精力恢復速度增加：',
            'acceleration for restore sp': '&#149體力恢復速度增加：',
            'action_error': '',
            'add_cp': '你使用了{{:name}}, 獲得了{{:value}}个挑戰書',
            'add_ep': '{{:name}}使用成功',
            'add_friend': '加好友',
            'add_sp': '{{:name}}使用成功',
            'ago': '',
            'and': '',
            'assign_title': '',
            'attack': '進攻',
            'attack_again': '再次進攻',
            'avoid war time': '免戰時間：{{:avoid_war_time}}',
            'avoid_war_content': '主公，我軍還在免戰中，撤銷免戰牌方可出兵！但是我軍也將城門大開！<br><b>免戰時間：{{:avoid_war_time}}</b>',
            'avoid_war_title': '我軍免戰中',
            'back': '返回',
            'bad network': '主公～你的網路有點弱哦～',
            'barrack_active_dlg_content': '',
            'barrack_active_dlg_title': '',
            'base_attack': '基礎攻擊力：{{:old}} → <span>{{:new}}</span>',
            'base_defence': '基礎防禦力：{{:old}} → <span>{{:new}}</span>',
            'battle': '去征討',
            'battle_search': '輸入玩家暱稱搜索',
            'battleground_down_msg': '',
            'battleground_up_gold': '',
            'battleground_up_msg': '',
            'battleground_up_tip1': '',
            'before_login_data': '',
            'bind': '預設',
            'bind email': '',
            'bind_tip1': '主公，請預設您的email。Email將作為密碼找回的工具，且不可更改<div class="tip">所以請務必確認email正確有效哦~</div>',
            'bind_tip2': '預設email 7天後，即可通過email找回密碼哦~',
            'bind_tip3': '',
            'bind_title': '預設帳號資訊',
            'bind_weibo': '預設Facebook',
            'buy': '購買',
            'buy ep succ': '精力大還丹購買成功',
            'buy sp succ': '體力大還丹購買成功',
            'buy_fail_title': '購買失敗！',
            'buy_something_success': '{{:name}}購買成功',
            'buy_warning_content': '',
            'buy_warning_title': '',
            'cancel': '',
            'capacify_lack': '卡牌容量不足',
            'capacify_lack_tip': '主公~您的卡牌容量不足啦，去强化掉多余的卡牌或者去出售部分卡牌再来吧~',
            'choose_a_player_enter': '',
            'clear_avoid_war': '免戰時間已清空，機會和挑戰並存',
            'close': '關閉',
            'common': '勢力：',
            'confirm quit': '',
            'count': '數量：',
            'create_new_player': '',
            'create_player': '',
            'create_player_tips': '',
            'day': '天',
            'days': '天',
            'dday': '日',
            'default_text': '請輸入給他（她）的話',
            'diaochan_battle_guide': '',
            'diaochan_first_card': '',
            'diaochan_intity_first_card': '',
            'diaochan_new_player': '',
            'diaochan_rob_guide': '',
            'discount': '折',
            'do_task_update': '',
            'email': 'email',
            'email bind tips': '',
            'enter': '',
            'enter game': '',
            'ep': '精力值：',
            'expire': '維護',
            'explanation': '',
            'facebook': 'Facebook',
            'findpwd_email_address': 'email *',
            'findpwd_email_tip': '請輸入帳號和註冊的email：',
            'findpwd_method_tip': '請選擇密碼找回的方式！<br>&#149預設手機的用戶請選擇【簡訊找回】<br>&#149已註冊email的用戶請選擇【郵件找回】<br>&#149未預設手機和郵箱的用戶請聯繫客服<br>客服email：support@redatoms.com',
            'findpwd_mobile_tip': '請輸入帳號和註冊的手機號碼：',
            'findpwd_send_email': '發送郵件',
            'findpwd_server_tip': '您要找回密碼的伺服器：',
            'findpwd_with_email': '郵件找回',
            'findpwd_with_mobile': '簡訊找回',
            'force': '勢力：',
            'force-none': '',
            'force_message': '勢力消息',
            'force_war_tip2': '',
            'forcewar_lose_grain': '【{{:forcename}}】率眾偷襲我方勢力，奪走了{{:grain}}糧餉',
            'forcewar_notice_members1': '[<span>{{:title}}</span>]{{:ownername}}向【{{:forcename}}】發起挑戰，號召你加入戰鬥！',
            'forcewar_win_grain': '我方勢力輕鬆擊敗【{{:forcename}}】，奪得{{:grain}}糧餉',
            'forgetpwd': '忘記密碼',
            'friend_search': '',
            'friendly_tip': '',
            'full': '滿',
            'gain_levelup_award': '獲得升級獎勵：',
            'game account': '',
            'general_count': '上陣將領數：',
            'general_slot_unlock': '解鎖一個上陣將領卡槽!',
            'get_wuhu_tip': '',
            'go_accept': '查收',
            'go_bless': '',
            'go_download': '',
            'go_embed': '直接上陣',
            'go_fuben': '去闖關',
            'go_intensify': '去強化',
            'go_look': '',
            'go_neizheng': '',
            'go_open_level_awards': '',
            'go_package_card': '',
            'go_payment': '去加值',
            'go_rebirth': '去轉生',
            'go_sale': '去出售',
            'go_to_choose_group': '',
            'go_vm': '去換錢',
            'gold': '',
            'grain': '糧餉：',
            'has reached the maximum': '已達最大值',
            'hot': '熱',
            'hour': '小時',
            'hours': '小時',
            'id': '',
            'in_cd': '冷卻中：',
            'input_account_tip': '',
            'input_email': '请输入郵箱地址',
            'input_mobile': '請輸入手機號',
            'input_username': '請輸入帳號',
            'intensify': '強化',
            'invite_friend': '好友邀請',
            'level': '級別：',
            'level_up': '恭喜主公達到等級{{:level}}',
            'level_up_title': '恭喜升級',
            'login_forget_description': '若註冊時未填寫手機號碼或手機號碼有誤，請聯繫客服。',
            'login_forget_passwd': '密碼找回',
            'login_forget_phone': '手機號碼 *',
            'login_forget_sendsms': '發送簡訊',
            'login_forget_username': '帳號  *',
            'login_nickname_tip': '',
            'login_time': '',
            'lv': '級別',
            'main_j': '主將',
            'max_energy': '精力最大值：{{:old}} → <span>{{:new}}</span>',
            'max_entity': '卡牌容量上限：{{:old}} → <span>{{:new}}</span>',
            'max_friends_count': '最大好友數量：{{:old}} → <span>{{:new}}</span>',
            'max_stamina': '體力最大值：{{:old}} → <span>{{:new}}</span>',
            'minute': '分鐘',
            'minutes': '分鐘',
            'month': '月',
            'more': '更多',
            'name': '暱稱：',
            'need_logout': '',
            'need_logout_notice': '',
            'new': '新',
            'new_attack': '攻擊：',
            'new_defence': '防禦：',
            'new_player_gift_title': '',
            'new_player_role': '',
            'nickname_not_empty': '',
            'no content': '無字天書會看不懂哦！',
            'no enough energy': '精力值不足',
            'no enough stamina': '體力值不足',
            'no_weixin': '',
            'not enough ep': '提示: 主公如有體力,請前去征討',
            'not enough sp': '提示: 主公如有精力,請執行任務',
            'not_bind': '暫不預設',
            'ok': '確定',
            'owner': '',
            'player num max prompt': '',
            'playerId': '',
            'player_role': '',
            'pls_input_acc': '',
            'price': '花費：',
            'price in mall': '商城售價：',
            'price_title': '售價：',
            'priceless': '無價之寶，不可購買',
            'recharge': '加值',
            'recharge_fail_dlg_btn1': '',
            'recharge_fail_dlg_btn2': '',
            'recharge_fail_dlg_tip': '',
            'recharge_fail_dlg_title': '',
            'relation': '（連結{{:platform}}）',
            'relation_guest': '未預設email的用戶請聯繫客服<br>客服email：support@redatoms.com',
            'repeat_login': '',
            'reset_avoid_war': '使用成功，免戰時間重置為{{:avoid_war_time}}',
            'revocation_of_war_free': '撤銷免戰',
            'rm': '元寶：',
            'rob': '去奪寶',
            'sanguo_coming': '',
            'search': '搜',
            'search_force_hint': '',
            'second': '秒',
            'seconds': '秒',
            'select_all': '全選',
            'send success': '',
            'send_pwd_to_email': '',
            'send_pwd_to_mobile': '',
            'send_pwd_to_phone': '',
            'share': '',
            'simple': '',
            'simple_attack': '攻擊力：',
            'simple_defence': '防禦力：',
            'simplified': '簡體',
            'sp': '體力值：',
            'suggestion_default_text': '請輸入您的建議',
            'suggestion_has_send': '已飛鴿傳書！',
            'suggestion_title': '意見建議',
            'sure_buy': '',
            'task': '做任務',
            'team_attack': '軍團攻擊力：',
            'team_defence': '軍團防禦力：',
            'think_again': '再想想',
            'time for all ep': '&#149全部精力恢復：',
            'time for all sp': '&#149全部體力恢復：',
            'time for next ep': '&#149下一點精力恢復：',
            'time for next sp': '&#149下一點體力恢復：',
            'tips': '提示',
            'traditional': '繁體',
            'unknown': '',
            'unlock_fuben_name': '解鎖闖關：{{:name}}',
            'unlock_slot_count': '上陣將領卡槽：{{:old}} → <span>{{:new}}</span>',
            'use': '使用',
            'userbuff': '',
            'username_tip': '',
            'username_too_long': '',
            'view': '查看',
            'vm': '銀幣：',
            'wait_to_do': '主公～稍等一下再執行該任務吧～',
            'weibo': 'Facebook',
            'weixin': '',
            'weixinfriends': '',
            'when lose': '失敗時',
            'when win': '勝利時',
            'win_rate': '征討勝率：{{:percent}}%',
            'xp': '經驗值：',
            'year': '年',
        },
        'zh_cn': {
            'Go Statistics': '查看统计',
            'acceleration for restore ep': '&#149精力恢复速度增加：',
            'acceleration for restore sp': '&#149体力恢复速度增加：',
            'action_error': '主公~您的操作失败，请重试~',
            'add_cp': '你使用了{{:name}}, 获得了{{:value}}个军令',
            'add_ep': '{{:name}}使用成功',
            'add_friend': '加好友',
            'add_sp': '{{:name}}使用成功',
            'ago': '前',
            'and': '及',
            'assign_title': '分配称号',
            'attack': '进攻',
            'attack_again': '再次进攻',
            'avoid war time': '免战时间：{{:avoid_war_time}}',
            'avoid_war_content': '主公，我军还在免战中，撤销免战牌方可出兵！但是我军也将城门大开！<br><b>免战时间：{{:avoid_war_time}}</b>',
            'avoid_war_title': '我军免战中',
            'back': '返回',
            'bad network': '主公～你的网络不给力啊～',
            'barrack_active_dlg_content': '主公~恭喜您开启了压阵军营卡槽位，升级压阵军营可上阵更多的卡牌哦~',
            'barrack_active_dlg_title': '开启压阵军营',
            'base_attack': '基础攻击力：{{:old}} → <span>{{:new}}</span>',
            'base_defence': '基础防御力：{{:old}} → <span>{{:new}}</span>',
            'battle': '去征讨',
            'battle_search': '输入玩家昵称或ID搜索',
            'battleground_down_msg': '主公~十分不幸，由于你最近在战场上落败太多，爵位被降为【{{:rank}}】，主公不要灰心，胜败乃兵家常事~',
            'battleground_up_gold': '爵位每日俸禄：<div class="icon"></div> {{:gold}}',
            'battleground_up_msg': '金币可用来兑换各种道具，记得每天领取哦~',
            'battleground_up_tip1': '恭喜主公，你获得了爵位：',
            'before_login_data': '上次登录：',
            'bind': '绑定',
            'bind email': '绑定邮箱',
            'bind_tip1': '主公，请绑定您的电子邮箱。电子邮箱将作为密码找回的工具，且不可更改<div class="tip">所以请务必保证邮箱真实有效哦~</div>',
            'bind_tip2': '绑定邮箱7天后，即可通过邮箱找回密码哦~',
            'bind_tip3': '主公~为了您的账户安全,请去绑定邮箱,绑定后可用邮箱登录游戏，并且会获得额外奖励哦~',
            'bind_title': '账户信息绑定',
            'bind_weibo': '绑定微博',
            'buy': '购买',
            'buy ep succ': '精力大还丹购买成功',
            'buy sp succ': '体力大还丹购买成功',
            'buy_fail_title': '购买失败！',
            'buy_something_success': '{{:name}}购买成功',
            'buy_warning_content': '主公～我军要购入此东东吗？',
            'buy_warning_title': '购买确认',
            'cancel': '取消',
            'capacify_lack': '卡牌容量不足',
            'capacify_lack_tip': '主公~您的卡牌容量不足啦，去强化掉多余的卡牌或者去出售部分卡牌再来吧~',
            'choose_a_player_enter': '选择一个角色进入游戏',
            'clear_avoid_war': '免战时间已清空，机会和挑战并存',
            'close': '关闭',
            'common': '势力：',
            'confirm quit': '确认退出',
            'count': '数量：',
            'create_new_player': '创建新角色',
            'create_player': '创建角色',
            'create_player_tips': '创建角色数：{{:players}}/{{:maxPlayers}}',
            'day': '天',
            'days': '天',
            'dday': '日',
            'default_text': '请输入给Ta的话',
            'diaochan_battle_guide': '主公~您的精力不足啦~<br>你还可通过<span class="special-text">【征讨】</span>提升实力哦~<div class="goBtn">点击继续</div>',
            'diaochan_first_card': '啊~被打败了~<br/>星级越高的将领越厉害哦~<br/>点击<span class="special-text">【首页】</span>中的将领头像，更换成刚获得的三星将领吧~<div class="goBtn">点击继续</div>',
            'diaochan_intity_first_card': '低等级的卡牌不够给力啊~<br/>点击<span class="special-text">【首页】</span>中的将领头像，可以强化将领，提高战斗力哦~<div class="goBtn">点击继续</div>',
            'diaochan_new_player': 'Hi~主公~<br/>我是貂蝉~<br/>我将陪伴您通过<span class="special-text">【任务】</span>体验三国穿越之旅哦~<div class="goBtn">点击继续</div>',
            'diaochan_rob_guide': '主公~您的精力不足啦~<br>你还可通过<span class="special-text">【夺宝】</span>提升实力哦~<div class="goBtn">点击继续</div>',
            'discount': '折',
            'do_task_update': '做【任务】升到{{:level}}级就能解锁哦~',
            'email': '电子邮箱',
            'email bind tips': '微博已被绑定',
            'enter': '进入',
            'enter game': '进入游戏',
            'ep': '精力值：',
            'expire': '维护',
            'explanation': '说明',
            'facebook': 'facebook',
            'findpwd_email_address': '邮箱地址 *',
            'findpwd_email_tip': '请输入账户和绑定的邮箱地址：',
            'findpwd_method_tip': '<b>请选择密码找回的方式！</b><br>&#149绑定手机的用户请选择【短信找回】<br>&#149绑定邮箱的用户请选择【邮件找回】<br>&#149手机和邮箱都未绑定的用户请联系客服<br>客服邮箱：support@redatoms.com',
            'findpwd_mobile_tip': '请输入账户和绑定的手机号码：',
            'findpwd_send_email': '发送邮件',
            'findpwd_server_tip': '您要找回密码的服务器：',
            'findpwd_with_email': '邮件找回',
            'findpwd_with_mobile': '短信找回',
            'force': '势力：',
            'force-none': '未加入势力',
            'force_message': '势力消息',
            'force_war_tip2': '贡献值{{:contribute}}及以上的势力成员可以参战哦~',
            'forcewar_lose_grain': '【{{:forcename}}】率众偷袭我方势力，夺走了{{:grain}}粮饷',
            'forcewar_notice_members1': '{{:ownername}}向【{{:forcename}}】发起挑战，号召你加入战斗！',
            'forcewar_win_grain': '我方势力轻松击败【{{:forcename}}】，夺得{{:grain}}粮饷',
            'forgetpwd': '忘记密码',
            'friend_search': '输入好友昵称搜索',
            'friendly_tip': '友情提示',
            'full': '满',
            'gain_levelup_award': '获得升级奖励：',
            'game account': '游戏账户：',
            'general_count': '上阵将领数：',
            'general_slot_unlock': '解锁一个上阵将领卡槽!',
            'get_wuhu_tip': '恭喜主公~成功招募了五虎上将【{{:wuhu}}】~',
            'go_accept': '查收',
            'go_bless': '去祝福',
            'go_download': '去下载',
            'go_embed': '直接上阵',
            'go_fuben': '去闯关',
            'go_intensify': '去强化',
            'go_look': '去看看',
            'go_neizheng': '做内政',
            'go_open_level_awards': '开礼包',
            'go_package_card': '去上阵',
            'go_payment': '去充值',
            'go_rebirth': '去转生',
            'go_sale': '去出售',
            'go_to_choose_group': '去选择',
            'go_vm': '去换钱',
            'gold': '金币：',
            'grain': '粮饷：',
            'has reached the maximum': '已达最大值',
            'hot': '热',
            'hour': '小时',
            'hours': '小时',
            'id': 'ID：',
            'in_cd': '冷却中：',
            'input_account_tip': '请输入您要找回密码的游戏账户',
            'input_email': '游戏账户不能为空',
            'input_mobile': '请输入手机号',
            'input_username': '请输入账户名',
            'intensify': '强化',
            'invite_friend': '好友邀请',
            'level': '级别：',
            'level_up': '恭喜主公达到等级{{:level}}',
            'level_up_title': '恭喜升级',
            'login_forget_description': '若注册时未填写手机号码或手机号码输入有误，请联系客服。',
            'login_forget_passwd': '密码找回',
            'login_forget_phone': '手机号 *',
            'login_forget_sendsms': '发送短信',
            'login_forget_username': '账户名 *',
            'login_nickname_tip': '昵称设定',
            'login_time': '登录：',
            'lv': '级别',
            'main_j': '主将',
            'max_energy': '精力最大值：{{:old}} → <span>{{:new}}</span>',
            'max_entity': '卡牌容量上限：{{:old}} → <span>{{:new}}</span>',
            'max_friends_count': '最大好友数量：{{:old}} → <span>{{:new}}</span>',
            'max_stamina': '体力最大值：{{:old}} → <span>{{:new}}</span>',
            'minute': '分钟',
            'minutes': '分钟',
            'month': '月',
            'more': '更多',
            'name': '昵称：',
            'need_logout': '重新登录',
            'need_logout_notice': '主公~您的账户在其它设备上登录了，本机登录的账户自动下线，请重新登录~',
            'new': '新',
            'new_attack': '攻击：',
            'new_defence': '防御：',
            'new_player_gift_title': '强者奖励',
            'new_player_role': '请输入您的新游戏昵称：',
            'nickname_not_empty': '昵称不可为空',
            'no content': '无字天书别人是看不懂的！',
            'no enough energy': '精力值不足',
            'no enough stamina': '体力值不足',
            'no_weixin': '主公~您还没安装微信客户端呢~',
            'not enough ep': '提示: 主公如有体力,请前去征讨',
            'not enough sp': '提示: 主公如有精力,请前去任务',
            'not_bind': '暂不绑定',
            'ok': '确定',
            'owner': '势力主：',
            'player num max prompt': '主公~最多只能创建{{:maxplayer}}个角色哦~',
            'playerId': '玩家ID：',
            'player_role': '游戏昵称是您在游戏中的名字：',
            'pls_input_acc': '请输入您的游戏账户',
            'price': '花费：',
            'price in mall': '商城售价：',
            'price_title': '售价：',
            'priceless': '无价之宝，不可购得。',
            'recharge': '充值',
            'recharge_fail_dlg_btn1': '充值帮助',
            'recharge_fail_dlg_btn2': '联系客服',
            'recharge_fail_dlg_tip': '主公~如果您为游戏充值无法完成，可以参考\"充值帮助\"或联系我们，我们会尽全力帮您解决问题。',
            'recharge_fail_dlg_title': '温馨提示',
            'relation': '（关联{{:platform}}）',
            'relation_guest': '邮箱未绑定的用户请联系客服<br>客服邮箱：support@redatoms.com',
            'repeat_login': '重复登录',
            'reset_avoid_war': '使用成功，免战时间重置为{{:avoid_war_time}}',
            'revocation_of_war_free': '撤销免战',
            'rm': '元宝：',
            'rob': '去夺宝',
            'sanguo_coming': '三国来了',
            'search': '搜',
            'search_force_hint': '输入势力名称或ID搜索',
            'second': '秒',
            'seconds': '秒',
            'select_all': '全选',
            'send success': '发送成功',
            'send_pwd_to_email': '已向<span style="color:#A80E0E">{{:email}}</span>的绑定邮箱发送密码',
            'send_pwd_to_mobile': '已向<span style="color:#A80E0E">{{:mobile}}</span>发送密码',
            'send_pwd_to_phone': '请输入您的手机号',
            'share': '分享',
            'simple': '',
            'simple_attack': '攻击力：',
            'simple_defence': '防御力：',
            'simplified': '简体',
            'sp': '体力值：',
            'suggestion_default_text': '请输入您的建议',
            'suggestion_has_send': '已飞鸽传书！',
            'suggestion_title': '意见建议',
            'sure_buy': '确定购买',
            'task': '做任务',
            'team_attack': '军团攻击力：',
            'team_defence': '军团防御力：',
            'think_again': '再想想',
            'time for all ep': '&#149全部精力恢复：',
            'time for all sp': '&#149全部体力恢复：',
            'time for next ep': '&#149下一点精力恢复：',
            'time for next sp': '&#149下一点体力恢复：',
            'tips': '提示',
            'traditional': '繁体',
            'unknown': '未知',
            'unlock_fuben_name': '解锁闯关：{{:name}}',
            'unlock_slot_count': '上阵将领卡槽：{{:old}} → <span>{{:new}}</span>',
            'use': '使用',
            'userbuff': '个人称号：',
            'username_tip': '最多六个汉字',
            'username_too_long': '角色名太长',
            'view': '查看',
            'vm': '银币：',
            'wait_to_do': '主公～等会儿再执行该任务吧～',
            'weibo': '分享到微博',
            'weixin': '微信好友',
            'weixinfriends': '微信朋友圈',
            'when lose': '失败时',
            'when win': '胜利时',
            'win_rate': '征讨胜率：{{:percent}}%',
            'xp': '经验值：',
            'year': '年',
        },
    };
    w.Mojo.lang['weibo'] = {
        'zh_tw': {
            'A new general socket will unlock after binding weibo account.': '綁定帳號後增加一個上陣將領卡槽。',
            'Bind Success Tip': '',
            'Bind sina weibo account': '預設微博',
            'Bind succeed and why not to follow us': '',
            'Bind weibo': '預設微博',
            'Binding sina weibo account, please wait...': '正在預設您的新浪微博帳號，請稍候...',
            'Change account': '變更預設',
            'Fail to bind your weibo account!': '預設新浪微博帳號失敗！',
            'Fail to fetch your weibo account infomation!': '獲取新浪微博帳號資訊失敗！',
            'Fail to logout current account!': '新浪微博帳號重設失敗，請重試！',
            'Fetching your nickname of sina weibo, please wait...': '正在獲取新浪微博帳戶昵稱，請稍候...',
            'Has bind to sina weibo account': '已預設新浪微博',
            'Has bind to sina weibo account:{{:account}}': '已預設新浪微博<br>{{:account}}',
            'Have not bind any weibo account!': '未預設新浪微博',
            'I am watting for you in #SanGuo lai le#!': '我在#三國來了#等著你呢！',
            'Login': '請重新登入',
            'Merge Succeed': '',
            'Please input weibo content': '請輸入信息內容',
            'Receive 50 coins for every weibo message(The daily limit is 500 coins).': '每分享一次喜悅獲得100銀幣（每日上限500銀幣）。',
            'Send Success': '發送消息成功！',
            'Send message': '發送消息',
            'Send weibo': '發送消息',
            'Share achievements with your friends and fans.': '和好友、粉絲們分享成就。',
            'Weibo Bind Success Tip': '',
            'Weibo has a lot of benefits': '分享喜悅好處多多',
            'Your weibo account "{{:account}}" has expired, please login again!': '新浪微博已過期<br>{{:account}}',
            'Your weibo account has been binded, do you want to use it binding current': '',
            'Your weibo account has expired!': '新浪微博已過期',
            'bind exist': '',
            'bind message': '主公～你還沒預設微博，現在就去預設吧～<br>也可以在【首頁-設置】中自行預設～<br>PS:分享喜悅將獲得銀幣獎勵哦～',
            'bind succeed': '',
            'bind succeed 7 day ago has card': '',
            'bind succeed 7 day ago no card': '',
            'bind title': '預設新浪微博',
            'bind_notice': '',
            'change weibo success tips': '',
            'change weibo success tips0': '',
            'email_merge_prompt_content': '',
            'enter_game': '進入遊戲',
            'expire message': '主公～你的微博已過期，需要重新登錄～<br>也可以在【首頁-設置】中自行登錄～<br>PS:分享喜悅將獲得銀幣獎勵哦～',
            'follow': '關注',
            'follow message': '是否關注官方微博，獲取更多遊戲資訊，並結交更多喜歡《三國來了》的戰友？<br>關注獎勵：1000銀幣',
            'follow official': '關注官方微博',
            'go bind': '去預設',
            'go login': '去登入',
            'merge_faild_content': '',
            'merge_faild_tips': '',
            'merge_prompt_content': '',
            'merge_prompt_tips': '',
            'no_bind_notice': '',
            'rebind weibo faild': '',
            'rebind weibo faild content': '',
            'relation_official_weibo': '關注《三國來了》官方微博<br><span>（第一次關注獎勵1000銀幣哦~）</span>',
            'relation_weibo': '連結新浪微博帳號',
            'relation_weibo_tip': '嗨，連結新浪微博隨時可以與身邊的朋友分享遊戲中的喜悅哦~',
            'weibo bind succeed 7 day ago has card': '',
            'weibo bind succeed 7 day ago no card': '',
            'weibo binding content': '',
            'weibo binding tips': '',
            'weibo bonus': '每分享一次喜悅可獲得100銀幣～',
            'weibo_bind_success_7_tips': '',
            'weibo_bind_success_7_tips2': '',
        },
        'zh_cn': {
            'A new general socket will unlock after binding weibo account.': '绑定账户后增加一个上阵将领卡槽。',
            'Bind Success Tip': '恭喜主公~绑定微博成功！关注《三国来了》官方微博，可获得1000银币奖励哦~是否关注？',
            'Bind sina weibo account': '绑定新浪微博',
            'Bind succeed and why not to follow us': '恭喜主公~绑定微博成功！您开启了一个新的武将卡槽，并额外获得转生丹×10的奖励哦~<br/>关注《三国来了》官方微博会有1000银币的额外奖励哦，是否关注？',
            'Bind weibo': '绑定微博',
            'Binding sina weibo account, please wait...': '正在绑定新浪微博账户，请稍候...',
            'Change account': '变更绑定',
            'Fail to bind your weibo account!': '绑定新浪微博账户失败！',
            'Fail to fetch your weibo account infomation!': '获取新浪微博账户信息失败！',
            'Fail to logout current account!': '新浪微博账户注销失败，请重试！',
            'Fetching your nickname of sina weibo, please wait...': '正在获取新浪微博账户昵称，请稍候...',
            'Has bind to sina weibo account': '已绑定新浪微博',
            'Has bind to sina weibo account:{{:account}}': '已绑定新浪微博<br>{{:account}}',
            'Have not bind any weibo account!': '未绑定新浪微博',
            'I am watting for you in #SanGuo lai le#!': '我在#三国来了#等着你呢！',
            'Login': '重新登录',
            'Merge Succeed': '合并成功',
            'Please input weibo content': '请输入微博内容',
            'Receive 50 coins for every weibo message(The daily limit is 500 coins).': '每发一条微博获得100银币（每日上限500银币）。',
            'Send Success': '发送微博成功！',
            'Send message': '发送消息',
            'Send weibo': '发送微博',
            'Share achievements with your friends and fans.': '和好友、粉丝们分享成就。',
            'Weibo Bind Success Tip': '恭喜主公~绑定微博成功！',
            'Weibo has a lot of benefits': '微博好处多多',
            'Your weibo account "{{:account}}" has expired, please login again!': '新浪微博已过期<br>{{:account}}',
            'Your weibo account has been binded, do you want to use it binding current': '主公~您的微博已绑定过游戏，是否将角色：<span style="color:#A80E0E">{{:nickname}}</span>合并到此微博下，<span style="color:#A80E0E">合并后将只能用此微博({{:weibo}})登录该角色</span>，确定合并该角色吗？',
            'Your weibo account has expired!': '新浪微博已过期',
            'bind exist': '主公~该微博已经被绑定在其他游戏账户上，无法再次绑定，请更换微博重试。',
            'bind message': '主公～你还没有绑定微博，现在就去绑定吧～<br>也可以在【首页-设置】中自行绑定～<br>PS:发送微博将获得银币奖励哦～',
            'bind succeed': '绑定成功',
            'bind succeed 7 day ago has card': '恭喜主公~微博将在7天后绑定成功!绑定成功后只能使用微博(<span style="color:#A80E0E">{{:weibo}}</span>)登录游戏。绑定成功后您可开启1个卡槽位,并额外获得转生丹×10的奖励哦~',
            'bind succeed 7 day ago no card': '恭喜主公~微博将在7天后绑定成功!绑定成功后只能使用微博(<span style="color:#A80E0E">{{:weibo}}</span>)登录游戏。绑定成功后可额外获得转生丹×10的奖励哦~',
            'bind title': '绑定新浪微博',
            'bind_notice': '绑定的微博不用于游戏登录',
            'change weibo success tips': '恭喜主公~绑定微博成功！关注《三国来了》官方微博精彩不断，是否关注？',
            'change weibo success tips0': '恭喜主公~成功绑定微博!您开启了一个新的武将卡槽，并额外获得转生丹×10的奖励哦~<br/>关注《三国来了》官方微博精彩不断,是否关注?',
            'email_merge_prompt_content': '主公~您的账户将合并到邮箱(<span style="color:#A80E0E">{{:email}}</span>)中,合并后将不能使用原账户登录游戏,只能用邮箱(<span style="color:#A80E0E">{{:email}}</span>)登录游戏,请点击确定完成合并。',
            'enter_game': '进入游戏',
            'expire message': '主公～你的微博已过期，需要重新登录～<br>也可以在【首页-设置-账户】中自行登录～<br>PS:发送微博将获得银币奖励哦～',
            'follow': '关注',
            'follow message': '是否关注官方微博，获取更多游戏信息，并结交更多喜欢《三国来了》的战友？<br>关注奖励：1000银币',
            'follow official': '关注官方微博',
            'go bind': '去绑定',
            'go login': '去登录',
            'merge_faild_content': '主公~您要绑定的账户和当前账户的角色总数超过限制,不能进行合并。',
            'merge_faild_tips': '合并失败',
            'merge_prompt_content': '主公~您的账户将合并到微博(<span style="color:#A80E0E">{{:weibo}}</span>)中,合并后将不能使用原账户将登录游戏,只能用微博(<span style="color:#A80E0E">{{:weibo}}</span>)登录游戏,请点击确定完成合并。',
            'merge_prompt_tips': '合并确认',
            'no_bind_notice': '绑定后，每天在游戏时发微博可获得银币奖励',
            'rebind weibo faild': '登录微博错误',
            'rebind weibo faild content': '主公~激活失败，需要登录你绑定的微博才可以成功激活哦~',
            'relation_official_weibo': '关注《三国来了》官方微博<br><span>（第一次关注奖励1000银币哦~）</span>',
            'relation_weibo': '关联新浪微博账户',
            'relation_weibo_tip': '亲，关联新浪微博随时可以与身边的朋友分享游戏中的喜悦哦~',
            'weibo bind succeed 7 day ago has card': '恭喜主公~成功绑定微博(<span style="color:#A80E0E">{{:weibo}}</span>)!以后只能用该微博登录游戏,您开启了一个新的武将卡槽。为了您的账户安全,请使用微博(<span style="color:#A80E0E">{{:weibo}}</span>)重新登录游戏。',
            'weibo bind succeed 7 day ago no card': '恭喜主公~成功绑定微博(<span style="color:#A80E0E">{{:weibo}}</span>)!以后只能用该微博登录游戏。为了您的账户安全,请使用微博(<span style="color:#A80E0E">{{:weibo}}</span>)重新登录游戏。',
            'weibo binding content': '主公~该微博正在绑定中，暂时不能绑定其他游戏账户。',
            'weibo binding tips': '微博绑定中',
            'weibo bonus': '<span style="color:#A80E0E">每日前3次</span>分享可获2000银币～',
            'weibo_bind_success_7_tips': '恭喜主公~微博将在7天后绑定成功！绑定成功后您可开启1个卡槽位，并额外获得转生丹×10的奖励哦~',
            'weibo_bind_success_7_tips2': '恭喜主公~微博将在7天后绑定成功！绑定成功后可额外获得转生丹×10的奖励哦~',
        },
    };
    w.Mojo.lang['facebook'] = {
        'zh_tw': {
            'A new general socket will unlock after binding weibo account.': '預設帳號後增加一個上陣將領卡槽。',
            'Bind sina weibo account': '預設facebook',
            'Bind weibo': '預設facebook',
            'Binding sina weibo account, please wait...': '正在預設facebook帳號，請稍候...',
            'Change account': '變更預設',
            'Fail to bind your weibo account!': '預設facebook帳號失敗！',
            'Fail to fetch your weibo account infomation!': '獲取facebook帳號資訊失敗！',
            'Fail to logout current account!': 'facebook帳號登出失敗，請重試！',
            'Fetching your nickname of sina weibo, please wait...': '正在獲取facebook帳戶昵稱，請稍候...',
            'Has bind to sina weibo account': '已預設facebook',
            'Has bind to sina weibo account:{{:account}}': '已預設facebook<br>{{:account}}',
            'Have not bind any weibo account!': '未預設facebook',
            'I am watting for you in #SanGuo lai le#!': '我在#三國來了#等著你呢！',
            'Login': '重新登入',
            'Please input weibo content': '請輸入分享內容',
            'Receive 50 coins for every weibo message(The daily limit is 500 coins).': '每po一條分享獲得100銀幣（每日上限500銀幣）。',
            'Send Success': '發送分享成功！',
            'Send message': '發送消息',
            'Send weibo': '分享',
            'Share achievements with your friends and fans.': '和好友、粉絲們分享成就。',
            'Weibo has a lot of benefits': '預設facebook帳號好處多多',
            'Your weibo account "{{:account}}" has expired, please login again!': 'facebook已過期<br>{{:account}}',
            'Your weibo account has expired!': 'facebook已過期',
            'bind message': '主公～你還沒有預設facebook帳號，現在就去預設吧～<br>也可以在【首頁-設置】中自行預設～<br>PS:發送分享將獲得銀幣獎勵哦～',
            'bind title': '預設facebook',
            'enter_game': '進入遊戲',
            'expire message': '主公～你的facebook已過期，需要重新登入～<br>也可以在【首頁-設置】中自行登入～<br>PS:發送分享將獲得銀幣獎勵哦～',
            'follow': '關注',
            'follow message': '是否關注官方facebook，獲取更多遊戲資訊，並結交更多喜歡《三國來了》的戰友？<br>關注獎勵：1000銀幣',
            'follow official': '關注官方facebook',
            'go bind': '去預設',
            'go login': '去登入',
            'relation_official_weibo': '關注《三國來了》官方Facebook<br><span>（第一次關注獎勵1000銀幣哦~）</span>',
            'relation_weibo': '連結facebook帳號',
            'relation_weibo_tip': '嗨，連結facebook隨時與身邊的朋友分享遊戲中的歡樂哦~',
            'weibo bonus': '每po一條分享可獲得100銀幣～',
        },
        'zh_cn': {
            'A new general socket will unlock after binding weibo account.': '绑定账户后增加一个上阵将领卡槽。',
            'Bind sina weibo account': '绑定facebook',
            'Bind weibo': '绑定facebook',
            'Binding sina weibo account, please wait...': '正在绑定facebook账户，请稍候...',
            'Change account': '变更绑定',
            'Fail to bind your weibo account!': '绑定facebook账户失败！',
            'Fail to fetch your weibo account infomation!': '获取facebook账户信息失败！',
            'Fail to logout current account!': 'facebook账户注销失败，请重试！',
            'Fetching your nickname of sina weibo, please wait...': '正在获取facebook账户昵称，请稍候...',
            'Has bind to sina weibo account': '已绑定facebook',
            'Has bind to sina weibo account:{{:account}}': '已绑定facebook<br>{{:account}}',
            'Have not bind any weibo account!': '未绑定facebook',
            'I am watting for you in #SanGuo lai le#!': '我在#三国来了#等着你呢！',
            'Login': '重新登录',
            'Please input weibo content': '请输入分享内容',
            'Receive 50 coins for every weibo message(The daily limit is 500 coins).': '每发一条分享获得100银币（每日上限500银币）。',
            'Send Success': '发送分享成功！',
            'Send message': '发送消息',
            'Send weibo': '分享',
            'Share achievements with your friends and fans.': '和好友、粉丝们分享成就。',
            'Weibo has a lot of benefits': '绑定facebook好处多多',
            'Your weibo account "{{:account}}" has expired, please login again!': 'facebook已过期<br>{{:account}}',
            'Your weibo account has expired!': 'facebook已过期',
            'bind message': '主公～你还没有绑定facebook，现在就去绑定吧～<br>也可以在【首页-设置】中自行绑定～<br>PS:发送分享将获得银币奖励哦～',
            'bind title': '绑定facebook',
            'enter_game': '进入游戏',
            'expire message': '主公～你的facebook已过期，需要重新登录～<br>也可以在【首页-设置】中自行登录～<br>PS:发送分享将获得银币奖励哦～',
            'follow': '关注',
            'follow message': '是否关注官方facebook，获取更多游戏信息，并结交更多喜欢《三国来了》的战友？<br>关注奖励：1000银币',
            'follow official': '关注官方facebook',
            'go bind': '去绑定',
            'go login': '去登录',
            'relation_official_weibo': '关注《三国来了》官方微博<br><span>（第一次关注奖励1000银币哦~）</span>',
            'relation_weibo': '关联facebook账户',
            'relation_weibo_tip': '亲，关联facebook随时可以与身边的朋友分享游戏中的喜悦哦~',
            'weibo bonus': '每发一条分享可获得100银币～',
        },
    };
    w.Mojo.lang['largeentity'] = {
        'zh_tw': {
            'attack': '增加攻擊力 + ',
            'defence': '增加防禦力 + ',
            'effect_ep': '精力恢復速度 + ',
            'effect_max_attack': '武將最大攻擊 + ',
            'effect_max_attack_pro': '攻擊時，打出最大攻擊的機率 + ',
            'effect_max_defence': '武將最大防禦 + ',
            'effect_max_defence_pro': '防守時，打出最大防禦的機率 + ',
            'effect_min_attack': '武將最小攻擊 + ',
            'effect_min_defence': '武將最小防禦 + ',
            'effect_rm': '額外獲得元寶 + ',
            'effect_sp': '體力恢復速度 + ',
            'effect_vm': '額外獲得銀幣 + ',
            'effect_xp': '額外獲得經驗 + ',
        },
        'zh_cn': {
            'attack': '增加攻击力 + ',
            'defence': '增加防御力 + ',
            'effect_ep': '精力恢复速度 + ',
            'effect_max_attack': '武将最大攻击 + ',
            'effect_max_attack_pro': '攻击时，打出最大攻击的概率 + ',
            'effect_max_defence': '武将最大防御 + ',
            'effect_max_defence_pro': '防守时，打出最大防御的概率 + ',
            'effect_min_attack': '武将最小攻击 + ',
            'effect_min_defence': '武将最小防御 + ',
            'effect_rm': '额外获得元宝 + ',
            'effect_sp': '体力恢复速度 + ',
            'effect_vm': '额外获得银币 + ',
            'effect_xp': '额外获得经验 + ',
        },
    };
    w.Mojo.lang['tutorial'] = {
        'zh_tw': {
            'tutorial_battle_start': '請主公點擊【出征】圖示～然後默默祈禱，如果獲勝就有可能【奪取武器、防具或坐騎】，裝備於將領身上，將領就會更加強力哦～',
            'tutorial_goto_choose': '',
            'tutorial_hecheng_do': '請主公點擊【合成】鍵，即可合成【寶物】。寶物需要裝備到上陣將領上才能發揮作用。寶物是很強大的存在哦~那麼，請主公盡情暢遊三國世界吧~',
            'tutorial_hecheng_start': '主公~有沒有想小嬋啊？孟德新書殘卷都備齊了，現在可以去合成了！請主公點擊【奪寶】按鈕~',
            'tutorial_intensify_choose': '主公～請選擇這張卡牌作為祭祀卡～',
            'tutorial_intensify_confirm': '主公~请點擊【確定】以確認本次强化所選擇的卡牌清單~',
            'tutorial_intensify_finish': '主公～小嬋已經把【任務】-獲得將領、【陣容】-上陣將領、【強化】-增強將領，介紹完了。下面主公可以去繼續【做任務】，也可以去試試【征討】或【奪寶】！',
            'tutorial_intensify_go': '主公～請點擊【強化】～強化後，祭祀卡會消失，但是原底卡升級後就會更強大哦～這就是【強化卡牌】的方法～',
            'tutorial_intensify_ok': '主公～請點擊【確定】～',
            'tutorial_intensify_start': '主公～請點擊【選擇祭祀卡】～',
            'tutorial_mission_again': '哇，主公好厲害耶～再做一次任務吧！',
            'tutorial_mission_boss': '哇，主公真的沒有讓小嬋失望耶~有了將領卡就可以去壯大陣容囉～首先回到【首頁】。',
            'tutorial_mission_start': '主公~請點擊【執行】按鈕，開始做任務~任務是【獲得將領】的主要途徑哦~',
            'tutorial_new_player': '主公您好！歡迎來到三國時代，我是服侍您的貂蟬~<br/>在這裡您可以<b>收集將領卡牌，組建超強陣容</b>，成就三國霸業！<br/>首先，請主公選擇一個五虎將作先鋒，開始三國之旅吧~',
            'tutorial_package_choose': '請主公【選擇這個將領】讓他上陣~',
            'tutorial_package_dialog': '主公~在這裡可以更換或強化已上陣的將領~現在請主公點擊【去強化】按鈕~',
            'tutorial_package_install': '主公～請主公點擊【上陣將領】～',
            'tutorial_package_intensify': '主公~你真是太有能耐了~小嬋下面介紹下強化功能~點擊這張【卡牌】~',
            'tutorial_package_ok': '請主公點擊【確定】鍵，將這個【將領上陣】~',
            'tutorial_package_start': '主公~上面這個條條就是主公現在的陣容啦~現在有個卡槽是空的，可以再上陣一個將領啦~那麼請主公點擊上面的【第二個卡槽】~',
            'tutorial_rob_dialog': '請主公點擊【奪寶】鍵～',
            'tutorial_rob_doaction': '請主公點擊【出征】圖示~然後默默祈禱，如果獲勝就有可能奪取該收集品。那麼主公，請奪取【孟德新書】的所有收集品吧！',
            'tutorial_rob_show': '主公~這裡列出的是【合成寶物所需的收集品】~請主公點擊【收集品-孟德新書殘卷1】',
            'tutorial_rob_start': '主公～正所謂“與人鬥智其樂無窮”，試試吧。【奪寶】可以獲得收集品～而【征討】可以獲得裝備卡～請主公點擊【奪寶】～',
            'tutorial_start': 'HI~主公你好~我是貂蟬，你可以叫我小嬋啦^_^歡迎來到三國世界哦~在這個世界裡，壯大自己才是王道。要壯大自己，做任務是個不錯的選擇。那麼先點擊【任務】圖示吧！',
        },
        'zh_cn': {
            'tutorial_battle_start': '请主公点击【出征】图标～然后默默祈祷，如果获胜就有可能【夺取武器、防具或坐骑】，装备于将领身上，将领就会更加强力哦～',
            'tutorial_goto_choose': '去选择',
            'tutorial_hecheng_do': '请主公点击【合成】键，即可合成【宝物】。宝物需要装备到上阵将领上才能发挥作用。宝物是很强大的存在哦~那么，请主公尽情畅游三国世界吧~',
            'tutorial_hecheng_start': '主公~有没有想小婵啊？孟德新书残卷都备齐了，现在可以去合成了！请主公点击【夺宝】按钮~',
            'tutorial_intensify_choose': '主公～请选择这张卡牌作为祭祀卡～',
            'tutorial_intensify_confirm': '主公~请点击【确定】以确认本次强化选择的卡牌清单~',
            'tutorial_intensify_finish': '主公～小婵已经把【任务】-获得将领、【阵容】-上阵将领、【强化】-增强将领，介绍完了。下面主公可以去继续【做任务】，也可以去试试【征讨】或【夺宝】！',
            'tutorial_intensify_go': '主公～请点击【强化】～强化后，祭祀卡会消失，但是原底卡升级后就会更强大哦～这就是【强化卡牌】的方法～',
            'tutorial_intensify_ok': '主公～请点击【确定】～',
            'tutorial_intensify_start': '主公～请点击【选择祭祀卡】～',
            'tutorial_mission_again': '哇，主公好厉害耶～再做一次任务吧！',
            'tutorial_mission_boss': '哇，主公真的没有让小婵失望耶~有了将领卡就可以去壮大阵容喽~首先回到【首页】。',
            'tutorial_mission_start': '主公~请点击【执行】按钮，开始做任务~任务是【获得将领】的主要途径哦~',
            'tutorial_new_player': '主公~时逢乱世，天下三分，各路英雄都选择了自己的道路，我们也要做出自己的选择了！',
            'tutorial_package_choose': '请主公【选择这个将领】让他上阵~',
            'tutorial_package_dialog': '主公~在这里可以更换或强化已上阵的将领~现在请主公点击【去强化】按钮~',
            'tutorial_package_install': '主公～请主公点击【上阵将领】～',
            'tutorial_package_intensify': '主公~你太有才了~小婵下面介绍下强化功能~点击这张【卡牌】~',
            'tutorial_package_ok': '请主公点击【确定】键，将这个【将领上阵】~',
            'tutorial_package_start': '主公~上面这个条条就是主公现在的阵容啦~现在有个卡槽是空的，可以再上阵一个将领啦~那么请主公点击上面的【第二个卡槽】~',
            'tutorial_rob_dialog': '请主公点击【夺宝】键～',
            'tutorial_rob_doaction': '请主公点击【夺宝】图标~然后默默祈祷，如果获胜就有可能夺取该收集品。那么主公，请夺取【孟德新书】的所有收集品吧！',
            'tutorial_rob_show': '主公~这里列出的是【合成宝物所需的收集品】~请主公点击【收集品-孟德新书残卷1】',
            'tutorial_rob_start': '主公～正所谓“与人斗其乐无穷”，试试吧。【夺宝】可以获得收集品～而【征讨】可以获得装备卡～请主公点击【夺宝】～',
            'tutorial_start': 'HI~主公你好~我是貂蝉，你可以叫我小婵啦^_^欢迎来到三国世界哦~在这个世界里，壮大自己才是王道。要壮大自己，做任务是个不错的选择。那么先点击【任务】图标吧！',
        },
    };
    w.Mojo.lang['logingift'] = {
        'zh_tw': {
            'day_text': '天',
            'entity_detail': '禮物詳細資訊',
            'ingame_text': '進入遊戲',
            'title': '連續登陸獎勵',
        },
        'zh_cn': {
            'day_text': '天',
            'entity_detail': '礼物详细信息',
            'ingame_text': '进入游戏',
            'title': '连续登录奖励',
        },
    };
    w.Mojo.lang['appraise'] = {
        'zh_tw': {
            'appraise_btn_txt': '去評論',
            'appraise_desc': '主公~去App Store给五星評論，您將獲得：',
            'appraise_info1': '隨機將領卡一張',
            'appraise_info2': '最少有四星將領哦~',
            'appraise_info3': '評論後，獎勵將在24小時内發放',
            'appraise_tip': '不再彈出提示',
            'appraise_title': '評五星送大禮',
        },
        'zh_cn': {
            'appraise_btn_txt': '去评价',
            'appraise_desc': '主公~去App Store给五星评价，您将获得：',
            'appraise_info1': '随机将领卡一张',
            'appraise_info2': '保底四星将领哦~',
            'appraise_info3': '评价后，奖励将在24小时内发放',
            'appraise_tip': '不再弹出提示',
            'appraise_title': '评五星送大礼',
        },
    };
    w.Mojo.lang['signin'] = {
        'zh_tw': {
            'day_text': '',
            'has_got_award': '',
            'rarity_notice': '',
            'rarity_notice2': '',
            'signin': '',
            'signin fail': '',
            'signin-gift-title': '',
            'signin-sucess-msg': '',
            'signin-sucess-msg-double': '',
            'signin-title': '',
            'signin_msg01': '',
            'signin_msg02': '',
            'signin_over': '',
        },
        'zh_cn': {
            'day_text': '天',
            'has_got_award': '收到',
            'rarity_notice': '三星扭蛋',
            'rarity_notice2': '四星扭蛋',
            'signin': '签到',
            'signin fail': '签到失败',
            'signin-gift-title': '签到奖励',
            'signin-sucess-msg': '主公～签到成功！您获得了：',
            'signin-sucess-msg-double': '主公~天降鸿福，本次签到获得了双倍的奖励！',
            'signin-title': '每日签到',
            'signin_msg01': '主公~您已连续登录<span class=\"redfont\">{{:days}}</span>天，快快签到领取【{{:name}}】吧~',
            'signin_msg02': '主公~再累计签到<span class=\"redfont\">{{:days}}</span>天，就可以获得【{{:name}}】，明天也请继续签到哦~',
            'signin_over': '已领取',
        },
    };
    w.Mojo.lang['props'] = {
        'zh_tw': {
            'add_avoid_war': '使用【{{name}}】後，免戰時間重置為%hhu%mmu%ssu',
            'add_ep': '使用【{{name}}】後，你的精力恢復了',
            'add_null': '神馬都沒有增加，白費了',
            'add_sp': '使用【{{name}}】後，你的體力恢復了',
            'add_vm': '使用【{{name}}】後，你的銀幣增加了',
            'avoid_war_time': '免戰時間：%hhu %mmu %ssu',
            'buy_props_fail_title': '購買失敗',
            'buy_props_please': '請先購買道具！',
            'buy_props_success': '購買成功！',
            'buy_props_success_content': '您購買的商品已經放入您的包裹中。',
            'buy_props_success_title': '購買成功',
            'buy_warning_content': '主公～我軍要購入此東東嗎？',
            'buy_warning_title': '購買確認',
            'clear_tire': '',
            'donot_use_army_dan': '',
            'first_add_avoid_war': '使用【{{name}}】後，免戰時間為%hhu%mmu%ssu',
            'goto_payment': '去加值',
            'modify_name': '',
            'modify_name_fail': '',
            'modify_name_not_enough': '',
            'modify_name_sucess': '',
            'modify_name_sucess_content': '',
            'not_use_army_dan': '',
            'player_ep_max': '主公體力充沛，不用再補啦。',
            'player_sp_max': '主公精力充沛，不用再補啦。',
            'priceless': '無價之寶，不可購買',
            'props': '道具',
            'props_detail_title': '道具詳細資訊',
            'sure_avoid_war_time_content': '主公~我軍現在還有免戰時間，如果使用{{name}}，則免戰時間將重置。你確定要使用嗎？',
            'sure_avoid_war_time_title': '免戰時間重置',
            'sure_buy': '確定購買',
            'think_again': '再想想',
            'unit': '天',
            'use_props_fail': '道具使用失敗',
            'use_props_success': '道具使用成功',
        },
        'zh_cn': {
            'add_avoid_war': '使用【{{name}}】后，免战时间重置为%hhu%mmu%ssu',
            'add_ep': '使用【{{name}}】后，你的精力恢复了',
            'add_null': '啥都没有增加，白费了',
            'add_sp': '使用【{{name}}】后，你的体力恢复了',
            'add_vm': '使用【{{name}}】后，你的银币增加了',
            'avoid_war_time': '免战时间：%hhu %mmu %ssu',
            'buy_props_fail_title': '购买失败',
            'buy_props_please': '请先购买道具！',
            'buy_props_success': '购买成功！',
            'buy_props_success_content': '您购买的商品已经放入您的包裹中。',
            'buy_props_success_title': '购买成功',
            'buy_warning_content': '主公～我军要购入此东东吗？',
            'buy_warning_title': '购买确认',
            'clear_tire': '疲劳值已全部消除',
            'donot_use_army_dan': '主公~你不需要消除疲劳哦~',
            'first_add_avoid_war': '使用【{{name}}】后，免战时间为%hhu%mmu%ssu',
            'goto_payment': '去充值',
            'modify_name': '更改昵称',
            'modify_name_fail': '更改失败',
            'modify_name_not_enough': '主公~您的更名卡数量不够哦~',
            'modify_name_sucess': '更改成功',
            'modify_name_sucess_content': '主公～您的新昵称已更改成功。',
            'not_use_army_dan': '主公~今天不能再使用该物品了哦~',
            'player_ep_max': '主公体力充沛，不用再补啦。',
            'player_sp_max': '主公精力充沛，不用再补啦。',
            'priceless': '无价之宝',
            'props': '道具',
            'props_detail_title': '道具详细信息',
            'sure_avoid_war_time_content': '主公~我军现在还有免战时间，如果使用{{name}}，则免战时间将重置。你确定要使用吗？',
            'sure_avoid_war_time_title': '免战时间重置',
            'sure_buy': '确定购买',
            'think_again': '再想想',
            'unit': '天',
            'use_props_fail': '道具使用失败',
            'use_props_success': '道具使用成功',
        },
    };
    w.Mojo.lang['home'] = {
        'zh_tw': {
            'Assistant': '助手',
            'Battle': '征討',
            'Battleground': '',
            'Chat': '聊天',
            'Do Task': '任務',
            'Entity Battle': '奪寶',
            'Entity Browse': '卡牌',
            'Entity Embed': '排列陣容',
            'Entity Purchase': '商城',
            'Force': '勢力',
            'Friend': '好友',
            'Fuben': '闖關',
            'Illustration': '圖鑑',
            'Intensify': '強化',
            'Messages': '消息',
            'My Slots': '我的陣容',
            'Props': '道具',
            'Rank': '排行',
            'Register Code Tip': '',
            'Settings': '設置',
            'Statistics': '統計',
            'Test': '測試',
            'Things Everyday': '每天要做的事',
            'Twitter': 'Facebook',
            'Unrebirth': '',
            'account bind success': '',
            'account secrity prompt': '',
            'announcement_title': '遊戲公告',
            'back to top': '',
            'bind award tips': '',
            'bind email': '',
            'bind weibo': '',
            'bind_rebirth_drug': '',
            'bind_rebirth_drug_content': '',
            'binding email prompt': '',
            'binding prompt': '',
            'binding weibo prompt': '',
            'create_force': '創建勢力',
            'create_free': '免費創建',
            'create_pay': '付費創建',
            'create_succ': '創建成功',
            'create_succ_tip': '恭喜您成功創建勢力【{{:name}}】~',
            'create_tip': '為您的勢力取一個威震八方的名字吧',
            'create_use_rebirth': '捐獻68顆轉生丹即可免費創建勢力~',
            'dont_border_me_again': '',
            'email bind success tips': '',
            'email_bind': 'email綁定中，{{:day}}後可通过email找回密碼',
            'force_create_failed': '勢力創建失敗',
            'force_create_ok': '主公~您還未加入勢力，趕快創建或加入一個吧！',
            'force_join_no': '主公~您還未加入勢力，升到{{:level}}級就能加入勢力哦~',
            'force_join_ok': '主公～您還未加入勢力，趕快加入一個吧！升到{{:level}}級就能創建勢力哦～',
            'force_name_empty': '請輸入勢力名字',
            'force_name_empty1': '請輸入勢力名字',
            'force_name_max': '最多5個字',
            'go_sanguo': '進入三國',
            'helpful hints': '',
            'home': '勢力',
            'join_force': '加入勢力',
            'login_acc': '帳號：',
            'login_info': '主公~您當前登陸的帳號資訊是：',
            'login_nick': '昵稱：',
            'login_tip': '不同的伺服器可使用同一帳號登錄，但不能使用昵稱登錄哦~',
            'login_title': '帳號登錄資料',
            'neven_remind': '不再提醒',
            'new_player_gift_name': '恭喜你獲得新手獎勵：【{{name}}】',
            'new_player_gift_title': '新手獎勵',
            'rebirth_not_enouph': '主公~您的轉生丹不夠啦！您可以通過闖關獲得足夠的轉生丹哦~',
            'rebirth_not_enouph_title': '轉生丹不足',
            'rebirth_now_have': '（現有{{:num}}個轉生丹）',
            'weibo_login_notice1': '',
            'weibo_login_notice2': '',
            'weibo_login_notice_title1': '',
            'weibo_login_notice_title2': '',
            'yahoo prompt': '',
        },
        'zh_cn': {
            'Assistant': '助手',
            'Battle': '征讨',
            'Battleground': '战场',
            'Chat': '聊天',
            'Do Task': '任务',
            'Entity Battle': '夺宝',
            'Entity Browse': '卡牌',
            'Entity Embed': '排列阵容',
            'Entity Purchase': '商城',
            'Force': '势力',
            'Friend': '好友',
            'Fuben': '闯关',
            'Illustration': '图鉴',
            'Intensify': '强化',
            'Messages': '消息',
            'My Slots': '我的阵容',
            'Props': '道具',
            'Rank': '排行',
            'Register Code Tip': '主公~您成功的将账户绑定到了邮箱<span style="color:#A80E0E">{{:email}}</span>上，您可以使用这个邮箱来登录游戏了！<br/>已向您的邮箱发送验证邮件，请注意查收。验证后可用该邮箱进行找回密码操作。',
            'Settings': '设置',
            'Statistics': '统计',
            'Test': '测试',
            'Things Everyday': '每天要做的事',
            'Twitter': '微博',
            'Unrebirth': '轮回',
            'account bind success': '<div class="paragraph">主公~账户已绑定成功，现在起，您可以使用绑定微博（邮箱）登录游戏</div>',
            'account secrity prompt': '<div class="paragraph">主公~为了您的账户安全，需要您重新绑定邮箱。<br/>绑定后可用邮箱登录游戏哦~</div>',
            'announcement_title': '游戏公告',
            'back to top': '回顶部',
            'bind award tips': '绑定奖励',
            'bind email': '绑定邮箱',
            'bind weibo': '绑定微博',
            'bind_rebirth_drug': '转生丹',
            'bind_rebirth_drug_content': '主公~您已成功绑定了游戏的账户,获得了如下奖励:',
            'binding email prompt': '主公~邮箱绑定中，{{:date}}后绑定成功~',
            'binding prompt': '主公~邮箱/微博绑定中，{{:date}}后绑定成功~',
            'binding weibo prompt': '主公~微博绑定中，{{:date}}后绑定成功~',
            'create_force': '创建势力',
            'create_free': '免费创建',
            'create_pay': '付费创建',
            'create_succ': '创建成功',
            'create_succ_tip': '恭喜您成功创建势力【{{:name}}】~',
            'create_tip': '为您的势力取一个惊艳的名字吧',
            'create_use_rebirth': '捐献68个转生丹即可免费创建势力~',
            'dont_border_me_again': '不再提示',
            'email bind success tips': '主公~您的账户已成功合并到账户:<span style="color:#A80E0E">{{:email}}</span>下,以后请使用此账户登录此角色。为了您的账户安全,请使用<span style="color:#A80E0E">{{:email}}</span>重新登录游戏。',
            'email_bind': '邮箱绑定中，{{:day}}后可通过邮箱找回密码',
            'force_create_failed': '势力创建失败',
            'force_create_ok': '主公～您还未加入势力，赶快创建或加入一个吧！',
            'force_join_no': '主公～您还未加入势力，升到{{:level}}级就能加入势力哦~',
            'force_join_ok': '主公～您还未加入势力，赶快加入一个吧！升到{{:level}}级就能创建势力哦～',
            'force_name_empty': '亲～势力名字不能为空',
            'force_name_empty1': '亲～势力不能没有名字哦',
            'force_name_max': '最多5个汉字',
            'go_sanguo': '进入三国',
            'helpful hints': '友情提示',
            'home': '势力',
            'join_force': '加入势力',
            'login_acc': '账户：',
            'login_info': '主公~您当前登录的账户信息是：',
            'login_nick': '昵称：',
            'login_tip': '不同的服务器可使用同一账户登录，但不能使用昵称登录哦~',
            'login_title': '账户登录信息',
            'neven_remind': '不再提醒',
            'new_player_gift_name': '恭喜你获得新手奖励：【{{name}}】',
            'new_player_gift_title': '新手奖励',
            'rebirth_not_enouph': '主公~您的转生丹不够啦！您可以通过闯关获得足够的转生丹哦',
            'rebirth_not_enouph_title': '转生丹不足',
            'rebirth_now_have': '（现有{{:num}}个转生丹）',
            'weibo_login_notice1': '由于新浪微博登录方式变更，<span style="color:#A80E0E">微博登录即将作废</span>，为了您的账户安全，请及时绑定邮箱！',
            'weibo_login_notice2': '由于新浪微博登录方式变更，<span style="color:#A80E0E">微博登录即将作废</span>，作废后将不能使用微博登录游戏。',
            'weibo_login_notice_title1': '安全提示',
            'weibo_login_notice_title2': '温馨提示',
            'yahoo prompt': '<div class="paragraph">主公~雅虎邮箱即将停用,您的密码找回邮箱将失效,为了您的账户安全, 强烈建议您重新绑定邮箱。</div>',
        },
    };
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.Broadcast = w.Mojo.Object.extend({
        clsname: function () {
            return "com.Broadcast";
        },
        init: function (options) {
            this._super('com-broadcast', options);
            this.element().addClass('mojo-com-broadcast');
            this.element().append('<div class="icon"></div>');
            this._wrapper = $('<div class="wrapper"></div>').appendTo(this.element());
            var self = this;
            this._interval = w.setInterval(function () {
                self.sync();
            }, 300000);
            this._index = 0;
            this._run();
        },
        _run: function () {
            if (this._data == undefined || this._data == null || this._data.length == 0) {
                this._running = false;
                this.sync();
            } else {
                this._running = true;
                var self = this;
                if (this._index >= this._data.length) this._index = 0;
                this._current = this._data[this._index];
                var item = this._genItem(this._current);
                this["_display" + this._options.display](item);
            }
        },
        _display0: function (item) {
            var self = this;
            item.animate({
                left: -item.width(),
            }, {
                duration: (item.width() + self._wrapper.width()) * 40,
                complete: function () {
                    $(this).remove();
                    self._index = parseInt((self._index + 1) % self._data.length);
                    self._run();
                },
            });
        },
        _display1: function (item) {
            var self = this;
            item.animate({
                top: "-=" + self._wrapper.height(),
            }, {
                duration: 1000,
                complete: function () {
                    if ($(this).position().top + $(this).height() > self._wrapper.height()) {
                        setTimeout(function () {
                            self._display1(item);
                        }, 2000);
                    } else {
                        $(this).delay(3000).animate({
                            opacity: 0,
                        }, {
                            duration: 1000,
                            complete: function () {
                                $(this).remove();
                                self._index = parseInt((self._index + 1) % self._data.length);
                                self._run();
                            }
                        });
                    }
                },
            });
        },
        _genItem: function (data) {
            if (this._options.display == 0) {
                return $('<div class="item">' + data.content + '</div>').appendTo(this._wrapper).css('left', this._wrapper.width()).css('top', 0);
            }
            return $('<div class="item">' + data.content + '</div>').appendTo(this._wrapper).css('left', 0).css('top', this._wrapper.height());
        },
        _getDefaultOptions: function () {
            return {
                display: 1,
            };
        },
        sync: function () {
            var self = this;
            var data = Mojo.cache.get("broadcast");
            if (data != undefined) {
                self._data = data;
                if (!self._running) {
                    self._run();
                }
            } else {
                Mojo.ajax('/message/broadcast', {
                    start: 0,
                    count: 1,
                }, function (result) {
                    if (result.errorCode == 0) {
                        self._data = result.data;
                        Mojo.cache.set("broadcast", self._data, 300);
                        if (!self._running) {
                            self._run();
                        }
                    }
                });
            }
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.ErrorDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.ErrorDialog";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-errdlg');
            var self = this;
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            this._content.html(this._options.errorMsg);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('ui', 'Close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: 'Error',
                errorCode: 0,
                errorMsg: '',
                handle: $.noop,
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.BaseProfileDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.BaseProfileDialog";
        },
        init: function (options) {
            this._super('com-profile-base-dialog', options);
            this.element().addClass('mojo-com-profile-base-dialog');
            var self = this;
            this._interval = w.setInterval(function () {
                self._refresh();
            }, 1000);
            this._tips = $('<div class="paragraph"></div>').appendTo(this._content);
            this._refresh();
            this._scroll = new Mojo.ui.Scroll(undefined, this._content, {
                direction: 2,
            });
            this.element().append(this._scroll.element());
            this._footer.append((new Mojo.ui.Button(undefined, {
                special: 'button-big-red',
                text: Mojo.utils.locale('common', 'Go Statistics'),
                click: function () {
                    Mojo.app.redirect('/statistics', {}, 'event', '04_022');
                },
            })).element());
            this._footer.append((new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                dataProvider: $.noop,
                title: Mojo.utils.locale('ui', 'Base Informations'),
                close: function () {
                    w.clearInterval(self._interval);
                }
            });
        },
        _refresh: function () {
            var data = this._options.dataProvider();
            for (var key in data) {
                var v = data[key];
                if (Mojo.utils.isNumeric(v)) {
                    data[key] = parseFloat(v);
                }
            }
            this._tips.empty();
            this._genTooltip(data);
        },
        _genTooltip: function (data) {
            new Mojo.ui.Label(undefined, {
                classes: ['name'],
                text: Mojo.utils.locale('common', 'name') + data.name
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['playid'],
                text: Mojo.utils.locale('common', 'playerId') + data.id
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['level'],
                text: Mojo.utils.locale('common', 'level') + data.level
            }).element().appendTo(this._tips);
            if (data.xp > data.next_xp) {
                data.xp = data.next_xp;
            }
            new Mojo.ui.Label(undefined, {
                classes: ['xp'],
                text: Mojo.utils.locale('common', 'xp') + data.xp + "/" + data.next_xp
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['rm'],
                text: Mojo.utils.locale('common', 'rm') + data.rm
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['vm'],
                text: Mojo.utils.locale('common', 'vm') + data.vm
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['grain'],
                text: Mojo.utils.locale('common', 'grain') + data.grain
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['gold'],
                text: Mojo.utils.locale('common', 'gold') + (data.gold || 0)
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['ep'],
                text: Mojo.utils.locale('common', 'ep') + data.ep + "/" + data.energy
            }).element().appendTo(this._tips);
            var time4ep = Mojo.utils.locale('common', 'time for next ep') + this._genEpRestore(data) + "<br>" + Mojo.utils.locale('common', 'time for all ep') + this._genEpFullRestore(data) + (data.ep_percent > 0 ? ('<br>' + Mojo.utils.locale('common', 'acceleration for restore ep') + data.ep_percent + "%") : '');
            $("<span class='time-for-ep'></span>").appendTo(this._tips).html(time4ep);
            new Mojo.ui.Label(undefined, {
                classes: ['sp'],
                text: Mojo.utils.locale('common', 'sp') + data.sp + "/" + data.stamina
            }).element().appendTo(this._tips);
            var time4sp = Mojo.utils.locale('common', 'time for next sp') + this._genSpRestore(data) + "<br>" + Mojo.utils.locale('common', 'time for all sp') + this._genSpFullRestore(data) + (data.sp_percent > 0 ? ('<br>' + Mojo.utils.locale('common', 'acceleration for restore sp') + data.sp_percent + "%") : '');
            $("<span class='time-for-sp'></span>").html(time4sp).appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['avoid_war_time'],
                text: Mojo.utils.locale('common', 'avoid war time', {
                    avoid_war_time: Mojo.utils.formatTime(data.avoid_war_time)
                })
            }).element().appendTo(this._tips);
            if (data != undefined && data.buffs != undefined && data.buffs.title != undefined && data.buffs.title != "") {
                new Mojo.ui.Label(undefined, {
                    classes: ['userbuff'],
                    text: Mojo.utils.locale('common', 'userbuff') + data.buffs.title,
                }).element().appendTo(this._tips);
                var userbuffs = '';
                $.each(data.buffs.list, function (i, u) {
                    userbuffs += '&#149' + u.name + '：' + u.desc + "</br>";
                });
                $("<span class='userbuffs'></span>").html(userbuffs).appendTo(this._tips);
            }
        },
        _genSpRestore: function (data) {
            var str = undefined;
            if (data.sp == data.stamina) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime(data.sp_second);
            }
            return str;
        },
        _genSpFullRestore: function (data) {
            var str = undefined;
            if (data.sp == data.stamina) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime((data.stamina - data.sp - 1) * data.sp_restore_pp + data.sp_second);
            }
            return str;
        },
        _genEpRestore: function (data) {
            var str = undefined;
            if (data.ep == data.energy) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime(data.ep_second);
            }
            return str;
        },
        _genEpFullRestore: function (data) {
            var str = undefined;
            if (data.ep == data.energy) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime((data.energy - data.ep - 1) * data.ep_restore_pp + data.ep_second);
            }
            return str;
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.BaseProfile = w.Mojo.Object.extend({
        clsname: function () {
            return "com.BaseProfile";
        },
        init: function (options) {
            this._super('com-profile-base', options);
            this.element().addClass('mojo-com-profile-base');
            this.element().append('<div class="left"></div><div class="center"></div><div class="right"></div>');
            this._addLeft();
            this._addCenter();
            this._addRight();
            var self = this;
            this._data = {};
            this._syncInterval = w.setInterval(function () {
                self.sync();
            }, 60000);
            this._restoreInterval = w.setInterval(function () {
                self._calcEp();
                self._calcSp();
                self._calcAvoidWarTime();
            }, 1000);
            this.element().click(function () {
                Mojo.track.onEvent('04_021');
                (this._bpdlg = new Mojo.com.BaseProfileDialog({
                    dataProvider: function () {
                        return self._data;
                    }
                })).open();
                this._bpdlg._scroll.refresh();
            });
        },
        _getDefaultOptions: function () {
            return {
                refreshCallback: $.noop,
            };
        },
        _addLeft: function () {
            var left = this.element().find('.left');
            this._name = $('<div class="name"></div>').appendTo(left);
            this._level = $('<div class="level">0</div>').appendTo(left);
            this._xp = new Mojo.ui.Progress(undefined, {
                classes: ['xp'],
                labelTemplate: '#{divide}',
            });
            this._xp.element().appendTo(left);
            $('<div class="xp-border"></div>').appendTo(left);
        },
        _addCenter: function () {
            this._rm = new Mojo.ui.Label(undefined, {
                classes: ['rm'],
                text: '0',
            });
            this._vm = new Mojo.ui.Label(undefined, {
                classes: ['vm'],
                text: '0',
            });
            this.element().find('.center').append(this._rm.element()).append(this._vm.element());
        },
        _addRight: function () {
            if (this._options.type == "battleGroundProfile") {
                var right = this.element().find('.right');
                var goldEle = $('<div class="gold mojo-ui-label"></div>').appendTo(right);
                $('<div class="icon"></div>').appendTo(goldEle);
                this._gold = $('<div class="gold"></div>').appendTo(goldEle);
            } else {
                this._ep = new Mojo.ui.Progress(undefined, {
                    classes: ['ep'],
                    labelTemplate: '#{divide}',
                });
                this.element().find('.right').append(this._ep.element()).append($('<div class="ep-border"></div>'));
            }
            this._sp = new Mojo.ui.Progress(undefined, {
                classes: ['sp'],
                labelTemplate: '#{divide}',
            });
            this.element().find('.right').append(this._sp.element()).append($('<div class="sp-border"></div>'));
        },
        _refresh: function () {
            var data = this._data;
            this._name.html(data.name);
            this._level.html(data.level);
            if (parseInt(data.xp) > parseInt(data.next_xp)) {
                data.xp = data.next_xp;
            }
            this._xp.value({
                value: data.xp,
                max: data.next_xp
            });
            this._rm.text(data.rm);
            this._vm.text(data.vm);
            if (this._options.type == "battleGroundProfile") {
                this._gold.text(data.gold || 0);
            } else {
                this._ep.value({
                    value: data.ep,
                    max: data.energy
                });
            }
            this._sp.value({
                value: data.sp,
                max: data.stamina
            });
            this._options.refreshCallback(data);
        },
        epRefresh: function (ep) {
            if (this._options.type == "battleGroundProfile") {
                return;
            }
            this._data.ep = ep;
            this._ep.value({
                value: this._data.ep,
                max: this._data.energy
            });
        },
        data: function (value) {
            if (value == undefined) {
                return this._data;
            }
            this._data = $.extend(true, this._data, value);
            this._refresh();
            if (Mojo.app.data.needLoginStatus == true) {
                if (Mojo.app.data.event == undefined)
                    Mojo.app.data.event = null;
                if (value.event != null) {
                    Mojo.app.data.event = value.event;
                    value.event = null;
                }
            }
            if (Mojo.app.data.needLoginStatus == false) {
                if (value.event == null) {
                    value.event = Mojo.app.data.event;
                    Mojo.app.data.event = undefined;
                    Mojo.app.data.needLoginStatus = undefined;
                }
            }
            if (!Mojo.utils.isNone(value.event)) {
                var evt = value.event;
                var t = evt.type;
                if (t == 15) {
                    var title_info = evt.title_info;
                    var pn = Mojo.utils.playerNameHtmlStr(title_info);
                    var content = $('<div class="paragraph"></div>').html(pn + "&nbsp;&nbsp;" + Mojo.utils.locale('common', 'forcewar_notice_members1', {
                        ownername: evt.userName,
                        forcename: evt.opponentForceName
                    }));
                    var dlg = new Mojo.ui.Dialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: Mojo.utils.locale('common', 'force_message'),
                        content: content
                    });
                    new Mojo.ui.Button(undefined, {
                        special: "button-big-red",
                        text: Mojo.utils.locale('ui', 'In War'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 2
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('ui', 'View More'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 5
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    dlg.open();
                } else if (t == 11) {
                    var content = $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'forcewar_win_grain', {
                        forcename: evt.opponentForceName,
                        grain: evt.grainCount
                    }));
                    var dlg = new Mojo.ui.Dialog(undefined, {
                        title: Mojo.utils.locale('common', 'force_message'),
                        content: content
                    });
                    new Mojo.ui.Button(undefined, {
                        special: "button-big-red",
                        text: Mojo.utils.locale('ui', 'View More'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 5
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('ui', 'Close'),
                        click: function () {
                            dlg.close();
                        }
                    }).element().appendTo(dlg._footer);
                    dlg.open();
                } else if (t == 13) {
                    var content = $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'forcewar_lose_grain', {
                        forcename: evt.opponentForceName,
                        grain: evt.grainCount
                    }));
                    var dlg = new Mojo.ui.Dialog(undefined, {
                        title: Mojo.utils.locale('common', 'force_message'),
                        content: content
                    });
                    new Mojo.ui.Button(undefined, {
                        special: "button-big-red",
                        text: Mojo.utils.locale('ui', 'Retaliate'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 2,
                                target_force_id: evt.attacker_id
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('ui', 'View More'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 5
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    dlg.open();
                } else if (t == 800 || t == 300 || t == 314 || t == 210 || t == 301 || t == 383 || t == 200) {
                    var dlg = new Mojo.com.CommonDialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: evt.header,
                        content: $('<div class="paragraph"></div>').html(evt.content),
                        leftBtnText: Mojo.utils.locale('ui', 'In War'),
                        leftBtnClick: function (that) {
                            that.close();
                            Mojo.app.redirect('/force', {
                                index: 2
                            });
                        },
                        rightBtnText: Mojo.utils.locale('common', 'close'),
                        rightBtnClick: function (that) {
                            that.close();
                        }
                    });
                    dlg.open();
                } else if (t == 81) {
                    var dlg = new Mojo.com.CommonDialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: evt.header,
                        content: $('<div class="paragraph"></div>').html(evt.content),
                        leftBtnText: Mojo.utils.locale('ui', 'In War2'),
                        leftBtnClick: function (that) {
                            that.close();
                            Mojo.app.redirect('/force', {
                                index: 7
                            });
                        },
                        rightBtnText: Mojo.utils.locale('common', 'close'),
                        rightBtnClick: function (that) {
                            that.close();
                        }
                    });
                    dlg.open();
                } else if (t == 91) {
                    var dlg = new Mojo.com.CommonDialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: evt.header,
                        content: $('<div class="paragraph"></div>').html(evt.content),
                        leftBtnText: Mojo.utils.locale('ui', 'In War'),
                        leftBtnClick: function (that) {
                            that.close();
                            Mojo.app.redirect('/force', {
                                index: 2
                            });
                        },
                        rightBtnText: Mojo.utils.locale('common', 'close'),
                        rightBtnClick: function (that) {
                            that.close();
                        }
                    });
                    dlg.open();
                } else if (t == 93) {
                    var dlg = new Mojo.com.CommonDialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: evt.header,
                        content: $('<div class="paragraph"></div>').html(evt.content),
                        leftBtnText: Mojo.utils.locale('ui', 'Retaliate'),
                        leftBtnClick: function (that) {
                            that.close();
                            Mojo.app.redirect('/force', {
                                index: 2,
                                refresh: 1,
                                target_city_id: 'xxx'
                            });
                        },
                        rightBtnText: Mojo.utils.locale('common', 'close'),
                        rightBtnClick: function (that) {
                            that.close();
                        }
                    });
                    dlg.open();
                }
            }
        },
        sync: function (isforce) {
            var self = this;
            Mojo.ajax('/player/profile', {}, function (result) {
                if (result.errorCode == 0) {
                    Mojo.app.baseProfileData = result.data;
                    Mojo.cache.set('userId', result.data.id);
                    Mojo.cache.set('playerlevel', result.data.level);
                    Mojo.cache.set('guid', result.data.guid);
                    self.data(result.data);
                    if (result.data != undefined && Mojo.utils.isNone(result.data.army) == false && parseInt(result.data.army) != 0) {
                        Mojo.gap.buffCut(result.data.army);
                    }
                    if (result.data && result.data.couldLoginGift && Mojo.app.currentPage && Mojo.app.currentPage.checkLoginGift) {
                        if (Mojo.utils.getSomething("isNewPlayer") == 'yes' || Mojo.utils.getSomething("isNewPlayer") == 'tutorial' || Mojo.utils.getSomething("tutorial") == 'yes')
                            return;
                        Mojo.app.currentPage.checkLoginGift();
                    }
                    if (result.data.is_annouce_new == 1 && Mojo.app.currentPage._updateAnnouncementIcon instanceof Function) {
                        Mojo.app.currentPage._updateAnnouncementIcon(result.data);
                    }
                    self._setAnimationLocalStoreage(result.data);
                }
            });
        },
        _setAnimationLocalStoreage: function (data) {
            var self = this;
            if (parseInt(data.level) < 30) {
                var test = Mojo.app.getStorage('settings-battle-animation');
                if (test != undefined && test != 'undefined') {
                    Mojo.app.saveStorage('settings-battle-animation', undefined);
                }
                test = Mojo.app.getStorage('enforce-animation');
                if (test != undefined && test != 'undefined') {
                    Mojo.app.saveStorage('enforce-animation', undefined);
                }
                test = Mojo.app.getStorage('compose-animation');
                if (test != undefined && test != 'undefined') {
                    Mojo.app.saveStorage('compose-animation', undefined);
                }
            } else {
                var v1 = Mojo.app.battleAnimation();
                var v2 = Mojo.app.enforceAnimation();
                var v3 = Mojo.app.composeAnimation();
                var v4 = Mojo.app.getStorage('animation-settings-reset');
                if (v1 == undefined || v1 == 'undefined' || v2 == undefined || v2 == 'undefined' || v3 == undefined || v3 == 'undefined' || v4 == undefined || v4 == 'undefined') {
                    Mojo.ajax("/settings", {}, function (response) {
                        if (response.errorCode == 0) {
                            self._settingsData = {};
                            for (var item in response.data) {
                                var o = response.data[item];
                                self._settingsData[o.key] = {
                                    value: o.value
                                };
                                for (var k in o) {
                                    if (k != 'key' && k != 'value') {
                                        self._settingsData[o.key][k] = o[k];
                                    }
                                }
                            }
                            if (self._settingsData['flash'] && self._settingsData['flash'].value) {
                                Mojo.app.battleAnimation(self._settingsData['flash'].value);
                            }
                            if (self._settingsData['enforce-flash'] && self._settingsData['enforce-flash'].value) {
                                Mojo.app.enforceAnimation(self._settingsData['enforce-flash'].value);
                            }
                            if (self._settingsData['compose-flash'] && self._settingsData['compose-flash'].value) {
                                Mojo.app.composeAnimation(self._settingsData['compose-flash'].value);
                            }
                            Mojo.app.saveStorage('animation-settings-reset', 1);
                        }
                    });
                }
            }
        },
        _calcEp: function () {
            if (this._data.ep < this._data.energy) {
                if (this._data.ep_second < 0) {
                    this._data.ep_second = this._data.ep_restore_pp;
                    return;
                }
                this._data.ep_second--;
                if (this._data.ep_second == 0) {
                    this._data.ep_second = this._data.ep_restore_pp;
                    this._data.ep++;
                    this._refresh();
                }
            }
        },
        _calcSp: function () {
            if (this._data.sp < this._data.stamina) {
                if (this._data.sp_second < 0) {
                    this._data.sp_second = this._data.sp_restore_pp;
                    return;
                }
                this._data.sp_second--;
                if (this._data.sp_second == 0) {
                    this._data.sp_second = this._data.sp_restore_pp;
                    this._data.sp++;
                    this._refresh();
                }
            }
        },
        _calcAvoidWarTime: function () {
            if (this._data.avoid_war_time > 0) {
                this._data.avoid_war_time--;
            }
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.ImagePlayer = Mojo.Object.extend({
        clsname: function () {
            return "com.ImagePlayer";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass("mojo-com-imageplayer").append($('<img class="image-url" />'));
            this._now = 0;
            this._times = 0;
            this._imageWidth = 0;
            var self = this;
            this.element().find(".image-url").first().bind("load", function () {
                if (self._options.onStart instanceof Function) {
                    self._options.onStart(self);
                }
                self._start();
            });
            this.element().find(".image-url").first().bind("error", function () {
                if (self._options.onStart instanceof Function) {
                    self._options.onStart(self);
                }
                self._error();
            });
        },
        play: function (el, options) {
            jQuery.extend(true, this._options, options);
            this.element().appendTo(el);
            var url = this.element().find(".image-url").first().attr("src");
            if (url != this._options.url) {
                this.element().find(".image-url").first().attr({
                    src: this._options.url
                });
            } else {
                this._now = 0;
                this._times = 0;
                this._imageWidth = 0;
                if (this._options.onStart instanceof Function) {
                    this._options.onStart(this);
                }
                this._start();
            }
        },
        _clear: function () {
            if (this._player) {
                clearTimeout(this._player);
            }
        },
        _error: function () {
            var self = this;
            this._clear();
            if (self._options.onFinish instanceof Function && self._options.onFinish(self) === true) {
                self._player = setTimeout(function () {
                    self._error();
                }, 500);
            } else if (self._options.onStop instanceof Function) {
                self._options.onStop(self);
            }
        },
        _start: function () {
            this.element().css({
                width: this._options.playWidth,
                height: this._options.playHeight,
                position: "relative",
                overflow: "hidden"
            });
            this.element().find(".image-url").first().css({
                position: "absolute"
            });
            this._imageWidth = this.element().find(".image-url").first().width();
            this._times = this._imageWidth / (this._options.playWidth);
            this._do();
        },
        _do: function () {
            if (this._now < this._times) {
                var self = this;
                this.element().find(".image-url").first().css({
                    left: -1 * this._options.playWidth * this._now
                });
                this._now += 1;
                this._clear();
                this._player = setTimeout(function () {
                    self._do();
                }, this._options.playSpeed);
            } else {
                this._clear();
                this._now = 0;
                if (this._options.onFinish instanceof Function && this._options.onFinish(this) === true) {
                    this._do();
                } else {
                    this._times = 0;
                    this._options.playWidth = 0;
                    this._imageWidth = 0;
                    if (this._options.onStop instanceof Function) {
                        this._options.onStop(this);
                    }
                }
            }
        },
        _getDefaultOptions: function () {
            return {
                url: undefined,
                playWidth: 0,
                heightWidth: 0,
                playSpeed: 1000 / 24,
                onStart: undefined,
                onFinish: undefined,
                onStop: undefined
            };
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.SmallEntity = w.Mojo.Object.extend({
        clsname: function () {
            return "com.SmallEntity";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass("mojo-com-entity-small");
            this.element().append('<div class="minis-flag"></div>');
            this._refresh();
            this._initEvent();
        },
        _refresh: function () {
            var self = this;
            if (typeof this._data == "object") {
                self._setCard();
                this._setMinisFlag();
                if (this._options.callback instanceof Function) {
                    this._options.callback(this);
                }
            } else if (typeof this._data == "string") {
                Mojo.ajax("/entity/detail", {
                    id: this._data,
                    pid: this._options.pid,
                    eid: this._options.eid,
                    rebirth_count: this._options.rebirthCount
                }, function (response) {
                    if (response && response.errorCode === 0) {
                        self._data = response.data;
                        self._setCard();
                        self._setMinisFlag();
                        if (self._options.callback instanceof Function) {
                            self._options.callback(self);
                        }
                    }
                });
            }
        },
        _setCard: function () {
            var self = this;
            $('<img />').addClass("card-image-url").bind("load", function () {
                self.element().find(".card-image-url").show();
            }).hide().prependTo(this.element()).attr({
                src: this._data.small_image
            });
        },
        _setMinisFlag: function () {
            if (this._data && this._data.type_id && Mojo.utils.isWhat(this._data.type_id, "minis")) {
                if (Mojo.utils.isWhat(this._data.entity_type_id, "general")) {
                    this.element().find(".minis-flag").addClass('minis-flag-type-gp-' + this._data.entity_group_id).show();
                } else {
                    this.element().find(".minis-flag").addClass('minis-flag-type-' + this._data.entity_type_id).show();
                }
            } else {
                this.element().find(".minis-flag").hide();
            }
        },
        _initEvent: function () {
            var self = this;
            this.element().bind("click", function () {
                if (self._options.click instanceof Function) {
                    self._options.click(self);
                }
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.Entity = w.Mojo.Object.extend({
        clsname: function () {
            return "com.Entity";
        },
        init: function (id, data, options) {
            this.data = data;
            this._super(id, options);
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.LargeEffortEntityDialog = Mojo.com.CommonDialog.extend({
        init: function (data, options) {
            this._data = data;
            this._super(data, options);
            this.element().addClass('mojo-com-LargeEffortEntityDialog');
            this._load();
        },
        _load: function () {
            var url = '';
            if (this._options.subType == 0) {
                url = '/illustration/achievementSkillDetail';
            } else if (this._options.subType == 1) {
                url = '/illustration/achievementExchangeDetail';
            }
            var self = this;
            self._ajaxAchievementBalaBala(url, function (result) {
                self.detailData = result.data;
                self._addEffortName();
                self._addEffortContent();
                self._addEffortReward();
                self._addEffortButton();
                self.open();
            }, function (result) {
                Mojo.app.toast.show(result.errorMsg);
            });
        },
        _addEffortName: function () {
            var n = this.detailData.name;
            var name = $('<div class="effortname"></div>').appendTo(this._content);
            $('<div class="name"></div>').html(n).appendTo(name);
            $('<img class="icon">').attr({
                src: this.detailData.large_image
            }).appendTo(name);
        },
        _addEffortContent: function () {
            var _description = this.detailData.description;
            var _illustrations = this.detailData.illustrations;
            var description = $('<div class="description"></div>').html(Mojo.utils.locale('entity', 'introduction')).appendTo(this._content);
            $('<div class="des"></div>').html(_description).appendTo(description);
            var lightEntity = $('<div class="light-entity"></div>').html('<div>' + Mojo.utils.locale('illustration', 'effort_light') + '</div>');
            lightEntity.appendTo(description);
            var str = '<ul class="effort-name">';
            for (var i = 0; i < _illustrations.length; i++) {
                var ele = '';
                var item = _illustrations[i];
                var name = item.name;
                var status = item.status;
                if (status == 1) {
                    ele = '<li class="light">' + name + '</li>';
                } else {
                    ele = '<li>' + name + '</li>';
                }
                str += ele;
                var x = (i + 1) % 4;
                if (x == 0) {
                    str += '</ul><ul class="effort-name">';
                }
            }
            str += '</ul>';
            lightEntity.append($(str));
        },
        _addEffortReward: function () {
            var reward = $('<div class="reward-content"></div>').appendTo(this._content);
            var leftTitle = $('<div class="left-title"></div>').appendTo(reward);
            var content = $('<div class="content"></div>').appendTo(reward);
            var topTitle = $('<div class="top-title"></div>').appendTo(content);
            var desc = (this._options.subType == 0) ? this.detailData.rewards.description : (this.detailData.status == 2 ? Mojo.utils.locale('illustration', 'effort_getReward') : Mojo.utils.locale('illustration', 'effort_rewardtitle'));
            topTitle.html(desc);
            for (var i = 0; i < this.detailData.rewards.entity.length; i++) {
                var d = this.detailData.rewards.entity[i];
                var itemEle = $('<div class="itemEle mojo-com-entity-small"></div>').appendTo(content);
                itemEle.append($('<img class="entity-icon">').attr({
                    src: d.small_image
                }));
                var d_detail = d.entities;
                if (d_detail) {
                    itemEle.append($('<div class="minis-flag"></div>'));
                    d_detail = d_detail[0];
                    this.rarity_id = d_detail.rarity_id;
                    this._setMinisFlag(d_detail);
                }
                itemEle.append($('<div class="name"></div>').html(d.name));
                if (this._options.subType == 1) {
                    itemEle.append($('<div class="count"></div>').html(d.count));
                }
            }
        },
        _setMinisFlag: function (d) {
            if (d && d.type_id && Mojo.utils.isWhat(d.type_id, "minis")) {
                if (Mojo.utils.isWhat(d.entity_type_id, "general")) {
                    this.element().find(".minis-flag").addClass('minis-flag-type-gp-' + d.entity_group_id).show();
                } else {
                    this.element().find(".minis-flag").addClass('minis-flag-type-' + d.entity_type_id).show();
                }
            } else {
                this.element().find(".minis-flag").hide();
            }
        },
        _addEffortButton: function () {
            var status = this.detailData.status;
            var subType = this._options.subType;
            var t = '';
            this._options.leftBtnText = '';
            if (subType == 0) {
                switch ("" + status) {
                case '0':
                    this._options.leftBtnDisabled = true;
                    t = Mojo.utils.locale('illustration', 'effort_active');
                    t += '<div class="star"><span class="star-icon"></span><span>' + this.detailData.star + '</span></div>';
                    break;
                case '1':
                    t = Mojo.utils.locale('illustration', 'effort_active');
                    t += '<div class="star"><span class="star-icon"></span><span>' + this.detailData.star + '</span></div>';
                    break;
                case '2':
                    t = '<div class="cancel-active">' + Mojo.utils.locale('illustration', 'effort_cancel_active') + '</div>';
                    t += '<div class="rm-count"><span class="rm"></span><span>' + this.detailData.rm + '</span></div>';
                    break;
                }
            } else if (subType == 1) {
                switch ("" + status) {
                case '0':
                    this._options.leftBtnDisabled = true;
                    t = Mojo.utils.locale('illustration', 'effort_get');
                    break;
                case '1':
                    t = Mojo.utils.locale('illustration', 'effort_get');
                    break;
                case '2':
                    break;
                }
            }
            this._options.leftBtnText = t;
            this._options.rightBtnText = Mojo.utils.locale('common', 'close');
            var self = this;
            this._options.leftBtnDisabledClick = function () {
                self.leftBtnDisabledClick();
            }
            this._options.leftBtnClick = function () {
                self.leftBtnClick();
            }
            this._options.rightBtnClick = function () {
                self.close();
            }
            this._addButtons();
        },
        leftBtnClick: function () {
            var status = this.detailData.status;
            var subType = this._options.subType;
            if (subType == 0) {
                switch ("" + status) {
                case '0':
                    break;
                case '1':
                    this._active();
                    break;
                case '2':
                    this._cancelActive();
                    break;
                }
            } else if (subType == 1) {
                switch ("" + status) {
                case '0':
                    break;
                case '1':
                    this._get();
                    break;
                case '2':
                    break;
                }
            }
        },
        _active: function () {
            var self = this;
            var content = $('<div class="paragraph"></div>').html(Mojo.utils.locale('illustration', 'effort_activeContent', {
                star: this.detailData.star,
                name: this.detailData.name
            }));
            var dlg = new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('illustration', 'effort_activeConfirm'),
                content: content,
                leftBtnText: Mojo.utils.locale('common', 'ok'),
                rightBtnText: Mojo.utils.locale('common', 'cancel'),
                leftBtnClick: function () {
                    dlg.hide();
                    self._ajaxAchievementBalaBala('/illustration/achievementSkillEnable', function () {
                        var dlg2 = new Mojo.com.CommonDialog('achievementSkillEnableOk', {
                            title: Mojo.utils.locale('illustration', 'effort_activeOk'),
                            content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('illustration', 'effort_activeOkContent', {
                                name: self.detailData.name
                            })),
                            leftBtnText: Mojo.utils.locale('common', 'ok'),
                            leftBtnClick: function () {
                                self.close();
                                dlg.close();
                                dlg2.close();
                            },
                            close: function () {
                                self.close();
                                dlg.close();
                            }
                        });
                        dlg2.open(true);
                        self._options.refresh();
                    }, function () {
                        var dlg3 = new Mojo.com.CommonDialog(undefined, {
                            title: Mojo.utils.locale('illustration', 'effort_activeFaild'),
                            content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('illustration', 'effort_activeFaildContent')),
                            leftBtnText: Mojo.utils.locale('common', 'ok'),
                            leftBtnClick: function () {
                                self.close();
                                dlg.close();
                                dlg3.close();
                            },
                            close: function () {
                                self.close();
                                dlg.close();
                            }
                        });
                        dlg3.open(true);
                    });
                },
                rightBtnClick: function () {
                    dlg.close();
                },
                close: function () {
                    self.element().show();
                }
            });
            this.element().hide();
            dlg.open(true);
        },
        _cancelActive: function () {
            var self = this;
            var content = $('<div class="paragraph"></div>').html(Mojo.utils.locale('illustration', 'effort_cancel_activeContent', {
                rm: this.detailData.rm,
                name: this.detailData.name
            }));
            var dlg = new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('illustration', 'effort_cancel_active'),
                content: content,
                leftBtnText: Mojo.utils.locale('common', 'ok'),
                rightBtnText: Mojo.utils.locale('common', 'cancel'),
                leftBtnClick: function () {
                    dlg.hide();
                    self._ajaxAchievementBalaBala('/illustration/achievementSkillDisable', function (result) {
                        var dlg2 = new Mojo.com.CommonDialog('achievementSkillDisableOk', {
                            title: Mojo.utils.locale('illustration', 'effort_cancel_activeOk'),
                            content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('illustration', 'effort_cancel_activeOkContent', {
                                name: self.detailData.name,
                                star: result.data.star
                            })),
                            leftBtnText: Mojo.utils.locale('common', 'ok'),
                            leftBtnClick: function () {
                                self.close();
                                dlg.close();
                                dlg2.close();
                            },
                            close: function () {
                                self.close();
                                dlg.close();
                            }
                        });
                        dlg2.open(true);
                        self._options.refresh();
                    }, function (result) {
                        if (result.errorCode == 10005) {
                            var dlg3 = new Mojo.com.CommonDialog(undefined, {
                                title: Mojo.utils.locale('illustration', 'effort_cancel_activeFaild'),
                                content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('illustration', 'effort_cancel_activeFaildContent')),
                                leftBtnText: Mojo.utils.locale('common', 'go_payment'),
                                leftBtnClick: function () {
                                    Mojo.app.redirect('/mall', {
                                        selected: 4
                                    });
                                },
                                rightBtnText: Mojo.utils.locale('common', 'close'),
                                rightBtnClick: function () {
                                    self.close();
                                    dlg.close();
                                    dlg3.close();
                                },
                                close: function () {
                                    self.close();
                                    dlg.close();
                                }
                            });
                            dlg3.open(true);
                        } else {
                            Mojo.app.toast.show(result.errorMsg);
                        }
                    });
                },
                rightBtnClick: function () {
                    dlg.close();
                },
                close: function () {
                    self.element().show();
                }
            });
            this.element().hide();
            dlg.open(true);
        },
        _get: function () {
            var self = this;
            if (this.rarity_id) {
                Mojo.gap.niudanAnimationPlay(this.rarity_id);
            }
            self._ajaxAchievementBalaBala('/illustration/achievementExchange', function (result) {
                self.close();
                var content = $('<div class="paragraph"></div>').html(Mojo.utils.locale('illustration', 'effort_getOkContent'));
                var itemContent = $('<div class="itemContent"></div>').appendTo(content);
                $.each(result.data, function (i, d) {
                    var itemEle = $('<div class="itemEle"></div>').appendTo(itemContent);
                    itemEle.append($('<img class="entity-icon">').attr({
                        src: d.small_image
                    }));
                    itemEle.append($('<div class="name"></div>').html(d.name));
                    itemEle.append($('<div class="count"></div>').html(d.count));
                });
                var dlg = new Mojo.com.CommonDialog('achievementExchangeOk', {
                    title: Mojo.utils.locale('illustration', 'effort_getOk'),
                    content: content,
                    leftBtnText: Mojo.utils.locale('common', 'ok'),
                    leftBtnClick: function () {
                        dlg.close();
                    },
                    close: function () {
                        self._options.refresh();
                    }
                });
                dlg.open();
            }, function (result) {
                Mojo.app.toast.show(result.errorMsg);
            });
        },
        _ajaxAchievementBalaBala: function (url, callback, callbackErr) {
            var self = this;
            Mojo.ajax(url, {
                id: self._options.id
            }, function (result) {
                if (result.errorCode == 0) {
                    if (callback && callback instanceof Function) {
                        callback(result);
                    }
                } else {
                    if (callbackErr && callbackErr instanceof Function) {
                        callbackErr(result);
                    }
                }
            }, function () {}, {
                showWait: true
            });
        },
        leftBtnDisabledClick: function () {
            var status = this.detailData.status;
            var subType = this._options.subType;
            if (subType == 0) {
                switch ("" + status) {
                case '0':
                    Mojo.app.toast.show(Mojo.utils.locale('illustration', 'effort_notlight'));
                    break;
                case '1':
                    break;
                case '2':
                    break;
                }
            } else if (subType == 1) {
                switch ("" + status) {
                case '0':
                    Mojo.app.toast.show(Mojo.utils.locale('illustration', 'effort_notget'));
                    break;
                case '1':
                    break;
                case '2':
                    break;
                }
            }
        }
    });
    w.Mojo.com.LargeEntity = w.Mojo.com.Entity.extend({
        clsname: function () {
            return "com.LargeEntity";
        },
        init: function (data, options) {
            this._super(undefined, data, options);
            this._entityEffectText = {
                "attack_max": {
                    text: Mojo.utils.locale('largeentity', 'attack'),
                    unit: ""
                },
                "attack_min": {
                    text: Mojo.utils.locale('largeentity', 'attack'),
                    unit: ""
                },
                "defence_max": {
                    text: Mojo.utils.locale('largeentity', 'defence'),
                    unit: ""
                },
                "defence_min": {
                    text: Mojo.utils.locale('largeentity', 'defence'),
                    unit: ""
                },
                "xp_value": {
                    text: Mojo.utils.locale('largeentity', 'effect_xp'),
                    unit: ""
                },
                "xp_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_xp'),
                    unit: "%"
                },
                "rm_value": {
                    text: Mojo.utils.locale('largeentity', 'effect_rm'),
                    unit: ""
                },
                "rm_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_rm'),
                    unit: "%"
                },
                "vm_value": {
                    text: Mojo.utils.locale('largeentity', 'effect_vm'),
                    unit: ""
                },
                "vm_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_vm'),
                    unit: "%"
                },
                "ep_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_ep'),
                    unit: "%"
                },
                "sp_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_sp'),
                    unit: "%"
                },
                "max_attack_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_max_attack_pro'),
                    unit: "%"
                },
                "max_defence_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_max_defence_pro'),
                    unit: "%"
                },
                "attack_max_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_max_attack'),
                    unit: "%"
                },
                "attack_min_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_min_attack'),
                    unit: "%"
                },
                "defence_max_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_max_defence'),
                    unit: "%"
                },
                "defence_min_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_min_defence'),
                    unit: "%"
                }
            };
            this.element().addClass('mojo-com-entity-large');
            this._row1 = $('<div class="row"><div class="picture"></div></div>').appendTo(this.element());
            if (typeof data == 'string') {
                var self = this;
                Mojo.ajax("/entity/detail", {
                    id: data,
                    pid: this._options.pid,
                    eid: this._options.eid,
                    rebirth_count: this._options.rebirthCount,
                }, function (response) {
                    if (response && response.errorCode === 0) {
                        self.data = response.data;
                        self._setPicture();
                        self._refresh();
                    } else {
                        self.data = undefined;
                    }
                    if (self._options.callback instanceof Function) {
                        self._options.callback(self);
                    }
                }, function () {
                    self.data = undefined;
                    if (self._options.callback instanceof Function) {
                        self._options.callback(self);
                    }
                });
            } else if (typeof data == 'object') {
                this._setPicture();
                this._refresh();
                if (this._options.callback instanceof Function) {
                    this._options.callback(this);
                }
            }
        },
        _getEntityEffectText: function () {
            for (var eattr in this._entityEffectText) {
                if (this.data[eattr] && this.data[eattr] > 0) {
                    return this._entityEffectText[eattr].text + this.data[eattr] + this._entityEffectText[eattr].unit;
                }
            }
            return "";
        },
        _setEntityEffectText: function () {
            if (this._options.showEntityEffect) {
                this._skills.append('<div class="paragraph">' + this._getEntityEffectText() + '</div>');
            }
        },
        _setPicture: function () {
            if (this._options.showDescription) {
                this._description = $('<div class="description mojo-com-entity-large--row--description">' + Mojo.utils.locale('ui', 'Introduction') + ':<br>' + this.data.description + '</div>').appendTo(this._row1);
            }
            this._skills = $('<div class="row skills"></div>').hide().appendTo(this.element());
            if (this._options.showSkill) {
                this._skills.show();
            }
            this._row1.find('.picture').append('<img src="' + this.data.large_image + '" class="mojo-com-entity-large--row--img">').append('<div class="border"></div>').append('<div class="name mojo-com-entity-large--row--picture--name">' + this.data.name + '</div>').append('<div class="type"></div>').append('<div class="attributes mojo-com-entity-large--row--picture--attributes"></div>');
            this._row1.find('.picture > .name').addClass('rebirth-' + (this.data.rebirth_sum > 6 ? 6 : this.data.rebirth_sum));
        },
        _addAttributes: function () {
            if (parseInt(this.data.type_id) != 7 && parseInt(this.data.type_id) != 8 && parseInt(this.data.type_id) != 22 && this.data.level > 0) {
                this._row1.find('.attributes').append((this._xpProgress = new Mojo.ui.Progress(undefined, {
                    value: this.data.xp,
                    max: this.data.next_xp,
                    labelTemplate: '',
                    classes: ['mojo-com-entity-large--row--picture--attributes--mojo-ui-progress']
                })).element()).append('<div class="level mojo-com-entity-large--row--picture--attributes--level">' + this.data.level + '</div>');
            }
            this._effects = $('<div class="effects mojo-com-entity-large--row--picture--attributes--effects"></div>').appendTo(this._row1.find('.attributes'));
            this.data.attack_max = parseInt(this.data.attack_max);
            this.data.attack_min = parseInt(this.data.attack_min);
            this.data.defence_max = parseInt(this.data.defence_max);
            this.data.defence_min = parseInt(this.data.defence_min);
            if (Mojo.utils.isWhat(this.data.type_id, "general")) {
                if (this.data.attack_max > 0) {
                    if (this.data.attack_max < this.data.attack_min) this.data.attack_max = this.data.attack_min;
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-attack', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.attack_min + '-' + this.data.attack_max,
                    })).element());
                }
                if (this.data.defence_max > 0) {
                    if (this.data.defence_max < this.data.defence_min) this.data.defence_max = this.data.defence_min;
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-defence', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.defence_min + '-' + this.data.defence_max,
                    })).element());
                }
            } else {
                if (this.data.attack_max > 0) {
                    if (this.data.attack_max < this.data.attack_min) this.data.attack_max = this.data.attack_min;
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-attack', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.attack_min + '-' + this.data.attack_max,
                    })).element());
                }
                if (this.data.defence_max > 0) {
                    if (this.data.defence_max < this.data.defence_min) this.data.defence_max = this.data.defence_min;
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-defence', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.defence_min + '-' + this.data.defence_max,
                    })).element());
                }
                if (this.data.xp_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-xp', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.xp_percent + '%',
                    })).element());
                }
                if (this.data.ep_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-ep', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.ep_percent + '%',
                    })).element());
                }
                if (this.data.sp_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-sp', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.sp_percent + '%',
                    })).element());
                }
                if (this.data.vm_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-vm', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.vm_percent + '%',
                    })).element());
                }
                if (this.data.max_attack_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-max-attack-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.max_attack_percent + '%',
                    })).element());
                }
                if (this.data.max_defence_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-max-defence-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.max_defence_percent + '%',
                    })).element());
                }
                if (this.data.attack_max_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-attack-max-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.attack_max_percent + '%',
                    })).element());
                }
                if (this.data.attack_min_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-attack-min-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.attack_min_percent + '%',
                    })).element());
                }
                if (this.data.defence_max_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-defence-max-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.defence_max_percent + '%',
                    })).element());
                }
                if (this.data.defence_min_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-defence-min-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.defence_min_percent + '%',
                    })).element());
                }
            }
        },
        _refresh: function () {
            if (parseInt(this.data.type_id) === 7 || parseInt(this.data.type_id) === 8 || parseInt(this.data.type_id) === 22) {
                this._row1.find('.picture').addClass('bg-level-other').addClass('mojo-com-entity-large--row--picture');
            } else {
                this._row1.find('.picture').addClass('bg-level-' + (parseInt((this.data.level - 1) / 10) + 1)).addClass('mojo-com-entity-large--row--picture');
            }
            this._row1.find('.picture > .rarity').addClass('star-rarity-' + this.data.rarity_id);
            this._row1.find('.picture > .border').addClass('border-rarity-' + (this.data.rarity_id ? this.data.rarity_id : "other")).addClass("mojo-com-entity-large--row--picture--border");
            if (this.data.group_id_1) {
                this._row1.find('.picture > .type').addClass('type-gp-' + this.data.group_id_1).addClass('type-gp-' + this.data.group_id_1 + '-' + Mojo.app.data.userLanguage).addClass("mojo-com-entity-large--row--picture--type").addClass("mojo-com-entity-large--row--picture--type" + '-' + Mojo.app.data.userLanguage);
            } else {
                var typeid = this.data.type_id;
                if (parseInt(typeid) === 22)
                    typeid = 7;
                this._row1.find('.picture > .type').addClass('type-' + typeid).addClass("mojo-com-entity-large--row--picture--type").addClass("mojo-com-entity-large--row--picture--type" + '-' + Mojo.app.data.userLanguage);
            }
            if (Mojo.utils.isWhat(this.data.type_id, "minis")) {
                var minisFlag = $('<div></div>').addClass("minis-flag").addClass("minis-flag" + '-' + Mojo.app.data.userLanguage).appendTo(this._row1.find(".picture"));
                if (Mojo.utils.isWhat(this.data.entity_type_id, "general")) {
                    minisFlag.addClass('minis-flag-type-gp-' + this.data.entity_group_id).addClass('minis-flag-type-gp-' + this.data.entity_group_id + '-' + Mojo.app.data.userLanguage).show();
                } else {
                    minisFlag.addClass('minis-flag-type-' + this.data.entity_type_id).addClass('minis-flag-type-' + this.data.entity_type_id + '-' + Mojo.app.data.userLanguage).show();
                }
            }
            this._addAttributes();
            if (this._options.showSkill && this.data.skills) {
                var skills = "";
                for (var sid in this.data.skills) {
                    var skill = this.data.skills[sid];
                    skills += '<div class="paragraph">' + skill.description + '</div>';
                }
                this._skills.html(skills);
            }
            if (Mojo.utils.isWhat(this.data.type_id, "mounts") || Mojo.utils.isWhat(this.data.type_id, "treasure")) {
                this._setEntityEffectText();
            }
            this.refresh();
        },
        refresh: function () {
            if (typeof this.data == 'object') {
                if (this.data.is_max_level == 1) {
                    this._xpProgress.value(0);
                }
            }
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                pid: "",
                eid: "",
                rebirthCount: 0,
                callback: undefined,
                showSkill: false,
                showDescription: true,
                showEntityEffect: true
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.Marquee = w.Mojo.Object.extend({
        clsname: function () {
            return "com.Marquee";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this._handle = undefined;
            this.element().addClass("mojo-com-marquee");
            this._refresh();
        },
        _refresh: function () {
            var self = this;
            this.element().css({
                position: "relative",
                left: this._options.left,
                top: this._options.top,
                width: this._options.width,
                height: this._options.height,
                overflow: "hidden"
            });
            if (Mojo.utils.isNone(this._data)) {
                return;
            }
            this._data.push(this._data[0]);
            this._marqueeCount = ((Array.isArray(this._data) ? this._data.length : 0));
            this._marqueeLoadCount = 0;
            this._marqueeIndex = 0;
            this.element().children().remove();
            $('<div></div>').addClass("mojo-com-marquee-slider").css({
                "height": 0,
                "margin-top": 0
            }).appendTo(this.element());
            $.each(this._data, function (i, d) {
                var marqueeElement = $('<div class="marquee-element">\
                    <div class="marquee-element-image">\
                        <img class="marquee-element-image-url" />\
                    </div>\
                </div>').attr({
                    id: "marquee-element-" + i
                });
                var img = d.image;
                if (img && Mojo.app.data.userLanguage == 'zh_tw') {
                    var a = img.indexOf('.');
                    img = img.substring(0, a) + '-zh_tw' + img.substring(a);
                }
                marqueeElement.find(".marquee-element-image > .marquee-element-image-url").bind("load", function () {
                    self._marqueeLoadCount += 1;
                    if (self._marqueeLoadCount >= self._marqueeCount) {
                        self._start();
                    }
                }).attr({
                    src: img
                });
                marqueeElement.appendTo(self.element());
            });
        },
        _start: function () {
            var self = this;
            clearTimeout(this._handle);
            this._handle = setTimeout(function () {
                self.element().find(".mojo-com-marquee-slider").css({
                    height: -1 * (self._options.height * (self._marqueeIndex + 1))
                });
                self._marqueeIndex += 1;
                self.element().find(".mojo-com-marquee-slider").animate({
                    "margin-top": -1 * self._options.height * self._marqueeIndex
                }, undefined, function () {
                    if (self._marqueeIndex >= self._marqueeCount - 1) {
                        self._marqueeIndex = 0;
                        self.element().find(".mojo-com-marquee-slider").css({
                            "margin-top": 0
                        });
                    }
                    self._start();
                });
            }, this._options.speed);
        },
        _getDefaultOptions: function () {
            var self = this;
            return {
                speed: 3000,
                left: 0,
                top: 0,
                width: self.getR("width"),
                height: self.getR("height")
            };
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.SignIn = w.Mojo.ui.Dialog.extend({
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-signin');
            this._initContent();
            this._addButtons();
        },
        _initContent: function () {
            var self = this;
            var _awards = $('<div class="awards"></div>');
            _awards.appendTo(this._content);
            for (var i = 0; i < self._data.awards.length; i++) {
                var _card = $('<div class="card image"></div>');
                _awards.append(_card);
                var se = this._setCard(self._data.awards[i], _card, self._data.awards[i].entity_id);
                if (self._data.awards[i].status == 0) {
                    _card.addClass('signin-shade');
                } else if (self._data.awards[i].status == 2) {
                    _card.append('<div class="got-signin-flag"> </div>');
                }
                var acount = self._data.awards[i].count;
                if (self._data.awards[i].type == 'niudan')
                    acount = '';
                _card.append('<div class="award-count">' + acount + '</div>');
                if (self._data.awards[i].type == 'niudan') {
                    if (parseInt(self._data.awards[i].rarity_id + "") == 3)
                        _card.append('<div class="rarity-3"></div>');
                    if (parseInt(self._data.awards[i].rarity_id + "") == 2)
                        _card.append('<div class="rarity-2"></div>');
                }
                var text = self._data.awards[i].index;
                _card.append('<div class="day-num">' + text + '</div>');
                if (self._data.awards[i].status == 0) {
                    $('<div class="shade"></div>').data(self._data.awards[i]).bind('click', function () {
                        self._smallEntityClick($(this).data, undefined, $(this).data('entity_id'));
                    }).appendTo(_card);
                }
            }
            var signinMsg = '';
            if (self._data.counter == self._data.key_index) {
                signinMsg = Mojo.utils.locale('signin', 'signin_msg01', {
                    days: self._data.key_index,
                    name: self._data.key_name
                });
            } else {
                signinMsg = Mojo.utils.locale('signin', 'signin_msg02', {
                    days: (self._data.key_index - self._data.counter + 1),
                    name: self._data.key_name
                });
            }
            $('<div class = "tip">' + signinMsg + '</div>').appendTo(this._content);
        },
        _addButtons: function () {
            var self = this;
            var btn = this._signBtn = new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('signin', 'signin'),
                click: function () {
                    Mojo.ajax("/player/checkIn", {}, function (result) {
                        if (result.errorCode == 0) {
                            self._hasSignIn = true;
                            var data = result.data;
                            var type = data.award.type;
                            var afterSignFunc = function () {
                                self._options.callback(data.player);
                                self._title.html(Mojo.utils.locale('signin', 'signin-gift-title'));
                                self._content.find('.tip').remove();
                                self._content.find('.awards').remove();
                                if (data.award.is_double == true) {
                                    self.element().addClass('mojo-com-double');
                                    $('<div class = "tip">' + Mojo.utils.locale('signin', 'signin-sucess-msg-double') + '</div>').appendTo(self._content);
                                } else {
                                    $('<div class = "tip">' + Mojo.utils.locale('signin', 'signin-sucess-msg') + '</div>').appendTo(self._content);
                                }
                                if (data.award.type == 'niudan') {
                                    if (parseInt(data.award.rarity_id + "") == 3)
                                        $('<div class = "tip">' + Mojo.utils.locale('signin', 'rarity_notice') + '</div>').appendTo(self._content);
                                    if (parseInt(data.award.rarity_id + "") == 2)
                                        $('<div class = "tip">' + Mojo.utils.locale('signin', 'rarity_notice2') + '</div>').appendTo(self._content);
                                }
                                var _award = $('<div class="awards"></div>');
                                _award.appendTo(self._content);
                                var _card = $('<div class="card-gift image"></div>');
                                _card.appendTo(_award);
                                self._setCard(data.award, _card, data.award.id);
                                if (data.award.count > 1)
                                    _card.append('<div class="count">' + data.award.count + '</div>');
                                _award.append('<div class="name">' + data.award.name + '</div>');
                                btn.text(Mojo.utils.locale('common', 'close'));
                                btn.click(function () {
                                    self.close();
                                });
                                Mojo.utils.center(self.element());
                                if (self._isSign) {
                                    self._entityDlg.close();
                                }
                            };
                            if (type == "niudan") {
                                var numcounter = parseInt(self._data.counter + "");
                                Mojo.gap.niudanAnimationPlay(self._data.awards[numcounter - 1].rarity_id);
                                setTimeout(afterSignFunc, 1000);
                            } else {
                                afterSignFunc();
                            }
                        } else {
                            self.close();
                            var errDlg = new Mojo.com.CommonDialog(undefined, {
                                title: Mojo.utils.locale('signin', 'signin fail'),
                                content: $('<div class="paragraph"></div>').html(result.errorMsg).css('text-align', 'center')
                            });
                            (new Mojo.ui.Button(undefined, {
                                text: Mojo.utils.locale('common', 'close'),
                                click: function () {
                                    errDlg.close();
                                }
                            })).element().appendTo(errDlg._footer);
                            errDlg.open();
                        }
                    }, function () {}, {
                        showWait: true
                    });
                },
            });
            this._footer.append(btn.element());
        },
        _setCard: function (item, _car, _id) {
            var self = this;
            var se = new Mojo.com.SmallEntity(item, {
                callback: function (card) {
                    _car.append(card.element());
                },
                click: function () {
                    self._smallEntityClick(item, _car, _id);
                }
            });
            return se;
        },
        _smallEntityClick: function (item, _car, _id) {
            var self = this;
            if (self._hasSignIn) return;
            Mojo.ajax("/entity/detail", {
                eid: _id
            }, function (response) {
                if (response.errorCode == 0) {
                    var entitydetailDialog = self._entityDlg = new Mojo.ui.Dialog(undefined, {
                        title: Mojo.utils.locale('props', 'props_detail_title'),
                        content: (new Mojo.com.LargeEntity(response.data)).element(),
                        close: function () {
                            self.show();
                        },
                    });
                    if (item.status == 1) {
                        (new Mojo.ui.Button(undefined, {
                            text: Mojo.utils.locale('signin', 'signin'),
                            click: function () {
                                self._isSign = true;
                                self._signBtn.element().click();
                            }
                        })).element().appendTo(entitydetailDialog._footer);
                    }
                    (new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('common', 'close'),
                        special: "button-big-red",
                        click: function () {
                            entitydetailDialog.close();
                        }
                    })).element().addClass("use-props").appendTo(entitydetailDialog._footer);
                    entitydetailDialog.open(true);
                    self.hide();
                }
            });
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale("signin", "signin-title"),
                canClose: false,
                callback: $.noop,
            });
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.Announcement = w.Mojo.Object.extend({
        clsname: function () {
            return "com.Announcement";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass("mojo-com-announcement box-inner");
            if (this._data.isTitle == true) {
                this.element().addClass("mojo-com-announcement-title");
                this._contentTitleDiv = $('<div class="annuncement-content-title"></div>').appendTo(this.element());
                this.refreshContentTitle();
            } else {
                this.element().addClass('mojo-com-announcement-' + this._data.id);
                this.element().addClass('mojo-com-announcement-content');
                this._titleDiv = $('<div></div>').addClass("annuncement-title").appendTo(this.element());
                this._contentDiv = $('<div></div>').addClass("annuncement-content").appendTo(this.element());
                this._btnDiv = $('<div></div>').addClass("annuncement-buttons").appendTo(this.element());
                this.refresh();
            }
            this._addTag();
            this._addStyle();
        },
        refreshContentTitle: function (data) {
            if (data === undefined) {
                data = this._data;
            }
            this.setContentTitle(data);
            this.bindContentTitleEvent();
        },
        setContentTitle: function (data) {
            this._contentTitleDiv.html(data.title);
        },
        _addTag: function (data) {
            if (data === undefined) {
                data = this._data;
            }
            var tag = data.tag;
            if (tag) {
                this.element().append($('<div class="tag"></div>').html(tag));
            }
        },
        _addStyle: function (data) {
            if (data === undefined) {
                data = this._data;
            }
            var style = data.style;
            if (style) {
                this.element().addClass(style);
            }
        },
        bindContentTitleEvent: function () {
            var self = this;
            var parent = this.element();
            parent.click(function (e) {
                self._options._scrollTo('.mojo-com-announcement-' + self._data.id);
            });
        },
        refresh: function (data) {
            if (data === undefined) {
                data = this._data;
            }
            this.setTitle(data);
            this.setContent(data);
            this.setButtons(data);
        },
        setTitle: function (data) {
            this._titleDiv.html(data.title);
        },
        setContent: function (data) {
            this._contentDiv.html(data.content);
        },
        setImportant: function (data) {
            if (data.is_top == 1) {
                this.element().addClass("important");
            } else {
                this.element().removeClass("important");
            }
        },
        setButtons: function (data) {
            if (Mojo.utils.isNone(data.btn_text) == false && Mojo.utils.isNone(data.btn_url) == false) {
                var url = data.btn_url.replace("mojo://", "");
                var str = url.substring(url.indexOf('?') + 1, url.length).split('&');
                url = url.substring(0, url.indexOf('?'));
                var obj = {};
                var j;
                for (var i = 0; str[i] != undefined; i++) {
                    j = str[i];
                    obj[j.substring(0, j.indexOf('=')).toLowerCase().replace(/(^\s*)|(\s*$)/g, "")] = j.substring(j.indexOf('=') + 1, j.length).replace(/(^\s*)|(\s*$)/g, "");
                }
                new Mojo.ui.Button(undefined, {
                    text: data.btn_text,
                    click: function () {
                        Mojo.app.redirect("/" + url, obj);
                    }
                }).element().appendTo(this._btnDiv);
            }
        }
    });
})(window, jQuery);
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.AnnouncementDlg = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.AnnouncementDlg";
        },
        init: function (options) {
            this._super("sys-announcement-dlg", options);
            this.element().addClass('mojo-com-announcementdlg');
            this._initContent();
        },
        open: function (force) {
            this._super(force);
            this._panel.resize();
        },
        _initContent: function () {
            var self = this;
            this._panel = new Mojo.ui.ListPanel('announcement-listpanel', {
                scrollable: true,
                showMore: false,
                pageSize: 20,
                loadFunc: function (count, pagesize, params) {
                    if (Mojo.utils.isNone(self._options.announcement) == false) {
                        var announcementTitle = [];
                        for (var i = 0; i < self._options.announcement.length; i++) {
                            var ele = self._options.announcement[i];
                            var eleNew = {
                                isTitle: true
                            };
                            announcementTitle.push(jQuery.extend(true, eleNew, ele));
                        }
                        setTimeout(function () {
                            self._panel.appendData(announcementTitle);
                            self._panel.appendData(self._options.announcement);
                        }, 100);
                    } else {
                        Mojo.ajax("/announcement", {}, function (response) {
                            if (response && response.data && response.errorCode === 0) {
                                var announcementTitle = [];
                                for (var i = 0; i < response.data.length; i++) {
                                    var ele = response.data[i];
                                    var eleNew = {
                                        isTitle: true
                                    };
                                    announcementTitle.push(jQuery.extend(true, eleNew, ele));
                                }
                                self._panel.appendData(announcementTitle);
                                self._panel.appendData(response.data);
                            } else {
                                self._panel.appendData(null);
                            }
                        }, function () {
                            self._panel.appendData(null);
                        });
                    }
                },
                drawFunc: function (data) {
                    return (new Mojo.com.Announcement(data, {
                        _scrollTo: function (id) {
                            var contentTop = self.element().find(id).position().top;
                            self._panel._scroll.scroll(0, contentTop);
                        }
                    }));
                }
            });
            this._panel.element().appendTo(this._content);
            this._addFooter();
        },
        _addFooter: function () {
            var self = this;
            new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('home', 'back to top'),
                click: function () {
                    self._panel._scroll.scroll(0, 0);
                }
            }).element().appendTo(this._footer);
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale("home", "announcement_title"),
                announcement: undefined
            });
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.WeiboPublishDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.WeiboPublishDialog";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-weibopublishdlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            var text = self._options.hintText;
            var lengthLimit = self._options.maxlength;
            if (self._options.appendix != '') {
                lengthLimit = lengthLimit - parseInt(self._options.appendix.length) - 1;
            }
            var lengthDisplay = lengthLimit;
            if (self._options.defaultText != '') {
                text = self._options.defaultText;
                lengthDisplay = lengthDisplay - parseInt(self._options.defaultText.length);
            }
            var paragraph = $("<div class='paragraph'></div>").appendTo(this._content);
            self._bonus = $('<div class="bonus"></div>').html(Mojo.utils.locale('weibo', 'weibo bonus')).appendTo(paragraph);
            self._tip = $('<div class="words-tip"></div>').html(lengthDisplay).appendTo(paragraph);
            self._border = $('<div class="border"></div>').appendTo(paragraph);
            self._content = $('<form name="form" method="post" action=""><textarea name="textarea" maxlength="' + lengthLimit + '" id="message-content" cols="45" rows="5">' + text + '</textarea></form>').appendTo(self._border);
            self._textarea = this._content.find('textarea').focus(function () {
                if (this.value == self._options.hintText) {
                    this.value = '';
                }
            });
            self._textarea.bind("input propertychange", function () {
                var maxLength = $(this).attr('maxlength');
                var v = $(this).val().length;
                if (v <= maxLength) {
                    self._tip.html(maxLength - v);
                    return true;
                } else {
                    $(this).val($(this).val().substring(0, maxLength));
                    return false;
                }
            });
        },
        _addHandleButtons: function () {
            var self = this;
            self._sendBtn = new Mojo.ui.Button(undefined, {
                special: 'button-big-red',
                text: Mojo.utils.locale('ui', 'Send'),
                click: function () {
                    self._sendBtn.disable(true);
                    var message = $("#message-content").val();
                    if (message == self._options.hintText) {
                        message = '';
                    }
                    if (self._options.appendix != '') {
                        message = message + ' ' + self._options.appendix;
                    }
                    if (Mojo.utils.trim(message) == '') {
                        Mojo.app.toast.show(Mojo.utils.locale('weibo', 'Please input weibo content'));
                        self._sendBtn.disable(false);
                        return;
                    }
                    Mojo.app.weibo.statusesUpdate({
                        access_token: self._data.access_token,
                        status: message,
                        errorFunc: function () {
                            Mojo.app.toast.show(Mojo.utils.locale('weibo', 'Send Success'));
                            self.close();
                            Mojo.ajax('/player/weiboPublish', {}, function (result) {
                                Mojo.app.refreshCurrentProfile();
                                self.afterPublish();
                            });
                        },
                        successFunc: function () {
                            Mojo.app.toast.show(Mojo.utils.locale('weibo', 'Send Success'));
                            self.close();
                            Mojo.ajax('/player/weiboPublish', {}, function (result) {
                                Mojo.app.refreshCurrentProfile();
                                self.afterPublish();
                            });
                        },
                        failedFunc: function () {
                            self.close();
                            Mojo.ajax('/player/weiboPublish', {}, function (result) {
                                self.afterPublish();
                            });
                        },
                    });
                },
            });
            this._footer.append(self._sendBtn.element());
            this._footer.append((new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                    self.afterPublish();
                },
            })).element());
        },
        afterPublish: function () {},
        close: function () {
            this._super();
            window.scrollTo(0);
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('weibo', 'Send weibo'),
                maxlength: 140,
                hintText: Mojo.utils.locale('weibo', 'Please input weibo content'),
                defaultText: '',
                appendix: '',
                zIndex: 1100,
            });
        },
    });
})(window, jQuery);
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FacebookFeedDialog = w.Mojo.ui.Dialog.extend({
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-facebookfeeddlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            var text = self._options.hintText;
            if (self._options.defaultText != '') {
                text = self._options.defaultText;
            }
            self._bonus = $('<div class="bonus"></div>').html(Mojo.utils.locale('facebook', 'weibo bonus')).appendTo(this._content);
            self._border = $('<div class="border"></div>').appendTo(this._content);
            self._content = $('<form name="form" method="post" action=""><textarea name="textarea" ' + '" id="message-content" cols="45" rows="5">' + text + '</textarea></form>').appendTo(self._border);
            self._textarea = this._content.find('textarea').focus(function () {
                if (this.value == self._options.hintText) {
                    this.value = '';
                }
            });
        },
        _addHandleButtons: function () {
            var self = this;
            self._sendBtn = new Mojo.ui.Button(undefined, {
                special: 'button-big-red',
                text: Mojo.utils.locale('ui', 'Send'),
                click: function () {
                    self._sendBtn.disable(true);
                    var message = $("#message-content").val();
                    if (message == self._options.hintText) {
                        message = '';
                    }
                    var linkUrl = "";
                    if (self._options.appendix != '') {
                        linkUrl = self._options.appendix;
                    }
                    if (Mojo.utils.trim(message) == '') {
                        Mojo.app.toast.show(Mojo.utils.locale('facebook', 'Please input weibo content'));
                        self._sendBtn.disable(false);
                        return;
                    }
                    var params = {
                        caption: self._options.defaultTitle,
                        name: self._options.defaultTitle,
                        picture: self._getImgurl(),
                        link: linkUrl,
                        description: self._options.defaultText,
                        access_token: self._data.access_token,
                        actions: [{
                            name: 'go to sanguo',
                            link: linkUrl
                        }],
                    };
                    FB.api('/me/feed', 'post', params, function (response) {
                        if (response && response.id) {
                            Mojo.ajax('/player/weiboPublish', {}, function (result) {
                                Mojo.app.refreshCurrentProfile();
                            });
                        } else {}
                        self.close();
                    });
                },
            });
            this._footer.append(self._sendBtn.element());
            this._footer.append((new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                    self.afterPublish();
                },
            })).element());
        },
        afterPublish: function () {},
        _getImgurl: function () {
            var loc = window.location.href;
            var a = loc.indexOf('/mojo');
            var b = loc.substring(0, a);
            var url = b + '/mojo/resources/classic/mobile/image/ui/icon.jpg';
            if (Mojo.app.data.userLanguage == 'zh_tw') {
                url = b + '/mojo/resources/classic/mobile/image/ui/icon-tw.jpg';
            }
            return url;
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('facebook', 'Send weibo'),
                hintText: Mojo.utils.locale('facebook', 'Please input feed content'),
                defaultTitle: '',
                defaultText: '',
                appendix: '',
                zIndex: 1100,
            });
        },
        debugable: function () {
            return Mojo.utils.debug.vars.com.weibopublishdlg;
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.WeiboExpireDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.WeiboExpireDialog";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-weiboexpiredlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            self._message = $('<div class="paragraph"></div>').html(Mojo.utils.locale('weibo', 'expire message')).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button('login-btn', {
                special: 'button-big-red',
                text: Mojo.utils.locale('weibo', 'go login'),
                click: function () {
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                    self.close();
                },
            })).element());
            this._footer.append((new Mojo.ui.Button('close-btn', {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('weibo', 'Your weibo account has expired!'),
                zIndex: 1100,
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.WeiboBindDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.WeiboBindDialog";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-weibobinddlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            self._message = $('<div class="paragraph"></div>').html(Mojo.utils.locale('weibo', 'bind message')).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button('bind-btn', {
                special: 'button-big-red',
                text: Mojo.utils.locale('weibo', 'go bind'),
                click: function () {
                    self._redirectToSettings = 1;
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                    self.close();
                },
            })).element());
            this._footer.append((new Mojo.ui.Button('close-btn', {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _close: function () {
            if (this._redirectToSettings == 1) {
                delete this._redirectToSettings;
                return false;
            }
            if (this._options.level == 120) {
                this._showActiveBarrackDialog();
            }
        },
        _showActiveBarrackDialog: function () {
            var dlg = new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('common', 'barrack_active_dlg_title'),
                content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'barrack_active_dlg_content')),
                leftBtnText: Mojo.utils.locale('common', 'go_look'),
                leftBtnClick: function () {
                    Mojo.app.redirect('/package', {
                        selected: -1
                    });
                    dlg.close();
                },
                rightBtnText: Mojo.utils.locale('common', 'close'),
                rightBtnClick: function () {
                    dlg.close();
                }
            });
            dlg.open();
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('weibo', 'bind title'),
                zIndex: 1100,
                close: function () {
                    self._close();
                }
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FacebookExpireDialog = w.Mojo.ui.Dialog.extend({
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-facebookexpiredlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            this._message = $('<div class="paragraph"></div>').html(self.locale('expire message')).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button('login-btn', {
                special: 'button-big-red',
                text: self.locale('go login'),
                click: function () {
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                    self.close();
                },
            })).element());
            this._footer.append((new Mojo.ui.Button('close-btn', {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                title: self.locale('Your weibo account has expired!'),
                zIndex: 1100,
            });
        },
        localeCat: function () {
            return 'facebook';
        },
        debugable: function () {
            return Mojo.utils.debug.vars.com.facebookexpiredlg;
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FacebookBindDialog = w.Mojo.ui.Dialog.extend({
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-facebookbinddlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            this._message = $('<div class="paragraph"></div>').html(self.locale('bind message')).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button('bind-btn', {
                special: 'button-big-red',
                text: self.locale('go bind'),
                click: function () {
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                    self.close();
                },
            })).element());
            this._footer.append((new Mojo.ui.Button('close-btn', {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                title: self.locale('bind title'),
                zIndex: 1100,
            });
        },
        localeCat: function () {
            return 'facebook';
        },
        debugable: function () {
            return Mojo.utils.debug.vars.com.facebookbinddlg;
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.PlatformButton = w.Mojo.ui.Button.extend({
        init: function (event, options) {
            this._super(undefined, options);
            this._event = event;
            this.element().addClass('mojo-com-platformbtn');
            this._initData();
            this._addContent();
        },
        _initData: function () {
            var self = this;
            if (self._event != undefined && self._event != null) {
                for (var index in self._event) {
                    if (self._event[index].name == 'weibo.create' || self._event[index].name == 'facebook.create') {
                        self._options.access_token = self._event[index].data.access_token;
                        self._options.defaultText = self._event[index].data.content;
                        self._options.expire = self._event[index].expire;
                        self._options.appendix = self._event[index].data.download_url;
                        self._options.defaultTitle = self._event[index].data.title;
                    }
                }
            }
        },
        _addContent: function () {
            var self = this;
            self._platform = Mojo.app.getPlatform();
            if (Mojo.app.getPlatform() == 'facebook')
                self.element().find('.icon').addClass('fb');
            var txt = (self._platform == 'sina' ? Mojo.utils.locale('weibo', 'Send weibo') : Mojo.utils.locale('facebook', 'Send weibo'));
            self.text(txt);
            var weibocontent = self._options.defaultText || self._options.content;
            var weibotitle = self._options.defaultTitle || self._options.title;
            var appendixtxt = self._options.appendix || self._options.download_url;
            self.click(function () {
                self._options.btnClick();
                Mojo.ajax('/player/weiboToken', {}, function (response) {
                    if (response.errorCode == 0) {
                        var access_token = '';
                        if (response.data) {
                            access_token = response.data.token;
                        }
                        if (access_token != null && access_token != '') {
                            if (self._options.expire == 1) {
                                if (self._platform == 'facebook') {
                                    (new Mojo.com.FacebookExpireDialog()).open(true);
                                } else {
                                    (new Mojo.com.WeiboExpireDialog()).open(true);
                                }
                            } else {
                                if (self._platform == 'facebook') {
                                    (new Mojo.com.FacebookFeedDialog({
                                        access_token: access_token
                                    }, {
                                        defaultText: weibocontent,
                                        appendix: appendixtxt,
                                        defaultTitle: weibotitle
                                    })).open(true);
                                } else {
                                    (new Mojo.com.WeiboPublishDialog({
                                        access_token: access_token
                                    }, {
                                        defaultText: weibocontent,
                                        appendix: appendixtxt
                                    })).open(true);
                                }
                            }
                        } else {
                            if (self._platform == 'facebook') {
                                (new Mojo.com.FacebookBindDialog()).open(true);
                            } else {
                                (new Mojo.com.WeiboBindDialog({
                                    showGoBindDialog: self._options.showGoBindDialog,
                                    level: self._options.level
                                })).open(true);
                            }
                        }
                    }
                    self._options.levelUpBtnClick();
                }, function () {}, {
                    showWait: true
                });
            });
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                text: '',
                special: 'button-big-red',
                btnClick: $.noop,
                levelUpBtnClick: $.noop,
                icon: Mojo.app.getPlatform() == 'facebook',
                textWrap: Mojo.app.getPlatform() == 'facebook'
            });
        },
        debugable: function () {
            return Mojo.utils.debug.vars.com.platformbtn;
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.BaseSlotList = w.Mojo.Object.extend({
        clsname: function () {
            return "com.BaseSlotList";
        },
        init: function (options) {
            this._super('com-baseslot-list', options);
            this._hasLoaded = false;
            this._baseSlots = {};
            this._lastSelected = undefined;
            this._scrollDistX = 0;
            this._max_army = 1;
            this.slotCount = 0;
            var self = this;
            var params = (this._options.isMine ? {} : {
                pid: this._options.friendId
            });
            this._list = new Mojo.ui.ListPanel(undefined, {
                pageSize: 20,
                showMore: false,
                loadFunc: function (start, count, packageId) {
                    Mojo.ajax('/embed/simple', params, function (result) {
                        self._max_army = result.data.max_army;
                        if (result.errorCode == 0) {
                            self.slotCount = Mojo.app.baseSlotsCount = result.data.base_slots.length;
                            Mojo.app.simpleData = result.data;
                            if (result.data.base_slots.length < 4) {
                                for (; result.data.base_slots.length < 4;) {
                                    result.data.base_slots.push(undefined);
                                }
                            } else if (self._options.isMine === true && self._options.showUnlock === true) {
                                result.data.base_slots.push(undefined);
                            }
                            self._list.element().width(result.data.base_slots.length * self._options.unitWidth);
                            self._list.appendData(result.data.base_slots);
                            self._scroll.element().addClass('canswitch');
                            if (self.changeBtn != undefined) {
                                self.changeBtn.element().remove();
                            }
                            self._addPackageSwitchBtn(result.data.army_id, result.data.player_level < result.data.permit_change_leve);
                            self._scroll.refresh();
                        } else {
                            self._list.appendData(null);
                        }
                    }, function () {
                        self._list.appendData(null);
                    });
                },
                drawFunc: function (data) {
                    return self._getBaseSlotEntity(data);
                },
                onLoaded: function (listpanel) {
                    if (Mojo.utils.getSomething("selected")) {
                        if (Mojo.utils.getSomething("selected") == -1) {
                            self.selector(Mojo.app.baseSlotsCount - 1);
                        } else {
                            self.selector(parseInt(Mojo.utils.getSomething("selected")));
                        }
                    }
                    if (self._hasLoaded === false && self._options.onLoaded instanceof Function) {
                        self._options.onLoaded(self);
                    }
                    self._hasLoaded = true;
                }
            });
            this._scroll = new Mojo.ui.Scroll(undefined, this._list, {
                direction: 1,
                classes: ['all-small-card-border'],
                showArrow: true,
                step: self._options.unitWidth,
            });
            this.element().append(this._scroll.element());
        },
        _addPackageSwitchBtn: function (current, disabled) {
            var self = this;
            if (self._options.isMine && self._options.showSwitch) {
                self.changeBtn = new Mojo.ui.Button(undefined, {
                    text: self.getL('package', 'package_switch'),
                    special: 'changePackage-btn',
                    disabled: disabled,
                    disableClick: function () {
                        Mojo.app.toast.show(Mojo.utils.locale('package', 'cannot_swicth_package'));
                    },
                    click: function () {
                        self._showPackageSwitchDialog(current);
                    }
                });
                self.changeBtn.element().appendTo(this.element());
            }
        },
        _showPackageSwitchDialog: function (current) {
            current = parseInt(current);
            var self = this;
            var content = $('<div class="paragraph"></div>');
            var pName = self.getL('package', 'package_num' + current);
            $('<div class="package_tip"></div>').html(self.getL('package', 'package_using', {
                packageName: pName
            })).appendTo(content);
            for (var i = 1; i <= self._max_army; i++) {
                new Mojo.ui.Button(undefined, {
                    text: self.getL('package', 'package_num' + i),
                    special: current == i ? "current" : "",
                    click: (function (i, c) {
                        return function () {
                            if (i != c) {
                                self._switchPackage(i);
                            } else {
                                Mojo.app.toast.show(Mojo.utils.locale('package', 'has_mount'));
                            }
                        };
                    })(i, current)
                }).element().appendTo(content);
            }
            self.dlg = new Mojo.ui.Dialog(undefined, {
                classes: ["change-package"],
                title: self.getL('package', 'package_switch1'),
                content: content
            });
            self.dlg.open();
        },
        _switchPackage: function (index) {
            var self = this;
            Mojo.ajax('/embed/ChangeArmy', {
                army_id: index
            }, function (response) {
                if (response.errorCode == 0) {
                    self.reLoad();
                    self.dlg.close();
                    self._options.onPackageChange();
                } else {
                    self.dlg.close();
                    Mojo.app.toast.show(response.errorMsg);
                }
            }, function () {}, {
                showWait: true
            });
        },
        reLoad: function (index) {
            this._list.element().find(".mojo-com-baseslotlist-element").remove();
            this._list._hasLoaded = false;
            this._hasLoaded = false;
            this._baseSlots = {};
            this._lastSelected = undefined;
            this._scrollDistX = 0;
            this._list._load();
            if (this._options.onReload instanceof Function) {
                this._options.onReload(this);
            }
        },
        refreshAll: function (data) {
            if (Array.isArray(data.list)) {
                var self = this;
                $.each(data.list, function (i, d) {
                    var baseSlotId = "base_slot_" + d.player_base_slot_id;
                    var slotObj = self._baseSlots[baseSlotId];
                    if (slotObj instanceof Object) {
                        var selected = "";
                        if (slotObj.element().find(".card-border").hasClass("selected") || slotObj.element().find(".card-slot").hasClass("selected")) {
                            selected = "selected";
                        }
                        slotObj.element().children().remove();
                        if (d.player_entity_id == null || d.player_entity_id == "") {
                            slotObj.element().append('<div class="card-slot ' + selected + '"></div>');
                            slotObj.element().removeClass('mojo-com-light');
                        } else {
                            slotObj.element().append('<img src="' + d.small_image + '">');
                            slotObj.element().append('<div class="card-border ' + selected + '"></div>');
                        }
                        if (selected == "selected") {
                            slotObj.element().find('img').addClass('img-class');
                        }
                    }
                });
            }
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(this._super(), {
                unitWidth: self.getR("unitWidth"),
                onLoaded: undefined,
                onSelect: undefined,
                showUnlock: false,
                isMine: true,
                friendId: undefined,
                onPackageChange: $.noop,
                showSwitch: false,
                onReload: undefined
            });
        },
        _getBaseSlotEntity: function (data) {
            var obj = new Mojo.Object(undefined, {
                classes: ['mojo-com-baseslotlist-element', 'image'],
            });
            if (data == undefined) {
                obj.element().append('<div class="locked"></div>');
            } else {
                if (data.is_barracks == 1) {
                    data.player_base_slot_id = data.id;
                    data.player_entity_id = data.id;
                }
                var baseSlotId = "base_slot_" + data.player_base_slot_id;
                this._baseSlots[baseSlotId] = obj;
                if (data.player_entity_id == null || data.player_entity_id == "") {
                    obj.element().append('<div class="card-slot"></div>');
                    if (this._options.isMine) {
                        Mojo.light.showLight('empty-card-border|1');
                    }
                } else {
                    obj.element().append('<img src="' + data.small_image + '">');
                    obj.element().append('<div class="card-border"></div>');
                }
            }
            var self = this;
            if (this._lastSelected === undefined) {
                this._lastSelected = obj.element();
                this._lastSelected.find(".card-border").addClass("selected");
            }
            obj.element().click(function () {
                if (data == undefined) {} else if (data.player_entity_id == null) {
                    obj.element().removeClass('mojo-com-light');
                } else {}
                self._lastSelected.find(".card-border").removeClass("selected");
                self._lastSelected.find(".card-slot").removeClass("selected");
                self._lastSelected.find("img").removeClass("img-class");
                obj.element().find(".card-border").addClass("selected");
                obj.element().find(".card-slot").addClass("selected");
                obj.element().find("img").addClass("img-class");
                self._lastSelected = obj.element();
                if (self._options.onSelect instanceof Function) {
                    self._options.onSelect(self, obj.element().index(), data);
                }
            });
            return obj;
        },
        selector: function (current) {
            var self = this;
            if (Mojo.utils.isNone(self._lastSelected) == false) {
                self._lastSelected.find(".card-border").removeClass("selected");
                self._lastSelected.find(".card-slot").removeClass("selected");
                self._lastSelected.find("img").removeClass("img-class");
            }
            if (this._options.isMine) {
                Mojo.light.showLight('empty-card-border|1');
            }
            $.each(this.element().find(".mojo-com-baseslotlist-element"), function (i, e) {
                if (current == i) {
                    $(e).find(".card-border").addClass("selected");
                    $(e).find(".card-slot").addClass("selected");
                    $(e).find("img").addClass("img-class");
                    self._lastSelected = $(e);
                    if (self._lastSelected.find('.card-slot').hasClass('mojo-com-light')) {
                        self._lastSelected.find('.card-slot').removeClass('mojo-com-light');
                    }
                    var listleft = self._scroll.scrollerLeft();
                    if (self._options.unitWidth > 0) {
                        var r = i - Math.abs(listleft / self._options.unitWidth);
                        if (r > 2 || r < 0) {
                            var l = ((i - 1) * self._options.unitWidth);
                            if (self._scrollDistX != l) {
                                self._scroll.scrollTo(l, 0);
                                self._scrollDistX = l;
                            }
                        }
                    }
                }
            });
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.ForceCreateDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.ForceCreateDialog";
        },
        _player: undefined,
        init: function (data, options) {
            this._player = data;
            this._super(undefined, options);
            this._paragraph = $("<div class='paragraph'></div>").appendTo(this._content);
            this._addContent();
        },
        title: function (titletext) {
            if (this._options.noTitle == false) {
                this.element().find('.title').html(titletext);
            }
        },
        _contentCantJoin: function () {
            var self = this;
            self.title(Mojo.utils.locale('common', 'tips'));
            this._paragraph.html(Mojo.utils.locale('home', 'force_join_no', {
                level: 20
            }));
            new Mojo.ui.Button("close-btn", {
                text: Mojo.utils.locale('ui', 'Close'),
                click: function () {
                    self.close();
                }
            }).element().appendTo(self._footer);
        },
        _contentCanJoin: function () {
            var self = this;
            self.title(Mojo.utils.locale('common', 'tips'));
            this._paragraph.html(Mojo.utils.locale('home', 'force_join_ok', {
                level: 50
            }));
            new Mojo.ui.Button("join-btn", {
                text: Mojo.utils.locale('home', 'join_force'),
                special: 'button-big-red',
                click: function () {
                    Mojo.app.redirect('/force/list', {
                        type: 'createForce'
                    });
                }
            }).element().appendTo(self._footer);
            new Mojo.ui.Button("close-btn", {
                text: Mojo.utils.locale('ui', 'Close'),
                click: function () {
                    self.close();
                }
            }).element().appendTo(self._footer);
        },
        _contentCanCreate: function () {
            this.element().addClass('mojo-com-forcecreatedlg');
            var self = this;
            self.title(Mojo.utils.locale('common', 'tips'));
            this._paragraph.html(Mojo.utils.locale('home', 'force_create_ok'));
            new Mojo.ui.Button("create-btn", {
                text: Mojo.utils.locale('home', 'create_force'),
                special: 'button-big-red',
                click: function () {
                    self._createForce();
                }
            }).element().appendTo(self._footer);
            new Mojo.ui.Button("join-btn", {
                text: Mojo.utils.locale('home', 'join_force'),
                click: function () {
                    Mojo.app.redirect('/force/list', {
                        type: 'createForce'
                    });
                }
            }).element().appendTo(self._footer);
        },
        _docreate: function (isPay) {
            var self = this;
            self._setValidate('');
            if (!self._isNameValid()) {
                return;
            }
            Mojo.ajax('/force/create', {
                force_name: $('#force-name').val(),
                type: isPay ? 1 : 2
            }, function (response) {
                if (response.errorCode == 0) {
                    if (isPay) {
                        Mojo.track.onEvent('24_101');
                    } else {
                        Mojo.track.onEvent('24_202');
                    }
                    self.close();
                    new Mojo.com.ForceCreateSuccDialog(response, {}).open();
                } else {
                    if (response.errorCode == 10005) {
                        self.close();
                        var failDialog = new Mojo.ui.Dialog(undefined, {
                            title: Mojo.utils.locale('home', "force_create_failed"),
                            content: $('<div class="tip">' + response.errorMsg + '</div>'),
                            zIndex: 1101
                        });
                        new Mojo.ui.Button(undefined, {
                            text: Mojo.utils.locale('common', 'go_payment'),
                            special: "button-big-red",
                            click: function () {
                                Mojo.app.redirect('/mall', {
                                    selected: 4
                                });
                            }
                        }).element().appendTo(failDialog._footer);
                        new Mojo.ui.Button(undefined, {
                            text: Mojo.utils.locale('common', 'close'),
                            click: function () {
                                failDialog.close();
                            }
                        }).element().appendTo(failDialog._footer);
                        failDialog.open();
                    } else if (response.errorCode == 60011) {
                        self.hide();
                        var failDialog = new Mojo.ui.Dialog(undefined, {
                            title: Mojo.utils.locale('home', "rebirth_not_enouph_title"),
                            content: $('<div class="tip">' + Mojo.utils.locale('home', 'rebirth_not_enouph') + '</div>'),
                            zIndex: 1101
                        });
                        new Mojo.ui.Button(undefined, {
                            text: Mojo.utils.locale('home', 'Fuben'),
                            special: "button-big-red",
                            click: function () {
                                Mojo.app.redirect('/fb', {}, 'event', '04_047');
                            }
                        }).element().appendTo(failDialog._footer);
                        new Mojo.ui.Button(undefined, {
                            text: Mojo.utils.locale('common', 'back'),
                            click: function () {
                                failDialog.close();
                                self.show();
                            }
                        }).element().appendTo(failDialog._footer);
                        failDialog.open(true);
                    } else {
                        self._setValidate(response.errorMsg);
                    }
                }
            }, function () {});
        },
        _createForce: function () {
            var self = this;
            self.title(Mojo.utils.locale('home', 'create_force'));
            self._clear();
            $("<div class='create-tip'></div>").html(Mojo.utils.locale('home', 'create_tip')).appendTo(self._paragraph);
            var input = $("<input type='text' id='force-name' maxlength='5'/>").val(Mojo.utils.locale('home', 'force_name_max')).appendTo(self._paragraph);
            input.focus(function () {
                if ($(this).val() == Mojo.utils.locale('home', 'force_name_max')) {
                    $(this).val('');
                }
            });
            $('<div class="force-validate"></div>').appendTo(self._paragraph);
            var price = $('<div class="price"></div>').appendTo(self._paragraph).html(Mojo.utils.locale('common', 'price'));
            new Mojo.ui.Label(undefined, {
                classes: ['rm'],
                text: 399
            }).element().appendTo(self._paragraph);
            var tip = $('<div class="tip"></div>').appendTo(self._paragraph).html(Mojo.utils.locale('home', 'create_use_rebirth') + "<br>" + Mojo.utils.locale('home', 'rebirth_now_have', {
                num: this._player.rp
            }));
            new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('home', 'create_pay'),
                special: 'button-big-red',
                click: function () {
                    self._docreate(true);
                }
            }).element().appendTo(this._footer);
            new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('home', 'create_free'),
                click: function () {
                    self._docreate(false);
                }
            }).element().appendTo(this._footer);
            Mojo.utils.center(this.element());
        },
        _setValidate: function (content) {
            var e = this.element().find('.force-validate');
            if (e) {
                e.html(content);
            }
        },
        _isNameValid: function () {
            if ($('#force-name')) {
                var val = $('#force-name').val();
                if (Mojo.utils.isNone(val.trim())) {
                    this._setValidate(Mojo.utils.locale('home', 'force_name_empty'));
                    return false;
                }
                if (val == Mojo.utils.locale('home', 'force_name_max')) {
                    this._setValidate(Mojo.utils.locale('home', 'force_name_empty1'));
                    return false;
                }
                return true;
            }
            return false;
        },
        _clear: function () {
            this._paragraph.empty();
            this._footer.empty();
        },
        _addContent: function () {
            var self = this;
            if (this._player.status == 2) {
                this._contentCantJoin();
            } else if (this._player.status == 3) {
                this._contentCanJoin();
            } else if (this._player.status == 4) {
                this._contentCanCreate();
            }
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button(undefined, {
                special: 'button-big-red',
                text: Mojo.utils.locale('common', 'ok'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('common', 'tips'),
                handle: $.noop,
                zIndex: 1100
            });
        },
    });
})(window, jQuery);;;
(function (w, $) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.ForceCreateSuccDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.ForceCreateSuccDialog";
        },
        init: function (response, options) {
            this._super(undefined, options);
            this._force = response.data;
            this._event = response.event;
            this._paragraph = $("<div class='paragraph'></div>").appendTo(this._content);
            this._addContent();
            this._addButtons();
            this.closeFlag = true;
        },
        _addContent: function () {
            this._paragraph.html(Mojo.utils.locale('home', 'create_succ_tip', {
                name: this._force.name
            }));
        },
        _addButtons: function () {
            var self = this;
            var platformBtn = new Mojo.com.PlatformButton(self._event, {
                btnClick: function () {
                    this.closeFlag = false;
                    self.close();
                }
            });
            this._footer.append(platformBtn.element());
            new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    Mojo.app.redirect("/force");
                }
            }).element().appendTo(this._footer);
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('home', 'create_succ'),
                handle: $.noop,
                close: function () {
                    if (this.closeFlag)
                        Mojo.app.redirect("/force");
                },
                zIndex: 1102
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.MonthTicketDialog = Mojo.ui.Dialog.extend({
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass("mojo-com-monthticket-dlg");
            this.refresh();
            this.addButtons();
        },
        isNormalAward: function () {
            var is = false;
            for (var index in this._data.awards) {
                var award = this._data.awards[index];
                if (award.normal_award) {
                    is = true;
                    break;
                }
            }
            return is;
        },
        refresh: function () {
            this.refreshTip();
            this.refreshAwards();
        },
        refreshTip: function () {
            var self = this;
            var tip = undefined;
            if (this.isNormalAward()) {
                tip = (Mojo.utils.locale('month_ticket', 'normal_month_ticket_award_tip', {
                    '__default__': '主公~您领取了今日{{:recharge_name}}的奖励，获得了：',
                    'recharge_name': self._data.recharge_name
                }));
            } else {
                tip = (Mojo.utils.locale('month_ticket', 'ext_month_ticket_award_tip', {
                    '__default__': '恭喜主公您获得了：'
                }));
            }
            if (this._tip) {
                this._tip.html(tip);
            } else {
                this._tip = $('<div class="tip"></div>').html(tip).appendTo(this._content);
            }
        },
        refreshAwards: function () {
            var self = this;
            if (this._awards) {
                this._awards.empty();
            } else {
                this._awards = $('<div class="awards"></div>').appendTo(this._content);
                for (var index in this._data.awards) {
                    var award = this._data.awards[index];
                    var awardDiv = $('<div class="award"></div>').appendTo(this._awards);
                    var card = $('<div class="card image"></div>').appendTo(awardDiv);
                    (new Mojo.com.SmallEntity(award, {
                        callback: function (that) {
                            that.element().appendTo(card);
                            $('<div class="count"></div>').html(award.count).appendTo(card);
                        }
                    }));
                    $('<div class="name"></div>').html(award.entity_name).appendTo(awardDiv);
                }
            }
        },
        addButtons: function () {
            var self = this;
            (new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                }
            })).element().appendTo(this._footer);
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale("month_ticket", "month_ticket_award_title", {
                    '__default__': '{{:recharge_name}}奖励',
                    'recharge_name': self._data.recharge_name
                }),
                close: function () {
                    Mojo.app.redirect('/mall', {
                        selected: 2
                    });
                }
            });
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.page = w.Mojo.page || {};
    w.Mojo.page.Home = w.Mojo.Page.extend({
        clsname: function () {
            return "page.Home";
        },
        init: function () {
            var self = this;
            Mojo.utils.saveWindowHeight();
            Mojo.app.saveStorage('lightQuickBtns', null);
            if (Mojo.utils.getSomething("needLoginStatus") == 'yes')
                Mojo.app.data.needLoginStatus = true;
            else
                Mojo.app.data.needLoginStatus = false;
            this._super('page-home', {
                baseProfile: true,
                classes: ['home']
            });
            Mojo.gap.highlightMenuItem(-1);
            var weiboRedirect = Mojo.utils.compareVer(Mojo.app.clientVersion, '1.9.1') > -1;
            if (weiboRedirect)
                Mojo.gap.closebindsinaweibo();
            setTimeout(function () {
                self._addBtnLocks();
            });
            if (Mojo.utils.getSomething("isNewPlayer") == 'yes') {
                Mojo.track.onEvent('02_040');
                Mojo.gap.tapjoyReport("newplayer");
                Mojo.utils.showDiaochan(Mojo.utils.locale('common', 'diaochan_new_player'), function () {
                    self._quickButtonsLight();
                });
            } else {
                setTimeout(function () {
                    self._quickButtonsLight();
                });
            }
            var activityTotal = $('<div class = "activity-total"></div>').appendTo(this.element());
            this.border = $('<div class = "activity-center-img-border"></div>').appendTo(activityTotal);
            this.activity_img = $('<div class="activity-center-img"></div>').appendTo(this.border);
            this.activity_img.click(function () {
                Mojo.app.redirect('/activity', {
                    selected: 0
                });
            });
            setTimeout(function () {
                Mojo.ajax('/gameactivity/nav', {}, function (result) {
                    var flag = false;
                    if (result.errorCode == 0) {
                        $.each(result.data.sub_types, function (i, t) {
                            if (t.needNotice == 1) {
                                flag = true;
                            }
                        });
                        if (flag && self._mark_activity_center_can_not_with_notice != true) {
                            self.border.addClass('mojo-com-light');
                        }
                    }
                }, function () {});
            }, 1500);
            this.announcement_img = $('<div class="announcement-center-img"></div>').appendTo(activityTotal);
            this.announcement_img.click(function () {
                self._updateAnnouncementIcon();
                new Mojo.com.AnnouncementDlg().open();
            });
            this._baseSlotList = (new Mojo.com.BaseSlotList({
                classes: ['general-list-bg-border'],
                onSelect: function (that, index, data) {
                    if (data == undefined) {
                        Mojo.app.redirect('/package', {
                            selected: index
                        }, 'event', '04_032');
                    } else if (data.player_entity_id == null) {
                        Mojo.app.redirect('/package', {
                            selected: index
                        }, 'event', '04_033');
                    } else {
                        Mojo.app.redirect('/package', {
                            selected: index
                        }, 'event', '04_031');
                    }
                },
                onLoaded: function (com) {
                    self._quickButtonLight('first-card-border');
                    self._quickButtonLight('first-card-border-intensify');
                }
            }));
            this._baseSlotList.element().appendTo(this.element());
            this._quickButtons = $('<div class="everyday-do"></div>').appendTo(this.element());
            this._addQuickButtons();
            this._circleButtons = $('<div class="circle-buttons task"></div>').appendTo(this.element());
            this._addCircleButtons();
            setTimeout(function () {
                Mojo.gap.bindUser(Mojo.cache.get('userId'));
                Mojo.ajax('/mall/isNew', {}, function (result) {
                    if (result.errorCode == 0) {
                        if (result.data == 1) {
                            Mojo.gap.showMallIcon();
                        } else {
                            Mojo.gap.hideMallIcon();
                        }
                    } else {}
                }, function () {});
            }, 1000);
            this.rebinding();
        },
        _updateAnnouncementIcon: function (data) {
            if (this.newIcon != undefined) {
                this.newIcon.remove();
            }
            if (data == undefined) {
                return;
            }
            if (data.is_annouce_new == 1) {
                this.newIcon = $('<div class="is_new"><div class="icon"></div></div>');
                this.announcement_img.append(this.newIcon);
            }
        },
        _enterForce: function () {
            Mojo.ajax('/force/index', {}, function (response) {
                var force = response.data;
                if (force.status != 1) {
                    new Mojo.com.ForceCreateDialog(force).open();
                } else {
                    Mojo.app.redirect('/force');
                }
            }, function () {});
        },
        _addQuickButtons: function () {
            var self = this;
            var level = self.baseProfile._data.level;
            var interval = window.setInterval(function () {
                level = self.baseProfile._data.level;
                if (level == undefined) {
                    return false;
                }
                clearInterval(interval);
                var btns = [{
                    id: 'btn-task',
                    text: 'Do Task'
                }, {
                    id: 'btn-entity-battle',
                    text: 'Entity Battle'
                }, {
                    id: 'btn-battle',
                    text: 'Battle'
                }, {
                    id: 'btn-force',
                    text: 'Force',
                    isNew: true
                }, {
                    id: 'btn-fuben',
                    text: 'Fuben'
                }, {
                    id: 'btn-battleground',
                    text: 'Battleground'
                }];
                if (level < 20) {
                    btns[3].isLock = true;
                }
                if (level < 10) {
                    btns[4].isLock = true;
                }
                if (level < 5) {
                    btns[1].isLock = true;
                    Mojo.gap.lockRob(1);
                } else {
                    Mojo.gap.lockRob(0);
                }
                if (level < 4) {
                    btns[2].isLock = true;
                    Mojo.gap.lockBattle(1);
                } else {
                    Mojo.gap.lockBattle(0);
                }
                if (level < 15) {
                    btns[5].isLock = true;
                }
                $.each(btns, function (i, b) {
                    var _btn = new Mojo.ui.Button(b.id, {
                        click: function () {
                            self._onClickQuickBtn(b);
                        },
                        classes: b.isNew === true ? ['is_new'] : [],
                        text: self.locale(b.text),
                        icon: true,
                        textWrap: true,
                    });
                    if (b.isLock === true) {
                        _btn.element().find('.icon').addClass('mojo-com-locked');
                    } else if (b.id == 'btn-entity-battle' && parseFloat(self.baseProfile._data.treasure_ready) > 0) {
                        _btn.element().find('.icon').addClass('mojo-com-rob-num');
                        _btn.element().find('.icon').html(self.baseProfile._data.treasure_ready);
                    }
                    self._quickButtons.append(_btn.element());
                });
            }, 100);
        },
        _onClickQuickBtn: function (btn, e) {
            var id = btn.id;
            var self = this;
            var btn = $("#" + id + " .icon");
            if (btn.hasClass('mojo-com-locked')) {
                Mojo.utils.showLockedToast(id);
                return false;
            }
            if ('btn-task' === id) {
                Mojo.app.redirect('/mission', {}, 'event', '04_041');
            } else if ('btn-entity-embed' === id) {
                Mojo.app.redirect('/package', {}, 'event', '玩家点击“排列阵容”按钮');
            } else if ('btn-entity-battle' === id) {
                Mojo.app.redirect('/rob', {}, 'event', '04_042');
            } else if ('btn-battle' === id) {
                Mojo.app.redirect('/battle', {}, 'event', '04_043');
            } else if ('btn-friend' === id) {
                Mojo.app.redirect('/friend');
            } else if ('btn-entity-purchase' === id) {
                Mojo.app.redirect('/mall', {
                    selected: 1
                }, 'event', '04_046');
            } else if ('btn-battleground' === id) {
                Mojo.app.redirect('/bg');
            } else if ('btn-force' === id) {
                self._enterForce();
            } else if ('btn-fuben' === id) {
                Mojo.app.redirect('/fb', {}, 'event', '04_047');
            }
        },
        _addCircleButtons: function () {
            var self = this;
            var btns = [{
                id: 'btn-ranking',
                text: 'Rank',
                cl: 'task-rank'
            }, {
                id: 'btn-entity-browse',
                text: 'Entity Browse',
                cl: 'task-card'
            }, {
                id: 'btn-illustration',
                text: 'Illustration',
                cl: 'task-pic'
            }, {
                id: 'btn-messages',
                text: 'Messages',
                cl: 'task-news'
            }, {
                id: 'btn-chat',
                text: 'Chat',
                cl: 'task-chat'
            }, {
                id: 'btn-intensify',
                text: 'Intensify',
                cl: 'task-intensify'
            }, {
                id: 'btn-unrebirth',
                text: 'Unrebirth',
                cl: 'task-unrebirth'
            }, {
                id: 'btn-friend',
                text: 'Friend',
                cl: 'task-friend'
            }, {
                id: 'btn-settings',
                text: 'Settings',
                cl: 'task-set'
            }, ];
            var inner = $('<div class="inner"></div>');
            $.each(btns, function (i, b) {
                inner.append((new Mojo.ui.Button(b.id, {
                    special: b.cl,
                    click: self._onClickCircleBtn,
                    text: self.locale(b.text),
                    textWrap: true,
                    icon: true,
                }).element()));
            });
            self.scroll = new Mojo.ui.Scroll(undefined, inner, {
                showArrow: true,
                direction: 1,
                step: self.getR('unitWidth')
            });
            self.scroll.element().appendTo(self._circleButtons);
            self.scroll.refresh();
        },
        _onClickCircleBtn: function (btn, e) {
            var id = btn.id();
            var btn = $("#" + id + " .icon");
            if (btn.hasClass('mojo-com-locked')) {
                Mojo.utils.showLockedToast(id);
                return false;
            }
            if ('btn-messages' === id) {
                Mojo.app.redirect('/message', {}, 'event', '04_054');
            } else if ('btn-intensify' === id) {
                Mojo.app.redirect('/intensify', {}, 'event', '04_044');
            } else if ('btn-entity-browse' === id) {
                Mojo.app.redirect('/entity', {}, 'event', '04_051');
            } else if ('btn-intensify' === id) {
                Mojo.app.redirect('/intensify');
            } else if ('btn-props' === id) {
                Mojo.app.redirect('/mall', {
                    selected: 2
                });
            } else if ('btn-statistics' === id) {
                Mojo.app.redirect('/statistics', {}, 'event', '04_055');
            } else if ('btn-chat' === id) {
                Mojo.app.redirect('/chat', {
                    history: 0
                }, 'event', '19_000');
            } else if ('btn-settings' === id) {
                Mojo.app.redirect('/settings', {}, 'event', '04_056');
            } else if ('btn-illustration' === id) {
                Mojo.app.redirect('/illustration', {}, 'event', '04_052');
            } else if ('btn-friend' === id) {
                Mojo.app.redirect('/friend', {}, 'event', '04_053');
            } else if ('btn-ranking' === id) {
                Mojo.app.redirect('/rank');
            } else if ('btn-unrebirth' === id) {
                Mojo.app.redirect('/unrebirth');
            }
        },
        _bindNavBtnEvent: function () {
            var self = this;
            var hasTouch = 'ontouchstart' in window;
            var START_EV = hasTouch ? 'touchstart' : 'mousedown';
            var END_EV = hasTouch ? 'touchend' : 'mouseup';
            self.scroll.element().bind(START_EV, function () {
                self.scroll._arrowUp.element().fadeOut(200);
                self.scroll._arrowDown.element().fadeOut(200);
            });
            var clear = function () {
                if (!self.scroll._arrowUp.element().hasClass('mojo-ui-button-disabled')) {
                    self.scroll._arrowUp.element().fadeIn(200);
                }
                if (!self.scroll._arrowDown.element().hasClass('mojo-ui-button-disabled')) {
                    self.scroll._arrowDown.element().fadeIn(200);
                }
            };
            self.scroll.element().bind(END_EV, clear);
        },
        _addBtnLocks: function () {
            var self = this;
            var lockedBtnIds = [];
            var level = self.baseProfile._data.level;
            var interval = window.setInterval(function () {
                level = self.baseProfile._data.level;
                if (level == undefined) {
                    return false;
                }
                clearInterval(interval);
                if (level < 5) {
                    lockedBtnIds.push('btn-chat');
                }
                if (level < 3) {
                    lockedBtnIds.push('btn-ranking');
                }
                if (level < 2) {
                    lockedBtnIds.push('btn-entity-browse');
                }
                if (level < 1) {
                    lockedBtnIds.push('btn-task');
                    lockedBtnIds.push('btn-intensify');
                    lockedBtnIds.push('btn-illustration');
                    lockedBtnIds.push('btn-friend');
                    lockedBtnIds.push('btn-messages');
                    lockedBtnIds.push('btn-settings');
                }
                for (var i = 0; i < lockedBtnIds.length; i++) {
                    var id = lockedBtnIds[i];
                    var btn = $("#" + id + " .icon");
                    btn.addClass('mojo-com-locked');
                }
            }, 100);
        },
        _quickButtonsLight: function () {
            var self = this;
            Mojo.app.saveStorage('lightQuickBtns', null);
            var level = self.baseProfile._data.level;
            var interval = window.setInterval(function () {
                level = self.baseProfile._data.level;
                if (level == undefined) {
                    return false;
                }
                clearInterval(interval);
                if (level < 25) {
                    Mojo.ajax('/player/guide', {}, function (result) {
                        if (result.errorCode == 0) {
                            if (!result.data) {
                                return;
                            }
                            var light = result.data.light;
                            Mojo.app.saveStorage('lightQuickBtns', light);
                            self._quickButtonLight(light);
                            if (result.data.wuhu) {
                                self._newPlayerGift(result);
                            }
                            Mojo.light.showLight('empty-card-border|1');
                        }
                    });
                } else {
                    Mojo.app.saveStorage('lightQuickBtns', 'empty-card-border');
                    Mojo.light.showLight('empty-card-border|1');
                }
            }, 100);
        },
        _quickButtonLight: function (lightName) {
            if (Mojo.app.getStorage('lightQuickBtns') != lightName) {
                return;
            }
            switch (lightName) {
            case 'first-card-border':
            case 'btn-equipment':
                $('.mojo-com-baseslotlist-element').first().addClass('mojo-com-light');
                break;
            case 'btn-task':
                $('#btn-task').addClass('mojo-com-light');
                break;
            case 'first-card-border-intensify':
                $('.mojo-com-baseslotlist-element .card-border').first().addClass('mojo-com-light');
                break;
            case 'btn-battle':
                $('#btn-battle').addClass('mojo-com-light');
                break;
            case 'btn-entity-battle':
                $('#btn-entity-battle').addClass('mojo-com-light');
                break;
            case 'btn-fuben':
                $('#btn-fuben').addClass('mojo-com-light');
                break;
            case 'btn-force':
                $('#btn-force').addClass('mojo-com-light');
                break;
            case 'gameactivity':
                this.border.addClass('mojo-com-light');
                break;
            case 'btn-bg':
                $('#btn-battleground').addClass('mojo-com-light');
                break;
            }
            if (lightName != 'gameactivity') {
                this._mark_activity_center_can_not_with_notice = true;
                this.border.removeClass('mojo-com-light');
            }
        },
        localeCat: function () {
            return 'home';
        },
        loginremind: function (args) {
            var hasAward = args ? args.hasAward : undefined;
            var self = this;
            Mojo.ajax('/player/loginInfoRemind', {}, function (result) {
                if (result.errorCode == 0 && result.data) {
                    var nickname = result.data.nickname,
                        username = result.data.username,
                        weibo = result.data.weibo,
                        usertype = result.data.userType,
                        level = result.data.level,
                        weibobindingcd = Mojo.utils.formatSecTime(result.data.weiboBindingCD),
                        emailbindingcd = Mojo.utils.formatSecTime(result.data.emailBindingCD),
                        bindingremind = result.data.bindingRemind,
                        isWeiboFollowing = result.data.isWeiboFollowing,
                        isFirstWeibo = result.data.isFirstWeibo,
                        effectiveEvent = result.data.effectiveEvent,
                        bindingEmail = result.data.bindingEmail,
                        remainingtime = result.data.remainingTime,
                        isyahooemail = result.data.isYahooEmail,
                        remind_barracks = result.data.remind_barracks;
                    if (remind_barracks == 1) {
                        self._showActiveBarrackDialog();
                    }
                    if (usertype == 1 && nickname && username) {
                        if (Mojo.app.getStorage('login_method') != 'sina' && Mojo.app.getStorage('login_method') != 'facebook') {
                            var content = $("<div class='paragraph word-break'></div>");
                            $("<div class='logininfo'></div>").html(self.getL('home', 'login_info')).appendTo(content);
                            $("<div class='acc'></div>").html(self.getL('home', 'login_acc') + "<span>" + username + "</span>").appendTo(content);
                            $("<div class='nick'></div>").html(self.getL('home', 'login_nick') + "<span>" + nickname + "</span>").appendTo(content);
                            if (Mojo.app.getStorage('single_server') != 'true') {}
                            var btn = new Mojo.ui.Button(undefined, {
                                text: '',
                                classes: ['choose-button'],
                                special: 'combo',
                                click: function () {
                                    if (btn.element().hasClass("combo-selected-class")) {
                                        btn.element().removeClass("combo-selected-class");
                                        self.sign = false;
                                    } else {
                                        btn.element().addClass('combo-selected-class');
                                        self.sign = true;
                                    }
                                }
                            });
                            btn.element().appendTo(content);
                            $("<div class='neverremind'></div>").html(self.getL('home', 'neven_remind')).appendTo(content);
                            new Mojo.com.CommonDialog(undefined, {
                                classes: ['mojo-logininfo-dlg'],
                                title: self.getL('home', 'login_title'),
                                content: content,
                                leftBtnText: self.getL('ui', 'Close'),
                                leftBtnClick: function (that) {
                                    that.close();
                                },
                                close: function () {
                                    if (self.sign) {
                                        Mojo.ajax('/player/cancelLoginRemind', {}, function (result) {});
                                    }
                                }
                            }).open();
                        }
                    }
                    if (effectiveEvent) self._bindSuccessPrompt(effectiveEvent, bindingEmail, isWeiboFollowing, isFirstWeibo, weibo, nickname);
                    if (emailbindingcd > 0 && weibobindingcd > 0) {
                        if (emailbindingcd > weibobindingcd) {
                            Mojo.app.toast.show(self.getL('home', 'binding prompt', {
                                "date": weibobindingcd
                            }));
                        }
                    } else if (emailbindingcd > 0) {
                        Mojo.app.toast.show(self.getL('home', 'binding email prompt', {
                            "date": emailbindingcd
                        }));
                    } else if (weibobindingcd > 0) {
                        Mojo.app.toast.show(self.getL('home', 'binding weibo prompt', {
                            "date": weibobindingcd
                        }));
                    }
                    if (hasAward != null && usertype == '2' && level >= 20) {
                        var dlg = new Mojo.com.CommonDialog(undefined, {
                            title: Mojo.utils.locale('home', 'helpful hints'),
                            content: $('<div class="paragraph word-break"></div>').html(Mojo.utils.locale('common', 'bind_tip3')),
                            leftBtnText: Mojo.utils.locale('common', 'bind email'),
                            rightBtnText: Mojo.utils.locale('common', 'close'),
                            leftBtnClick: function () {
                                dlg.close();
                                Mojo.app.redirect('/settings', {
                                    selected: 3
                                });
                            },
                            rightBtnClick: function () {
                                dlg.close();
                            }
                        });
                        dlg.open();
                    }
                    if (usertype == '8' || usertype == '9' || usertype == '12' || usertype == '13') {
                        var dlgcontent = $('<div class="paragraph word-break"></div>');
                        var dlgtitle = '';
                        var leftBtnText = undefined;
                        var leftBtnClick = undefined;
                        var rightBtnText = undefined;
                        var rightBtnClick = undefined;
                        var canClose = true;
                        var dlgtype = 0;
                        if (usertype == '8' || (usertype == '9' && result.data.userType9OnlyUseWeibo == true)) {
                            dlgtype = 1;
                            canClose = false;
                        } else if ((usertype == '12' || usertype == '13' || (usertype == '9' && result.data.userType9OnlyUseWeibo != true)) && result.data.weiboInvalidNotice == true) {
                            dlgtype = 2;
                        }
                        if (dlgtype != 0) {
                            if (dlgtype == 1) {
                                dlgtitle = Mojo.utils.locale('home', 'weibo_login_notice_title1');
                                dlgcontent.html(Mojo.utils.locale('home', 'weibo_login_notice1'));
                                leftBtnText = Mojo.utils.locale('home', 'bind email');
                                leftBtnClick = function () {
                                    Mojo.app.redirect('/settings', {
                                        selected: 3
                                    });
                                };
                            } else if (dlgtype == 2) {
                                dlgtitle = Mojo.utils.locale('home', 'weibo_login_notice_title2');
                                dlgcontent.html(Mojo.utils.locale('home', 'weibo_login_notice2'));
                                leftBtnText = Mojo.utils.locale('common', 'ok');
                                leftBtnClick = function () {
                                    dlg.close();
                                };
                                rightBtnText = Mojo.utils.locale('home', 'dont_border_me_again');
                                rightBtnClick = function () {
                                    Mojo.ajax('/player/cancelWeiboInvalidNotice', {}, function (result) {});
                                    dlg.close();
                                };
                            }
                            var dlg = new Mojo.com.CommonDialog(undefined, {
                                title: dlgtitle,
                                canClose: canClose,
                                content: dlgcontent,
                                leftBtnText: leftBtnText,
                                rightBtnText: rightBtnText,
                                leftBtnClick: leftBtnClick,
                                rightBtnClick: rightBtnClick
                            });
                            dlg.open();
                        }
                    }
                    var guid = Mojo.cache.get('guid');
                    if (!Mojo.app.getStorage('is_old_bind_prompt' + guid) && '' + bindingremind == '1') {
                        Mojo.app.saveStorage("is_old_bind_prompt" + guid, true);
                        self._oldAccountPrompt();
                    }
                    if (!Mojo.app.getStorage('is_yahoo_email' + guid) && isyahooemail == '1') {
                        Mojo.app.saveStorage("is_yahoo_email" + guid, true);
                        self._yahooPrompt();
                    }
                }
                Mojo.app.data.needLoginStatus = false;
                self.baseProfile.sync();
            }, function () {
                Mojo.app.data.needLoginStatus = false;
                self.baseProfile.sync();
            });
        },
        load: function () {
            this._super();
            $('#btn-chat').append('<div class="count" style="display:none;"></div>');
            $('#btn-messages').append('<div class="count" style="display:none;"></div>');
            $('#btn-ranking').append('<div class="count" style="display:none;"></div>');
            var self = this;
            Mojo.ajax('/message', {
                start: 0,
                count: 0,
                type: "all"
            }, function (result) {
                if (result.errorCode == 0) {
                    setTimeout(function () {
                        self._renderChatCount(result.data.unread.chat);
                        self._renderMsgCount(result.data.unread.system + result.data.unread.friend + result.data.unread.battle);
                        self._renderRankingCount(result.data.unread.award_count);
                        self._renderBGMsgCount(result.data.unread.bg);
                    });
                }
            });
            var needLoginStatus = Mojo.utils.getSomething("needLoginStatus");
            if (needLoginStatus == 'yes') {
                setTimeout(function () {
                    Mojo.gap.bindPlayerIdToDevice(Mojo.cache.get('userId'));
                }, 1500);
                this.checkLoginGift(true);
            }
        },
        _showActiveBarrackDialog: function () {
            var dlg = new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('common', 'barrack_active_dlg_title'),
                content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'barrack_active_dlg_content')),
                leftBtnText: Mojo.utils.locale('common', 'go_look'),
                leftBtnClick: function () {
                    Mojo.app.redirect('/package', {
                        selected: -1
                    });
                    dlg.close();
                },
                rightBtnText: Mojo.utils.locale('common', 'close'),
                rightBtnClick: function () {
                    dlg.close();
                }
            });
            dlg.open();
        },
        checkLoginGift: function (isFromUrl) {
            if (true === Mojo.app.__checkingLoginGift) {
                return;
            }
            var self = this;
            Mojo.app.__checkingLoginGift = true;
            Mojo.ajax('/player/loginstatus', {}, function (result) {
                if (result.errorCode == 0 && result.data.check_in != null) {
                    Mojo.track.onEvent('03_010');
                    var signIn = new Mojo.com.SignIn(result.data.check_in, {
                        callback: function (player) {
                            self.baseProfile.data(player);
                            if (result && result.data && result.data.month_ticket && result.data.month_ticket.awards) {
                                (new Mojo.com.MonthTicketDialog(result.data.month_ticket.awards, {
                                    close: $.noop
                                })).open();
                                if (result.data.month_ticket.player) {
                                    self.baseProfile.data(result.data.month_ticket.player);
                                }
                            }
                            if (result && result.data && result.data.month_ticket_valid_tip) {
                                var monthTicketTipDialog = new Mojo.ui.Dialog("month-ticket-tip", {
                                    title: Mojo.utils.locale('home', 'warm_tip', {
                                        '__default__': '温馨提示'
                                    }),
                                    content: $('<div class="tip"></div>').html(result.data.month_ticket_valid_tip)
                                });
                                (new Mojo.ui.Button(undefined, {
                                    special: "button-big-red",
                                    text: Mojo.utils.locale('home', 'go_buy_month_ticket', {
                                        '__default__': '去续费'
                                    }),
                                    click: function () {
                                        Mojo.app.redirect('/mall?selected=2');
                                    }
                                })).element().appendTo(monthTicketTipDialog._footer);
                                (new Mojo.ui.Button(undefined, {
                                    text: Mojo.utils.locale('common', 'close'),
                                    click: function () {
                                        monthTicketTipDialog.close();
                                    }
                                })).element().appendTo(monthTicketTipDialog._footer);
                                monthTicketTipDialog.open();
                            }
                        },
                        close: function () {
                            if (Mojo.utils.isNone(result.data.announcement) == false) {
                                new Mojo.com.AnnouncementDlg({
                                    "announcement": result.data.announcement
                                }).open();
                            }
                            if (Mojo.app.isNd) {
                                Mojo.app.data.needLoginStatus = false;
                                self.baseProfile.sync();
                                return;
                            }
                            self.loginremind({
                                hasAward: result.data.check_in
                            });
                        },
                    });
                    setTimeout(function () {
                        signIn.open();
                    }, 300);
                } else if (result && result.data && result.data.month_ticket && result.data.month_ticket.awards) {
                    (new Mojo.com.MonthTicketDialog(result.data.month_ticket.awards, {
                        close: function () {
                            if (Mojo.utils.isNone(result.data.announcement) == false) {
                                new Mojo.com.AnnouncementDlg({
                                    "announcement": result.data.announcement
                                }).open();
                            }
                            if (Mojo.app.isNd) {
                                Mojo.app.data.needLoginStatus = false;
                                self.baseProfile.sync();
                                return;
                            }
                            self.loginremind();
                        }
                    })).open();
                    if (result.data.month_ticket.player) {
                        self.baseProfile.data(result.data.month_ticket.player);
                    }
                } else if (true === isFromUrl && result.errorCode == 0 && Mojo.utils.isNone(result.data.announcement) == false) {
                    new Mojo.com.AnnouncementDlg({
                        "announcement": result.data.announcement
                    }).open();
                    if (Mojo.app.isNd) {
                        Mojo.app.data.needLoginStatus = false;
                        self.baseProfile.sync();
                        return;
                    }
                    self.loginremind();
                } else if (true === isFromUrl) {
                    if (Mojo.app.isNd) {
                        Mojo.app.data.needLoginStatus = false;
                        self.baseProfile.sync();
                        return;
                    }
                    self.loginremind();
                }
                if (result && result.data && result.data.five_star_award) {
                    var count = self._getMsgCount();
                    if (count) {
                        count += 1;
                    } else {
                        count = 1;
                    }
                    self._renderMsgCount(count);
                }
            }, function () {
                Mojo.app.data.needLoginStatus = false;
                self.baseProfile.sync();
            });
        },
        _yahooPrompt: function () {
            var self = this;
            new Mojo.com.CommonDialog(undefined, {
                title: self.locale('helpful hints'),
                content: self.locale('yahoo prompt'),
                leftBtnText: Mojo.utils.locale('weibo', 'go bind'),
                leftBtnClick: function (that) {
                    that.close();
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                },
                rightBtnText: Mojo.utils.locale('common', 'close'),
                rightBtnClick: function (that) {
                    that.close();
                }
            }).open();
        },
        _bindSuccessPrompt: function (effectiveEvent, bindingEmail, isWeiboFollowing, isFirstWeibo, weibo) {
            var self = this;
            effectiveEvent = Number(effectiveEvent);
            switch (effectiveEvent) {
            case 1:
                self._oldUserEmailBindSuccess(bindingEmail);
                break;
            case 2:
                self._oldUserWeiboBindSuccess(effectiveEvent, isWeiboFollowing, isFirstWeibo);
                break;
            case 3:
                self._oldUserWeiboBindSuccess(effectiveEvent, isWeiboFollowing, isFirstWeibo, function () {
                    self._oldUserEmailBindSuccess(bindingEmail);
                });
                break;
            case 4:
            case 5:
                new Mojo.com.CommonDialog(undefined, {
                    title: Mojo.utils.locale('weibo', 'merge_prompt_tips'),
                    content: $("<div class='paragraph word-break'>" + self.getL('weibo', 'merge_prompt_content', {
                        weibo: weibo
                    }) + "</div>"),
                    leftBtnText: Mojo.utils.locale('common', 'ok'),
                    leftBtnClick: function (that) {
                        that.close();
                        Mojo.ajax('/user/delayMerge', {}, function (response) {
                            if (response.errorCode == 0) {
                                if (response.data.status == 3) {
                                    new Mojo.com.CommonDialog(undefined, {
                                        title: Mojo.utils.locale('weibo', 'bind succeed'),
                                        content: $("<div class='paragraph word-break'>" + self.getL('weibo', 'weibo bind succeed 7 day ago has card', {
                                            weibo: weibo
                                        }) + "</div>"),
                                        leftBtnText: Mojo.utils.locale('common', 'need_logout'),
                                        leftBtnClick: function (that) {
                                            that.close();
                                        },
                                        close: function () {
                                            Mojo.app.redirect('/default/logout');
                                            if (window.localStorage) {
                                                localStorage['chat-channel-default'] = 0;
                                            }
                                        }
                                    }).open();
                                } else if (response.data.status == 4) {
                                    new Mojo.com.CommonDialog(undefined, {
                                        title: Mojo.utils.locale('weibo', 'bind succeed'),
                                        content: $("<div class='paragraph word-break'>" + self.getL('weibo', 'weibo bind succeed 7 day ago no card', {
                                            weibo: weibo
                                        }) + "</div>"),
                                        leftBtnText: Mojo.utils.locale('common', 'need_logout'),
                                        leftBtnClick: function (that) {
                                            that.close();
                                        },
                                        close: function () {
                                            Mojo.app.redirect('/default/logout');
                                            if (window.localStorage) {
                                                localStorage['chat-channel-default'] = 0;
                                            }
                                        }
                                    }).open();
                                } else if (response.data.status == 5) {
                                    new Mojo.com.CommonDialog(undefined, {
                                        title: self.getL('weibo', 'merge_faild_tips'),
                                        content: $('<div class="paragraph wordBreak"></div>').html(self.getL('weibo', 'merge_faild_content')),
                                        leftBtnText: self.getL('common', 'close'),
                                        leftBtnClick: function (that) {
                                            that.close();
                                        }
                                    }).open();
                                }
                            }
                        }, function () {}, {
                            showWait: true
                        });
                    }
                }).open();
                break;
            case 6:
                new Mojo.com.CommonDialog(undefined, {
                    title: Mojo.utils.locale('weibo', 'merge_prompt_tips'),
                    content: $("<div class='paragraph word-break'>" + self.getL('weibo', 'email_merge_prompt_content', {
                        email: bindingEmail
                    }) + "</div>"),
                    leftBtnText: Mojo.utils.locale('common', 'ok'),
                    leftBtnClick: function (that) {
                        that.close();
                        Mojo.ajax('/user/delayMerge', {}, function (response) {
                            if (response.errorCode == 0) {
                                new Mojo.com.CommonDialog(undefined, {
                                    title: Mojo.utils.locale('weibo', 'Merge Succeed'),
                                    content: $("<div class='paragraph word-break'>" + self.getL('home', 'email bind success tips', {
                                        email: bindingEmail
                                    }) + "</div>"),
                                    leftBtnText: Mojo.utils.locale('common', 'need_logout'),
                                    leftBtnClick: function (that) {
                                        that.close();
                                    },
                                    close: function () {
                                        Mojo.app.redirect('/default/logout');
                                        if (window.localStorage) {
                                            localStorage['chat-channel-default'] = 0;
                                        }
                                    }
                                }).open();
                            } else {
                                new Mojo.com.CommonDialog(undefined, {
                                    title: self.getL('common', 'friendly_tip'),
                                    content: $('<div class="paragraph wordBreak">').html(response.errorMsg),
                                    leftBtnText: self.getL('common', 'close'),
                                    leftBtnClick: function (that) {
                                        that.close();
                                    }
                                }).open();
                            }
                        }, function () {}, {
                            showWait: true
                        });
                    }
                }).open();
                break;
            }
        },
        _showCommonDialog: function (data) {
            var self = this;
            new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('weibo', 'bind succeed'),
                content: $("<div class='paragraph word-break'>" + data.message + "</div>"),
                leftBtnText: data.leftBtnText,
                leftBtnClick: function (that) {
                    if (data.leftBtnClick) data.leftBtnClick(that);
                },
                close: function (that) {
                    if (data.close) data.close(that);
                }
            }).open();
        },
        _oldUserWeiboBindSuccess: function (effectiveEvent, isWeiboFollowing, isFirstWeibo, callback) {
            var self = this;
            var content = null;
            var contentKey = '';
            if (isFirstWeibo) {
                if (isWeiboFollowing) {
                    contentKey = 'change weibo success tips0';
                } else {
                    contentKey = 'Bind succeed and why not to follow us';
                }
            } else {
                if (isWeiboFollowing) {
                    contentKey = 'change weibo success tips';
                } else {
                    contentKey = 'Bind Success Tip';
                }
            }
            new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('weibo', 'bind succeed'),
                content: $("<div class='paragraph word-break'>" + self.getL('weibo', contentKey) + "</div>"),
                leftBtnText: Mojo.utils.locale('weibo', 'follow'),
                leftBtnClick: function (that) {
                    self.getBindingBouncesBtn = true;
                    that.close();
                },
                close: function () {
                    if (self.getBindingBouncesBtn) {
                        self.getBindingBouncesBtn = null;
                        Mojo.ajax('/user/getBindingBounces', {
                            need_follow: true
                        }, function (result) {
                            if (result.errorCode != 0) {
                                self._errorDialog(result.errorMsg);
                            }
                        });
                    } else {
                        Mojo.ajax('/user/getBindingBounces', {
                            need_follow: false
                        }, function (result) {
                            if (result.errorCode != 0) {
                                self._errorDialog(result.errorMsg);
                            }
                        });
                    }
                    self.bindAwardDlg();
                    if (callback) {
                        callback();
                    }
                }
            }).open();
        },
        _oldUserEmailBindSuccess: function (bindingEmail) {
            var self = this;
            new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('weibo', 'bind succeed'),
                content: $("<div class='paragraph word-break'>" + self.getL('home', 'Register Code Tip', {
                    email: bindingEmail || ''
                }) + "</div>"),
                leftBtnText: Mojo.utils.locale('common', 'close'),
                leftBtnClick: function (that) {
                    that.close();
                },
                close: function () {
                    Mojo.ajax('/user/getBindingBounces', {
                        need_follow: false
                    }, function (result) {
                        if (result.errorCode != 0) {
                            self._errorDialog(result.errorMsg);
                        }
                    });
                }
            }).open();
        },
        bindAwardDlg: function () {
            var self = this;
            var dlg = new Mojo.com.CommonDialog(undefined, {
                title: self.getL('home', 'bind award tips'),
                content: $('<div class="paragraph word-break"><div class="title-tips">' + self.getL('home', 'bind_rebirth_drug_content') + '</div><div class="awards"><div class="card-gift image"><div class="iphone mojo-com-entity-small"><div class="card-image-url"></div><div class="minis-flag" style="display: none;"></div></div><div class="count">10</div></div><div class="name">' + self.getL('home', 'bind_rebirth_drug') + '</div></div></div>'),
                leftBtnText: self.getL('common', 'close'),
                leftBtnClick: function (that1) {
                    that1.close();
                }
            });
            dlg.element().addClass('home_award_dlg');
            dlg.open();
        },
        _oldAccountPrompt: function () {
            var self = this;
            new Mojo.com.CommonDialog(undefined, {
                title: self.locale('helpful hints'),
                content: $("<div class='paragraph word-break'>" + self.locale('account secrity prompt') + "</div>"),
                leftBtnText: Mojo.utils.locale('weibo', 'go bind'),
                leftBtnClick: function (that) {
                    that.close();
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                },
                rightBtnText: Mojo.utils.locale('common', 'close'),
                rightBtnClick: function (that) {
                    that.close();
                }
            }).open();
        },
        _getMsgCount: function () {
            var count = $('#btn-messages > .count').html();
            if (Mojo.utils.isNone(count)) {
                count = 0;
            } else {
                count = parseInt(count);
            }
            return count;
        },
        _renderMsgCount: function (n) {
            var self = this;
            var count = $('#btn-messages > .count');
            if (count.length <= 0) {
                setTimeout(function () {
                    self._renderMsgCount(n);
                }, 100);
                return;
            }
            if (n <= 0) {
                count.html(n).hide();
            } else {
                count.html(n).show();
            }
        },
        _renderChatCount: function (n) {
            var self = this;
            var count = $('#btn-chat > .count');
            if (count.length <= 0) {
                setTimeout(function () {
                    self._renderMsgCount(n);
                }, 100);
                return;
            }
            if (n <= 0) {
                count.html(n).hide();
            } else {
                count.html(n).show();
            }
        },
        _renderRankingCount: function (n) {
            var self = this;
            var count = $('#btn-ranking > .count');
            if (count.length <= 0) {
                setTimeout(function () {
                    self._renderRankingCount(n);
                }, 100);
                return;
            }
            if (n <= 0) {
                count.html(n).hide();
            } else {
                count.html(n).show();
            }
        },
        _renderBGMsgCount: function (n) {
            var self = this;
            var icon = $('#btn-battleground > .icon');
            if (icon.length <= 0) {
                setTimeout(function () {
                    self._renderBGMsgCount(n);
                }, 100);
                return;
            }
            if (n <= 0) {
                icon.addClass('mojo-com-bg-beta');
            } else {
                icon.addClass('mojo-com-rob-num').html(n);
            }
        },
        debugable: function () {
            return Mojo.utils.debug.vars.page.home;
        },
        _errorDialog: function (mess) {
            var self = this;
            new Mojo.com.CommonDialog(undefined, {
                title: self.getL('common', 'friendly_tip'),
                content: $('<div class="paragraph wordBreak">').html(mess),
                leftBtnText: self.getL('common', 'close'),
                leftBtnClick: function (that) {
                    that.close();
                }
            }).open();
        },
        _newPlayerGift: function (response) {
            var self = this;
            var newPlayerTutorial = undefined;
            var newPlayerAwardDiv = $('<div id="new-player-award"></div>');
            var generalList = {};
            var chooseGeneralId = undefined;
            if (response && response.errorCode === 0) {
                (new Mojo.ui.Button(undefined, {
                    text: Mojo.utils.locale('tutorial', 'tutorial_goto_choose'),
                    special: 'button-big-red',
                    click: function () {
                        Mojo.ajax("/bonus/NewPlayerAward", {
                            entity_id: chooseGeneralId
                        }, function (response) {
                            newPlayerTutorial.close();
                            Mojo.app.redirect('/activity', {
                                selected: 0
                            });
                        }, function (response) {
                            self._baseSlotList.reLoad();
                            newPlayerAwardDiv.remove();
                            newPlayerTutorial.close();
                        }, {
                            showWait: true
                        });
                    }
                })).element().addClass("go-sanguo").appendTo(newPlayerAwardDiv);
            }
            newPlayerTutorial = (new Mojo.com.Tutorial(undefined, {
                text: Mojo.utils.locale('tutorial', 'tutorial_new_player'),
            }));
            newPlayerTutorial.open();
            newPlayerTutorial.element().attr("id", "new-player-tutorial").find(".tutorial-arrow").hide();
            newPlayerTutorial.element().append($('<div class="new-player-award-title"></div>').html(Mojo.utils.locale('home', 'new_player_gift_title')));
            newPlayerTutorial.element().append(newPlayerAwardDiv);
        }
    });
})(window, jQuery);