(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.lang = {};
    w.Mojo.lang['ui'] = {
        'zh_tw': {
            'Agree': '同意',
            'Agreed': '',
            'Assist Lose': '救援失敗',
            'Assist Win': '救援成功',
            'Back': '返回',
            'Back to {{:scenario}}': '返回{{:scenario}}',
            'Base Informations': '基礎資料',
            'Close': '關閉',
            'Congratulations': '恭喜',
            'Congratulations! You got a card!': '恭喜你獲得了一張卡牌！',
            'Congratulations! You got rewards!': '恭喜你獲得獎勵！',
            'Denied': '',
            'Deny': '拒絕',
            'Do': '執行',
            'Duel': '切磋',
            'Fight Informations': '戰鬥資訊',
            'For Help': '求援',
            'For Help Again': '再次求援',
            'Force Invite': '勢力邀請',
            'Force War': '勢力戰',
            'Friend Assist Request': '好友求援',
            'Friend Confirmation': '好友確認',
            'Friend Delete': '割袍斷義',
            'Friend Message': '好友消息',
            'Friend PK Lose': '切磋戰敗',
            'Friend PK Win': '切磋勝利',
            'Friend Rejection': '好友拒絕',
            'Friend Request': '好友請求',
            'In War': '參戰',
            'In War2': '',
            'Introduction': '簡介',
            'Leave Message': '留言',
            'Level': '難度：',
            'More Messages': '更多消息',
            'Next': '後一頁',
            'PK Lose': '戰敗',
            'PK Win': '勝利',
            'Previous': '前一頁',
            'Progress': '完成度',
            'Ranking': '',
            'Refresh Succ': '刷新成功',
            'Reject': '拒絕',
            'Reply': '回覆',
            'Requirement': '任務需求',
            'Retaliate': '反擊',
            'Reward': '任務獎勵',
            'Select': '選',
            'Select a friend': '選擇好友',
            'Send': '發送',
            'Send Troops': '出兵',
            'System Message': '系統消息',
            'Thanko_kr': '致謝',
            'Thanks': '致谢',
            'Type message': '發送消息',
            'View Force': '查看勢力',
            'View More': '查看更多',
            'ago': '前',
            'day': '天',
            'days': '天',
            'hour': '小時',
            'hours': '小時',
            'lost_title': '',
            'minute': '分鐘',
            'minutes': '分鐘',
            'second': '秒',
            'seconds': '秒',
            'ui War': '勢力戰',
        },
        'zh_cn': {
            'Agree': '同意',
            'Agreed': '已同意',
            'Assist Lose': '救援失败',
            'Assist Win': '救援成功',
            'Back': '返回',
            'Back to {{:scenario}}': '返回{{:scenario}}',
            'Base Informations': '基础信息',
            'Close': '关闭',
            'Congratulations': '恭喜',
            'Congratulations! You got a card!': '恭喜你获得了一张卡牌！',
            'Congratulations! You got rewards!': '恭喜你获得奖励！',
            'Denied': '已拒绝',
            'Deny': '拒绝',
            'Do': '执行',
            'Duel': '切磋',
            'Fight Informations': '战斗信息',
            'For Help': '求援',
            'For Help Again': '再次求援',
            'Force Invite': '势力邀请',
            'Force War': '抢粮战',
            'Friend Assist Request': '好友求援',
            'Friend Confirmation': '好友确认',
            'Friend Delete': '割袍断义',
            'Friend Message': '好友消息',
            'Friend PK Lose': '切磋战败',
            'Friend PK Win': '切磋胜利',
            'Friend Rejection': '好友拒绝',
            'Friend Request': '好友请求',
            'In War': '参战',
            'In War2': '战斗',
            'Introduction': '简介',
            'Leave Message': '留言',
            'Level': '难度：',
            'More Messages': '更多消息',
            'Next': '后一页',
            'PK Lose': '战败',
            'PK Win': '胜利',
            'Previous': '前一页',
            'Progress': '完成度',
            'Ranking': '排行榜消息',
            'Refresh Succ': '刷新成功',
            'Reject': '拒绝',
            'Reply': '回复',
            'Requirement': '任务需求',
            'Retaliate': '反击',
            'Reward': '任务奖励',
            'Select': '选',
            'Select a friend': '选择好友',
            'Send': '发送',
            'Send Troops': '出兵',
            'System Message': '系统消息',
            'Thanko_kr': '致谢',
            'Thanks': '致谢',
            'Type message': '发送消息',
            'View Force': '查看势力',
            'View More': '查看更多',
            'ago': '前',
            'day': '天',
            'days': '天',
            'hour': '小时',
            'hours': '小时',
            'lost_title': '失去称号',
            'minute': '分钟',
            'minutes': '分钟',
            'second': '秒',
            'seconds': '秒',
            'ui War': '抢粮战',
        },
    };
    w.Mojo.lang['common'] = {
        'zh_tw': {
            'Go Statistics': '查看統計',
            'acceleration for restore ep': '&#149精力恢復速度增加：',
            'acceleration for restore sp': '&#149體力恢復速度增加：',
            'action_error': '',
            'add_cp': '你使用了{{:name}}, 獲得了{{:value}}个挑戰書',
            'add_ep': '{{:name}}使用成功',
            'add_friend': '加好友',
            'add_sp': '{{:name}}使用成功',
            'ago': '',
            'and': '',
            'assign_title': '',
            'attack': '進攻',
            'attack_again': '再次進攻',
            'avoid war time': '免戰時間：{{:avoid_war_time}}',
            'avoid_war_content': '主公，我軍還在免戰中，撤銷免戰牌方可出兵！但是我軍也將城門大開！<br><b>免戰時間：{{:avoid_war_time}}</b>',
            'avoid_war_title': '我軍免戰中',
            'back': '返回',
            'bad network': '主公～你的網路有點弱哦～',
            'barrack_active_dlg_content': '',
            'barrack_active_dlg_title': '',
            'base_attack': '基礎攻擊力：{{:old}} → <span>{{:new}}</span>',
            'base_defence': '基礎防禦力：{{:old}} → <span>{{:new}}</span>',
            'battle': '去征討',
            'battle_search': '輸入玩家暱稱搜索',
            'before_login_data': '',
            'bind': '預設',
            'bind_tip1': '主公，請預設您的email。Email將作為密碼找回的工具，且不可更改<div class="tip">所以請務必確認email正確有效哦~</div>',
            'bind_tip2': '預設email 7天後，即可通過email找回密碼哦~',
            'bind_tip3': '',
            'bind_title': '預設帳號資訊',
            'bind_weibo': '預設Facebook',
            'buy': '購買',
            'buy ep succ': '精力大還丹購買成功',
            'buy sp succ': '體力大還丹購買成功',
            'buy_fail_title': '購買失敗！',
            'buy_something_success': '{{:name}}購買成功',
            'buy_warning_content': '',
            'buy_warning_title': '',
            'cancel': '',
            'capacify_lack': '卡牌容量不足',
            'capacify_lack_tip': '主公~您的卡牌容量不足啦，去强化掉多余的卡牌或者去出售部分卡牌再来吧~',
            'choose_a_player_enter': '',
            'clear_avoid_war': '免戰時間已清空，機會和挑戰並存',
            'close': '關閉',
            'common': '勢力：',
            'confirm quit': '',
            'count': '數量：',
            'create_new_player': '',
            'create_player_tips': '',
            'day': '天',
            'days': '天',
            'dday': '日',
            'default_text': '請輸入給他（她）的話',
            'diaochan_battle_guide': '',
            'diaochan_first_card': '',
            'diaochan_intity_first_card': '',
            'diaochan_new_player': '',
            'diaochan_rob_guide': '',
            'discount': '折',
            'do_task_update': '',
            'email': 'email',
            'email bind tips': '',
            'enter': '',
            'enter game': '',
            'ep': '精力值：',
            'expire': '維護',
            'explanation': '',
            'facebook': 'Facebook',
            'findpwd_email_address': 'email *',
            'findpwd_email_tip': '請輸入帳號和註冊的email：',
            'findpwd_method_tip': '請選擇密碼找回的方式！<br>&#149預設手機的用戶請選擇【簡訊找回】<br>&#149已註冊email的用戶請選擇【郵件找回】<br>&#149未預設手機和郵箱的用戶請聯繫客服<br>客服email：support@redatoms.com',
            'findpwd_mobile_tip': '請輸入帳號和註冊的手機號碼：',
            'findpwd_send_email': '發送郵件',
            'findpwd_server_tip': '您要找回密碼的伺服器：',
            'findpwd_with_email': '郵件找回',
            'findpwd_with_mobile': '簡訊找回',
            'force': '勢力：',
            'force-none': '',
            'force_message': '勢力消息',
            'force_war_tip2': '',
            'forcewar_lose_grain': '【{{:forcename}}】率眾偷襲我方勢力，奪走了{{:grain}}糧餉',
            'forcewar_notice_members1': '[<span>{{:title}}</span>]{{:ownername}}向【{{:forcename}}】發起挑戰，號召你加入戰鬥！',
            'forcewar_win_grain': '我方勢力輕鬆擊敗【{{:forcename}}】，奪得{{:grain}}糧餉',
            'forgetpwd': '忘記密碼',
            'friend_search': '',
            'friendly_tip': '',
            'full': '滿',
            'gain_levelup_award': '獲得升級獎勵：',
            'game account': '',
            'general_count': '上陣將領數：',
            'general_slot_unlock': '解鎖一個上陣將領卡槽!',
            'get_wuhu_tip': '',
            'go_accept': '查收',
            'go_bless': '',
            'go_download': '',
            'go_embed': '直接上陣',
            'go_fuben': '去闖關',
            'go_intensify': '去強化',
            'go_look': '',
            'go_neizheng': '',
            'go_package_card': '',
            'go_payment': '去加值',
            'go_rebirth': '去轉生',
            'go_sale': '去出售',
            'go_vm': '去換錢',
            'grain': '糧餉：',
            'has reached the maximum': '已達最大值',
            'hot': '熱',
            'hour': '小時',
            'hours': '小時',
            'id': '',
            'in_cd': '冷卻中：',
            'input_account_tip': '',
            'input_email': '请输入郵箱地址',
            'input_mobile': '請輸入手機號',
            'input_username': '請輸入帳號',
            'intensify': '強化',
            'invite_friend': '好友邀請',
            'level': '級別：',
            'level_up': '恭喜主公達到等級{{:level}}',
            'level_up_title': '恭喜升級',
            'login_forget_description': '若註冊時未填寫手機號碼或手機號碼有誤，請聯繫客服。',
            'login_forget_passwd': '密碼找回',
            'login_forget_phone': '手機號碼 *',
            'login_forget_sendsms': '發送簡訊',
            'login_forget_username': '帳號  *',
            'login_nickname_tip': '',
            'login_time': '',
            'lv': '級別',
            'main_j': '主將',
            'max_energy': '精力最大值：{{:old}} → <span>{{:new}}</span>',
            'max_entity': '卡牌容量上限：{{:old}} → <span>{{:new}}</span>',
            'max_friends_count': '最大好友數量：{{:old}} → <span>{{:new}}</span>',
            'max_stamina': '體力最大值：{{:old}} → <span>{{:new}}</span>',
            'minute': '分鐘',
            'minutes': '分鐘',
            'month': '月',
            'more': '更多',
            'name': '暱稱：',
            'need_logout': '',
            'need_logout_notice': '',
            'new': '新',
            'new_attack': '攻擊：',
            'new_defence': '防禦：',
            'new_player_gift_title': '',
            'new_player_role': '',
            'nickname_not_empty': '',
            'no content': '無字天書會看不懂哦！',
            'no enough energy': '精力值不足',
            'no enough stamina': '體力值不足',
            'no_weixin': '',
            'not enough ep': '提示: 主公如有體力,請前去征討',
            'not enough sp': '提示: 主公如有精力,請執行任務',
            'not_bind': '暫不預設',
            'ok': '確定',
            'player num max prompt': '',
            'playerId': '',
            'player_role': '',
            'pls_input_acc': '',
            'price': '花費：',
            'price in mall': '商城售價：',
            'price_title': '售價：',
            'priceless': '無價之寶，不可購買',
            'recharge': '加值',
            'relation': '（連結{{:platform}}）',
            'relation_guest': '未預設email的用戶請聯繫客服<br>客服email：support@redatoms.com',
            'repeat_login': '',
            'reset_avoid_war': '使用成功，免戰時間重置為{{:avoid_war_time}}',
            'revocation_of_war_free': '撤銷免戰',
            'rm': '元寶：',
            'rob': '去奪寶',
            'sanguo_coming': '',
            'search': '搜',
            'search_force_hint': '',
            'second': '秒',
            'seconds': '秒',
            'select_all': '全選',
            'send success': '',
            'send_pwd_to_email': '',
            'send_pwd_to_mobile': '',
            'send_pwd_to_phone': '',
            'share': '',
            'simple': '',
            'simple_attack': '攻擊力：',
            'simple_defence': '防禦力：',
            'simplified': '簡體',
            'sp': '體力值：',
            'suggestion_default_text': '請輸入您的建議',
            'suggestion_has_send': '已飛鴿傳書！',
            'suggestion_title': '意見建議',
            'sure_buy': '',
            'task': '做任務',
            'team_attack': '軍團攻擊力：',
            'team_defence': '軍團防禦力：',
            'think_again': '再想想',
            'time for all ep': '&#149全部精力恢復：',
            'time for all sp': '&#149全部體力恢復：',
            'time for next ep': '&#149下一點精力恢復：',
            'time for next sp': '&#149下一點體力恢復：',
            'tips': '提示',
            'traditional': '繁體',
            'unknown': '',
            'unlock_fuben_name': '解鎖闖關：{{:name}}',
            'unlock_slot_count': '上陣將領卡槽：{{:old}} → <span>{{:new}}</span>',
            'use': '使用',
            'userbuff': '',
            'username_tip': '',
            'username_too_long': '',
            'view': '查看',
            'vm': '銀幣：',
            'wait_to_do': '主公～稍等一下再執行該任務吧～',
            'weibo': 'Facebook',
            'weixin': '',
            'weixinfriends': '',
            'when lose': '失敗時',
            'when win': '勝利時',
            'win_rate': '征討勝率：{{:percent}}%',
            'xp': '經驗值：',
            'year': '年',
        },
        'zh_cn': {
            'Go Statistics': '查看统计',
            'acceleration for restore ep': '&#149精力恢复速度增加：',
            'acceleration for restore sp': '&#149体力恢复速度增加：',
            'action_error': '主公~您的操作失败，请重试~',
            'add_cp': '你使用了{{:name}}, 获得了{{:value}}个军令',
            'add_ep': '{{:name}}使用成功',
            'add_friend': '加好友',
            'add_sp': '{{:name}}使用成功',
            'ago': '前',
            'and': '及',
            'assign_title': '分配称号',
            'attack': '进攻',
            'attack_again': '再次进攻',
            'avoid war time': '免战时间：{{:avoid_war_time}}',
            'avoid_war_content': '主公，我军还在免战中，撤销免战牌方可出兵！但是我军也将城门大开！<br><b>免战时间：{{:avoid_war_time}}</b>',
            'avoid_war_title': '我军免战中',
            'back': '返回',
            'bad network': '主公～你的网络不给力啊～',
            'barrack_active_dlg_content': '主公~恭喜您开启了压阵军营卡槽位，升级压阵军营可上阵更多的卡牌哦~',
            'barrack_active_dlg_title': '开启压阵军营',
            'base_attack': '基础攻击力：{{:old}} → <span>{{:new}}</span>',
            'base_defence': '基础防御力：{{:old}} → <span>{{:new}}</span>',
            'battle': '去征讨',
            'battle_search': '输入玩家昵称或ID搜索',
            'before_login_data': '上次登录：',
            'bind': '绑定',
            'bind_tip1': '主公，请绑定您的电子邮箱。电子邮箱将作为密码找回的工具，且不可更改<div class="tip">所以请务必保证邮箱真实有效哦~</div>',
            'bind_tip2': '绑定邮箱7天后，即可通过邮箱找回密码哦~',
            'bind_tip3': '主公~为了您的账户安全,请前往设置中进行游戏账户绑定,绑定后可获额外奖励哦~',
            'bind_title': '账户信息绑定',
            'bind_weibo': '绑定微博',
            'buy': '购买',
            'buy ep succ': '精力大还丹购买成功',
            'buy sp succ': '体力大还丹购买成功',
            'buy_fail_title': '购买失败！',
            'buy_something_success': '{{:name}}购买成功',
            'buy_warning_content': '主公～我军要购入此东东吗？',
            'buy_warning_title': '购买确认',
            'cancel': '取消',
            'capacify_lack': '卡牌容量不足',
            'capacify_lack_tip': '主公~您的卡牌容量不足啦，去强化掉多余的卡牌或者去出售部分卡牌再来吧~',
            'choose_a_player_enter': '选择一个角色进入游戏',
            'clear_avoid_war': '免战时间已清空，机会和挑战并存',
            'close': '关闭',
            'common': '势力：',
            'confirm quit': '确认退出',
            'count': '数量：',
            'create_new_player': '创建新角色',
            'create_player_tips': '创建角色数：{{:players}}/{{:maxPlayers}}',
            'day': '天',
            'days': '天',
            'dday': '日',
            'default_text': '请输入给Ta的话',
            'diaochan_battle_guide': '主公~您的精力不足啦~<br>你还可通过<span class="special-text">【征讨】</span>提升实力哦~<div class="goBtn">点击继续</div>',
            'diaochan_first_card': '啊~被打败了~<br/>星级越高的将领越厉害哦~<br/>点击<span class="special-text">【首页】</span>中的将领头像，更换成刚获得的三星将领吧~<div class="goBtn">点击继续</div>',
            'diaochan_intity_first_card': '低等级的卡牌不够给力啊~<br/>点击<span class="special-text">【首页】</span>中的将领头像，可以强化将领，提高战斗力哦~<div class="goBtn">点击继续</div>',
            'diaochan_new_player': 'Hi~主公~<br/>我是貂蝉~<br/>我将陪伴您通过<span class="special-text">【任务】</span>体验三国穿越之旅哦~<div class="goBtn">点击继续</div>',
            'diaochan_rob_guide': '主公~您的精力不足啦~<br>你还可通过<span class="special-text">【夺宝】</span>提升实力哦~<div class="goBtn">点击继续</div>',
            'discount': '折',
            'do_task_update': '做【任务】升到{{:level}}级就能解锁哦~',
            'email': '电子邮箱',
            'email bind tips': '微博已被绑定',
            'enter': '进入',
            'enter game': '进入游戏',
            'ep': '精力值：',
            'expire': '维护',
            'explanation': '说明',
            'facebook': 'facebook',
            'findpwd_email_address': '邮箱地址 *',
            'findpwd_email_tip': '请输入账户和绑定的邮箱地址：',
            'findpwd_method_tip': '<b>请选择密码找回的方式！</b><br>&#149绑定手机的用户请选择【短信找回】<br>&#149绑定邮箱的用户请选择【邮件找回】<br>&#149手机和邮箱都未绑定的用户请联系客服<br>客服邮箱：support@redatoms.com',
            'findpwd_mobile_tip': '请输入账户和绑定的手机号码：',
            'findpwd_send_email': '发送邮件',
            'findpwd_server_tip': '您要找回密码的服务器：',
            'findpwd_with_email': '邮件找回',
            'findpwd_with_mobile': '短信找回',
            'force': '势力：',
            'force-none': '未加入势力',
            'force_message': '势力消息',
            'force_war_tip2': '贡献值{{:contribute}}及以上的势力成员可以参战哦~',
            'forcewar_lose_grain': '【{{:forcename}}】率众偷袭我方势力，夺走了{{:grain}}粮饷',
            'forcewar_notice_members1': '[<span>{{:title}}</span>]{{:ownername}}向【{{:forcename}}】发起挑战，号召你加入战斗！',
            'forcewar_win_grain': '我方势力轻松击败【{{:forcename}}】，夺得{{:grain}}粮饷',
            'forgetpwd': '忘记密码',
            'friend_search': '输入好友昵称搜索',
            'friendly_tip': '友情提示',
            'full': '满',
            'gain_levelup_award': '获得升级奖励：',
            'game account': '游戏账户：',
            'general_count': '上阵将领数：',
            'general_slot_unlock': '解锁一个上阵将领卡槽!',
            'get_wuhu_tip': '恭喜主公~成功招募了五虎上将【{{:wuhu}}】~',
            'go_accept': '查收',
            'go_bless': '去祝福',
            'go_download': '去下载',
            'go_embed': '直接上阵',
            'go_fuben': '去闯关',
            'go_intensify': '去强化',
            'go_look': '去看看',
            'go_neizheng': '做内政',
            'go_package_card': '去上阵',
            'go_payment': '去充值',
            'go_rebirth': '去转生',
            'go_sale': '去出售',
            'go_vm': '去换钱',
            'grain': '粮饷：',
            'has reached the maximum': '已达最大值',
            'hot': '热',
            'hour': '小时',
            'hours': '小时',
            'id': 'ID：',
            'in_cd': '冷却中：',
            'input_account_tip': '请输入您要找回密码的游戏账户',
            'input_email': '游戏账户不能为空',
            'input_mobile': '请输入手机号',
            'input_username': '请输入账户名',
            'intensify': '强化',
            'invite_friend': '好友邀请',
            'level': '级别：',
            'level_up': '恭喜主公达到等级{{:level}}',
            'level_up_title': '恭喜升级',
            'login_forget_description': '若注册时未填写手机号码或手机号码输入有误，请联系客服。',
            'login_forget_passwd': '密码找回',
            'login_forget_phone': '手机号 *',
            'login_forget_sendsms': '发送短信',
            'login_forget_username': '账户名 *',
            'login_nickname_tip': '昵称设定',
            'login_time': '登录：',
            'lv': '级别',
            'main_j': '主将',
            'max_energy': '精力最大值：{{:old}} → <span>{{:new}}</span>',
            'max_entity': '卡牌容量上限：{{:old}} → <span>{{:new}}</span>',
            'max_friends_count': '最大好友数量：{{:old}} → <span>{{:new}}</span>',
            'max_stamina': '体力最大值：{{:old}} → <span>{{:new}}</span>',
            'minute': '分钟',
            'minutes': '分钟',
            'month': '月',
            'more': '更多',
            'name': '昵称：',
            'need_logout': '重新登录',
            'need_logout_notice': '主公~您的账户在其它设备上登录了，本机登录的账户自动下线，请重新登录~',
            'new': '新',
            'new_attack': '攻击：',
            'new_defence': '防御：',
            'new_player_gift_title': '强者奖励',
            'new_player_role': '请输入您的新游戏昵称：',
            'nickname_not_empty': '昵称不可为空',
            'no content': '无字天书别人是看不懂的！',
            'no enough energy': '精力值不足',
            'no enough stamina': '体力值不足',
            'no_weixin': '主公~您还没安装微信客户端呢~',
            'not enough ep': '提示: 主公如有体力,请前去征讨',
            'not enough sp': '提示: 主公如有精力,请前去任务',
            'not_bind': '暂不绑定',
            'ok': '确定',
            'player num max prompt': '主公~最多只能创建{{:maxplayer}}个角色哦~',
            'playerId': '玩家ID：',
            'player_role': '游戏昵称是您在游戏中的名字：',
            'pls_input_acc': '请输入您的游戏账户',
            'price': '花费：',
            'price in mall': '商城售价：',
            'price_title': '售价：',
            'priceless': '无价之宝，不可购得。',
            'recharge': '充值',
            'relation': '（关联{{:platform}}）',
            'relation_guest': '邮箱未绑定的用户请联系客服<br>客服邮箱：support@redatoms.com',
            'repeat_login': '重复登录',
            'reset_avoid_war': '使用成功，免战时间重置为{{:avoid_war_time}}',
            'revocation_of_war_free': '撤销免战',
            'rm': '元宝：',
            'rob': '去夺宝',
            'sanguo_coming': '三国来了',
            'search': '搜',
            'search_force_hint': '输入势力名称或ID搜索',
            'second': '秒',
            'seconds': '秒',
            'select_all': '全选',
            'send success': '发送成功',
            'send_pwd_to_email': '已向<span style="color:#A80E0E">{{:email}}</span>的绑定邮箱发送密码',
            'send_pwd_to_mobile': '已向<span style="color:#A80E0E">{{:mobile}}</span>发送密码',
            'send_pwd_to_phone': '请输入您的手机号',
            'share': '分享',
            'simple': '',
            'simple_attack': '攻击力：',
            'simple_defence': '防御力：',
            'simplified': '简体',
            'sp': '体力值：',
            'suggestion_default_text': '请输入您的建议',
            'suggestion_has_send': '已飞鸽传书！',
            'suggestion_title': '意见建议',
            'sure_buy': '确定购买',
            'task': '做任务',
            'team_attack': '军团攻击力：',
            'team_defence': '军团防御力：',
            'think_again': '再想想',
            'time for all ep': '&#149全部精力恢复：',
            'time for all sp': '&#149全部体力恢复：',
            'time for next ep': '&#149下一点精力恢复：',
            'time for next sp': '&#149下一点体力恢复：',
            'tips': '提示',
            'traditional': '繁体',
            'unknown': '未知',
            'unlock_fuben_name': '解锁闯关：{{:name}}',
            'unlock_slot_count': '上阵将领卡槽：{{:old}} → <span>{{:new}}</span>',
            'use': '使用',
            'userbuff': '个人称号：',
            'username_tip': '最多十个字',
            'username_too_long': '角色名太长',
            'view': '查看',
            'vm': '银币：',
            'wait_to_do': '主公～等会儿再执行该任务吧～',
            'weibo': '分享到微博',
            'weixin': '微信好友',
            'weixinfriends': '微信朋友圈',
            'when lose': '失败时',
            'when win': '胜利时',
            'win_rate': '征讨胜率：{{:percent}}%',
            'xp': '经验值：',
            'year': '年',
        },
    };
    w.Mojo.lang['weibo'] = {
        'zh_tw': {
            'A new general socket will unlock after binding weibo account.': '綁定帳號後增加一個上陣將領卡槽。',
            'Bind Success Tip': '',
            'Bind sina weibo account': '預設微博',
            'Bind succeed and why not to follow us': '',
            'Bind weibo': '預設微博',
            'Binding sina weibo account, please wait...': '正在預設您的新浪微博帳號，請稍候...',
            'Change account': '變更預設',
            'Fail to bind your weibo account!': '預設新浪微博帳號失敗！',
            'Fail to fetch your weibo account infomation!': '獲取新浪微博帳號資訊失敗！',
            'Fail to logout current account!': '新浪微博帳號重設失敗，請重試！',
            'Fetching your nickname of sina weibo, please wait...': '正在獲取新浪微博帳戶昵稱，請稍候...',
            'Has bind to sina weibo account': '已預設新浪微博',
            'Has bind to sina weibo account:{{:account}}': '已預設新浪微博<br>{{:account}}',
            'Have not bind any weibo account!': '未預設新浪微博',
            'I am watting for you in #SanGuo lai le#!': '我在#三國來了#等著你呢！',
            'Login': '請重新登入',
            'Merge Succeed': '',
            'Please input weibo content': '請輸入信息內容',
            'Receive 50 coins for every weibo message(The daily limit is 500 coins).': '每分享一次喜悅獲得100銀幣（每日上限500銀幣）。',
            'Send Success': '發送消息成功！',
            'Send message': '發送消息',
            'Send weibo': '發送消息',
            'Share achievements with your friends and fans.': '和好友、粉絲們分享成就。',
            'Weibo Bind Success Tip': '',
            'Weibo has a lot of benefits': '分享喜悅好處多多',
            'Your weibo account "{{:account}}" has expired, please login again!': '新浪微博已過期<br>{{:account}}',
            'Your weibo account has been binded, do you want to use it binding current': '',
            'Your weibo account has expired!': '新浪微博已過期',
            'bind exist': '',
            'bind message': '主公～你還沒預設微博，現在就去預設吧～<br>也可以在【首頁-設置】中自行預設～<br>PS:分享喜悅將獲得銀幣獎勵哦～',
            'bind succeed': '',
            'bind succeed 7 day ago has card': '',
            'bind succeed 7 day ago no card': '',
            'bind title': '預設新浪微博',
            'bind_notice': '',
            'change weibo success tips': '',
            'change weibo success tips0': '',
            'email_merge_prompt_content': '',
            'enter_game': '進入遊戲',
            'expire message': '主公～你的微博已過期，需要重新登錄～<br>也可以在【首頁-設置】中自行登錄～<br>PS:分享喜悅將獲得銀幣獎勵哦～',
            'follow': '關注',
            'follow message': '是否關注官方微博，獲取更多遊戲資訊，並結交更多喜歡《三國來了》的戰友？<br>關注獎勵：1000銀幣',
            'follow official': '關注官方微博',
            'go bind': '去預設',
            'go login': '去登入',
            'merge_faild_content': '',
            'merge_faild_tips': '',
            'merge_prompt_content': '',
            'merge_prompt_tips': '',
            'no_bind_notice': '',
            'rebind weibo faild': '',
            'rebind weibo faild content': '',
            'relation_official_weibo': '關注《三國來了》官方微博<br><span>（第一次關注獎勵1000銀幣哦~）</span>',
            'relation_weibo': '連結新浪微博帳號',
            'relation_weibo_tip': '嗨，連結新浪微博隨時可以與身邊的朋友分享遊戲中的喜悅哦~',
            'weibo bind succeed 7 day ago has card': '',
            'weibo bind succeed 7 day ago no card': '',
            'weibo binding content': '',
            'weibo binding tips': '',
            'weibo bonus': '每分享一次喜悅可獲得100銀幣～',
            'weibo_bind_success_7_tips': '',
            'weibo_bind_success_7_tips2': '',
        },
        'zh_cn': {
            'A new general socket will unlock after binding weibo account.': '绑定账户后增加一个上阵将领卡槽。',
            'Bind Success Tip': '恭喜主公~绑定微博成功！关注《三国来了》官方微博，可获得1000银币奖励哦~是否关注？',
            'Bind sina weibo account': '绑定新浪微博',
            'Bind succeed and why not to follow us': '恭喜主公~绑定微博成功！您开启了一个新的武将卡槽，并额外获得转生丹×10的奖励哦~<br/>关注《三国来了》官方微博会有1000银币的额外奖励哦，是否关注？',
            'Bind weibo': '绑定微博',
            'Binding sina weibo account, please wait...': '正在绑定新浪微博账户，请稍候...',
            'Change account': '变更绑定',
            'Fail to bind your weibo account!': '绑定新浪微博账户失败！',
            'Fail to fetch your weibo account infomation!': '获取新浪微博账户信息失败！',
            'Fail to logout current account!': '新浪微博账户注销失败，请重试！',
            'Fetching your nickname of sina weibo, please wait...': '正在获取新浪微博账户昵称，请稍候...',
            'Has bind to sina weibo account': '已绑定新浪微博',
            'Has bind to sina weibo account:{{:account}}': '已绑定新浪微博<br>{{:account}}',
            'Have not bind any weibo account!': '未绑定新浪微博',
            'I am watting for you in #SanGuo lai le#!': '我在#三国来了#等着你呢！',
            'Login': '重新登录',
            'Merge Succeed': '合并成功',
            'Please input weibo content': '请输入微博内容',
            'Receive 50 coins for every weibo message(The daily limit is 500 coins).': '每发一条微博获得100银币（每日上限500银币）。',
            'Send Success': '发送微博成功！',
            'Send message': '发送消息',
            'Send weibo': '发送微博',
            'Share achievements with your friends and fans.': '和好友、粉丝们分享成就。',
            'Weibo Bind Success Tip': '恭喜主公~绑定微博成功！',
            'Weibo has a lot of benefits': '微博好处多多',
            'Your weibo account "{{:account}}" has expired, please login again!': '新浪微博已过期<br>{{:account}}',
            'Your weibo account has been binded, do you want to use it binding current': '主公~您的微博已绑定过游戏，是否将角色：<span style="color:#A80E0E">{{:nickname}}</span>合并到此微博下，<span style="color:#A80E0E">合并后将只能用此微博({{:weibo}})登录该角色</span>，确定合并该角色吗？',
            'Your weibo account has expired!': '新浪微博已过期',
            'bind exist': '主公~该微博已经被绑定在其他游戏账户上，无法再次绑定，请更换微博重试。',
            'bind message': '主公～你还没有绑定微博，现在就去绑定吧～<br>也可以在【首页-设置】中自行绑定～<br>PS:发送微博将获得银币奖励哦～',
            'bind succeed': '绑定成功',
            'bind succeed 7 day ago has card': '恭喜主公~微博将在7天后绑定成功!绑定成功后只能使用微博(<span style="color:#A80E0E">{{:weibo}}</span>)登录游戏。绑定成功后您可开启1个卡槽位,并额外获得转生丹×10的奖励哦~',
            'bind succeed 7 day ago no card': '恭喜主公~微博将在7天后绑定成功!绑定成功后只能使用微博(<span style="color:#A80E0E">{{:weibo}}</span>)登录游戏。绑定成功后可额外获得转生丹×10的奖励哦~',
            'bind title': '绑定新浪微博',
            'bind_notice': '绑定的微博不用于游戏登录',
            'change weibo success tips': '恭喜主公~绑定微博成功！关注《三国来了》官方微博精彩不断，是否关注？',
            'change weibo success tips0': '恭喜主公~成功绑定微博!您开启了一个新的武将卡槽，并额外获得转生丹×10的奖励哦~<br/>关注《三国来了》官方微博精彩不断,是否关注?',
            'email_merge_prompt_content': '主公~您的账户将合并到邮箱(<span style="color:#A80E0E">{{:email}}</span>)中,合并后将不能使用原账户登录游戏,只能用邮箱(<span style="color:#A80E0E">{{:email}}</span>)登录游戏,请点击确定完成合并。',
            'enter_game': '进入游戏',
            'expire message': '主公～你的微博已过期，需要重新登录～<br>也可以在【首页-设置-账户】中自行登录～<br>PS:发送微博将获得银币奖励哦～',
            'follow': '关注',
            'follow message': '是否关注官方微博，获取更多游戏信息，并结交更多喜欢《三国来了》的战友？<br>关注奖励：1000银币',
            'follow official': '关注官方微博',
            'go bind': '去绑定',
            'go login': '去登录',
            'merge_faild_content': '主公~您要绑定的账户和当前账户的角色总数超过限制,不能进行合并。',
            'merge_faild_tips': '合并失败',
            'merge_prompt_content': '主公~您的账户将合并到微博(<span style="color:#A80E0E">{{:weibo}}</span>)中,合并后将不能使用原账户将登录游戏,只能用微博(<span style="color:#A80E0E">{{:weibo}}</span>)登录游戏,请点击确定完成合并。',
            'merge_prompt_tips': '合并确认',
            'no_bind_notice': '绑定后，每天在游戏时发微博可获得银币奖励',
            'rebind weibo faild': '登录微博错误',
            'rebind weibo faild content': '主公~激活失败，需要登录你绑定的微博才可以成功激活哦~',
            'relation_official_weibo': '关注《三国来了》官方微博<br><span>（第一次关注奖励1000银币哦~）</span>',
            'relation_weibo': '关联新浪微博账户',
            'relation_weibo_tip': '亲，关联新浪微博随时可以与身边的朋友分享游戏中的喜悦哦~',
            'weibo bind succeed 7 day ago has card': '恭喜主公~成功绑定微博(<span style="color:#A80E0E">{{:weibo}}</span>)!以后只能用该微博登录游戏,您开启了一个新的武将卡槽。为了您的账户安全,请使用微博(<span style="color:#A80E0E">{{:weibo}}</span>)重新登录游戏。',
            'weibo bind succeed 7 day ago no card': '恭喜主公~成功绑定微博(<span style="color:#A80E0E">{{:weibo}}</span>)!以后只能用该微博登录游戏。为了您的账户安全,请使用微博(<span style="color:#A80E0E">{{:weibo}}</span>)重新登录游戏。',
            'weibo binding content': '主公~该微博正在绑定中，暂时不能绑定其他游戏账户。',
            'weibo binding tips': '微博绑定中',
            'weibo bonus': '<span style="color:#A80E0E">每日前3次</span>分享可获2000银币～',
            'weibo_bind_success_7_tips': '恭喜主公~微博将在7天后绑定成功！绑定成功后您可开启1个卡槽位，并额外获得转生丹×10的奖励哦~',
            'weibo_bind_success_7_tips2': '恭喜主公~微博将在7天后绑定成功！绑定成功后可额外获得转生丹×10的奖励哦~',
        },
    };
    w.Mojo.lang['facebook'] = {
        'zh_tw': {
            'A new general socket will unlock after binding weibo account.': '預設帳號後增加一個上陣將領卡槽。',
            'Bind sina weibo account': '預設facebook',
            'Bind weibo': '預設facebook',
            'Binding sina weibo account, please wait...': '正在預設facebook帳號，請稍候...',
            'Change account': '變更預設',
            'Fail to bind your weibo account!': '預設facebook帳號失敗！',
            'Fail to fetch your weibo account infomation!': '獲取facebook帳號資訊失敗！',
            'Fail to logout current account!': 'facebook帳號登出失敗，請重試！',
            'Fetching your nickname of sina weibo, please wait...': '正在獲取facebook帳戶昵稱，請稍候...',
            'Has bind to sina weibo account': '已預設facebook',
            'Has bind to sina weibo account:{{:account}}': '已預設facebook<br>{{:account}}',
            'Have not bind any weibo account!': '未預設facebook',
            'I am watting for you in #SanGuo lai le#!': '我在#三國來了#等著你呢！',
            'Login': '重新登入',
            'Please input weibo content': '請輸入分享內容',
            'Receive 50 coins for every weibo message(The daily limit is 500 coins).': '每po一條分享獲得100銀幣（每日上限500銀幣）。',
            'Send Success': '發送分享成功！',
            'Send message': '發送消息',
            'Send weibo': '分享',
            'Share achievements with your friends and fans.': '和好友、粉絲們分享成就。',
            'Weibo has a lot of benefits': '預設facebook帳號好處多多',
            'Your weibo account "{{:account}}" has expired, please login again!': 'facebook已過期<br>{{:account}}',
            'Your weibo account has expired!': 'facebook已過期',
            'bind message': '主公～你還沒有預設facebook帳號，現在就去預設吧～<br>也可以在【首頁-設置】中自行預設～<br>PS:發送分享將獲得銀幣獎勵哦～',
            'bind title': '預設facebook',
            'enter_game': '進入遊戲',
            'expire message': '主公～你的facebook已過期，需要重新登入～<br>也可以在【首頁-設置】中自行登入～<br>PS:發送分享將獲得銀幣獎勵哦～',
            'follow': '關注',
            'follow message': '是否關注官方facebook，獲取更多遊戲資訊，並結交更多喜歡《三國來了》的戰友？<br>關注獎勵：1000銀幣',
            'follow official': '關注官方facebook',
            'go bind': '去預設',
            'go login': '去登入',
            'relation_official_weibo': '關注《三國來了》官方Facebook<br><span>（第一次關注獎勵1000銀幣哦~）</span>',
            'relation_weibo': '連結facebook帳號',
            'relation_weibo_tip': '嗨，連結facebook隨時與身邊的朋友分享遊戲中的歡樂哦~',
            'weibo bonus': '每po一條分享可獲得100銀幣～',
        },
        'zh_cn': {
            'A new general socket will unlock after binding weibo account.': '绑定账户后增加一个上阵将领卡槽。',
            'Bind sina weibo account': '绑定facebook',
            'Bind weibo': '绑定facebook',
            'Binding sina weibo account, please wait...': '正在绑定facebook账户，请稍候...',
            'Change account': '变更绑定',
            'Fail to bind your weibo account!': '绑定facebook账户失败！',
            'Fail to fetch your weibo account infomation!': '获取facebook账户信息失败！',
            'Fail to logout current account!': 'facebook账户注销失败，请重试！',
            'Fetching your nickname of sina weibo, please wait...': '正在获取facebook账户昵称，请稍候...',
            'Has bind to sina weibo account': '已绑定facebook',
            'Has bind to sina weibo account:{{:account}}': '已绑定facebook<br>{{:account}}',
            'Have not bind any weibo account!': '未绑定facebook',
            'I am watting for you in #SanGuo lai le#!': '我在#三国来了#等着你呢！',
            'Login': '重新登录',
            'Please input weibo content': '请输入分享内容',
            'Receive 50 coins for every weibo message(The daily limit is 500 coins).': '每发一条分享获得100银币（每日上限500银币）。',
            'Send Success': '发送分享成功！',
            'Send message': '发送消息',
            'Send weibo': '分享',
            'Share achievements with your friends and fans.': '和好友、粉丝们分享成就。',
            'Weibo has a lot of benefits': '绑定facebook好处多多',
            'Your weibo account "{{:account}}" has expired, please login again!': 'facebook已过期<br>{{:account}}',
            'Your weibo account has expired!': 'facebook已过期',
            'bind message': '主公～你还没有绑定facebook，现在就去绑定吧～<br>也可以在【首页-设置】中自行绑定～<br>PS:发送分享将获得银币奖励哦～',
            'bind title': '绑定facebook',
            'enter_game': '进入游戏',
            'expire message': '主公～你的facebook已过期，需要重新登录～<br>也可以在【首页-设置】中自行登录～<br>PS:发送分享将获得银币奖励哦～',
            'follow': '关注',
            'follow message': '是否关注官方facebook，获取更多游戏信息，并结交更多喜欢《三国来了》的战友？<br>关注奖励：1000银币',
            'follow official': '关注官方facebook',
            'go bind': '去绑定',
            'go login': '去登录',
            'relation_official_weibo': '关注《三国来了》官方微博<br><span>（第一次关注奖励1000银币哦~）</span>',
            'relation_weibo': '关联facebook账户',
            'relation_weibo_tip': '亲，关联facebook随时可以与身边的朋友分享游戏中的喜悦哦~',
            'weibo bonus': '每发一条分享可获得100银币～',
        },
    };
    w.Mojo.lang['largeentity'] = {
        'zh_tw': {
            'attack': '增加攻擊力 + ',
            'defence': '增加防禦力 + ',
            'effect_ep': '精力恢復速度 + ',
            'effect_max_attack': '武將最大攻擊 + ',
            'effect_max_attack_pro': '攻擊時，打出最大攻擊的機率 + ',
            'effect_max_defence': '武將最大防禦 + ',
            'effect_max_defence_pro': '防守時，打出最大防禦的機率 + ',
            'effect_min_attack': '武將最小攻擊 + ',
            'effect_min_defence': '武將最小防禦 + ',
            'effect_rm': '額外獲得元寶 + ',
            'effect_sp': '體力恢復速度 + ',
            'effect_vm': '額外獲得銀幣 + ',
            'effect_xp': '額外獲得經驗 + ',
        },
        'zh_cn': {
            'attack': '增加攻击力 + ',
            'defence': '增加防御力 + ',
            'effect_ep': '精力恢复速度 + ',
            'effect_max_attack': '武将最大攻击 + ',
            'effect_max_attack_pro': '攻击时，打出最大攻击的概率 + ',
            'effect_max_defence': '武将最大防御 + ',
            'effect_max_defence_pro': '防守时，打出最大防御的概率 + ',
            'effect_min_attack': '武将最小攻击 + ',
            'effect_min_defence': '武将最小防御 + ',
            'effect_rm': '额外获得元宝 + ',
            'effect_sp': '体力恢复速度 + ',
            'effect_vm': '额外获得银币 + ',
            'effect_xp': '额外获得经验 + ',
        },
    };
    w.Mojo.lang['mission'] = {
        'zh_tw': {
            'Attack Another Generals': '恭喜主公，我軍擊敗了【{{:boss_name}}】，並繳獲了【{{:name}}】～',
            'Attack One Generals': '恭喜主公，我軍擊敗了【{{:boss_name}}】，並招降了【{{:name}}】～',
            'Coins': '銀幣',
            'Energy point is not enough': '精力值不足',
            'Gained': '獲得',
            'Get Another Collection': '恭喜，百姓們仰慕主公，獻上了傳家之寶【{{:name}}】～',
            'Get Another Generals': '恭喜，【{{:name}}】仰慕主公，前來投奔～',
            'Get One Collection': '恭喜主公，我軍在廢棄的房舍裡面發現了【{{:name}}】～',
            'Get One Generals': '恭喜主公，我軍招募到了【{{:name}}】～',
            'Please complete the tasko_kr above!': '需要完成以上全部任務才能執行此任務～',
            'Please complete the tasks above!': '需要完成以上全部任務才能執行此任務～',
            'Task Awards': '任務獎勵',
            'The task is completed!': '主公～該任務已經完成～',
            'You have to complete the previous task group!': '需要完成上一任務鏈方能解鎖～',
            'action': '',
            'battle result preview': '',
            'battle_result_fail': '',
            'battle_result_formation_title_lose': '',
            'battle_result_formation_title_win': '',
            'formation': '',
            'formation detail': '',
            'new_player_gift_title': '',
            'win_card': '',
        },
        'zh_cn': {
            'Attack Another Generals': '恭喜主公，我军击败了【{{:boss_name}}】，并缴获了【{{:name}}】～',
            'Attack One Generals': '恭喜主公，我军击败了【{{:boss_name}}】，并招降了【{{:name}}】～',
            'Coins': '银币',
            'Energy point is not enough': '精力值不足',
            'Gained': '获得',
            'Get Another Collection': '恭喜，百姓们仰慕主公，献上了传家之宝【{{:name}}】～',
            'Get Another Generals': '恭喜，【{{:name}}】仰慕主公，前来投奔～',
            'Get One Collection': '恭喜主公，我军在废弃的房舍里面发现了【{{:name}}】～',
            'Get One Generals': '恭喜主公，我军招募到了【{{:name}}】～',
            'Please complete the tasko_kr above!': '需要完成以上全部任务才能执行此任务～',
            'Please complete the tasks above!': '需要完成以上全部任务才能执行此任务～',
            'Task Awards': '任务奖励',
            'The task is completed!': '主公～该任务已经完成～',
            'You have to complete the previous task group!': '需要完成上一任务链方能解锁～',
            'action': '出征',
            'battle result preview': '征讨结果预览',
            'battle_result_fail': '我军战败了，可以强化将领或调整阵容后再来试试哦~',
            'battle_result_formation_title_lose': '战斗失败',
            'battle_result_formation_title_win': '战斗胜利',
            'formation': '调整阵容',
            'formation detail': '阵容对比',
            'new_player_gift_title': '强者奖励',
            'win_card': '主公~您有可能获得将领卡哦~',
        },
    };
    w.Mojo.lang['battle'] = {
        'zh_tw': {
            'Can not attack weak': '主公～欺負弱小是不對的～',
            'Enemy': '宿敵',
            'Fight': '單挑',
            'More opponents': '更多對手',
            'No enemies': '您還沒有仇家！獨孤求敗中～',
            'No fight opponents': '您還沒有實力相近的對手！獨孤求敗中～',
            'action': '出征',
            'armor_protect': '',
            'base attack': '基礎攻擊力：',
            'base defence': '基礎防禦力：',
            'battle result preview': '戰鬥結果預覽',
            'battle_fail_content': '',
            'battle_fail_title': '',
            'battle_result_formation_title_lose': '',
            'battle_result_formation_title_win': '',
            'battle_result_title': '戰鬥結果',
            'battle_result_title_lose': '征討失敗',
            'battle_result_title_rob_lose': '奪寶失敗',
            'battle_result_title_rob_win': '奪寶獎勵',
            'battle_result_title_win': '征討獎勵',
            'battle_tip': '攻擊等級高、存款多的玩家能搶到更多銀幣哦~',
            'be_restraint': '被克',
            'force_none': '',
            'formation': '調整陣容',
            'formation detail': '陣容資訊',
            'in_avoid_war': '',
            'lose_message': '你被打敗，小有損失～',
            'refresh opps': '刷新對手',
            'refresh_opponents': '刷新對手',
            'resist': '',
            'restraint': '克制',
            'search_prefix': 'Lv.',
            'sum attack': '軍團攻擊力：',
            'sum defence': '軍團防禦力：',
            'weapon_hit': '',
            'win_message_01': '恭喜主公，我軍擊敗了{{:name}}，並繳獲了【{{:bonus}}】～',
            'win_message_02': '恭喜主公，我軍擊敗了{{:name}}，打掃戰場時發現了【{{:bonus}}】～',
            'win_message_03': '恭喜主公，我軍擊敗了{{:name}}～',
            'win_message_04': '主公～真遺憾！你在行軍過程中【{{:bonus}}】已經被其他人搶走了！',
            'win_message_05': '主公～我軍雖勝，但{{:name}}攜【{{:bonus}}】跑路了～',
            'win_message_06': '主公～你有可能獲得裝備卡哦～',
            'win_message_07': '主公~你真是佛心來的啊！我軍擊敗了{{:name}}，並將【{{:bonus}}】歸還給了{{:frdname}}～',
        },
        'zh_cn': {
            'Can not attack weak': '主公～欺负弱小是不对的～',
            'Enemy': '宿敌',
            'Fight': '单挑',
            'More opponents': '更多对手',
            'No enemies': '您还没有仇家！独孤求败中～',
            'No fight opponents': '这个世界查无此人～',
            'action': '出征',
            'armor_protect': '防护',
            'base attack': '基础攻击力：',
            'base defence': '基础防御力：',
            'battle result preview': '征讨结果预览',
            'battle_fail_content': '主公，对方在战斗中哦，请稍等一会再来吧！',
            'battle_fail_title': '不能征讨',
            'battle_result_formation_title_lose': '战斗失败',
            'battle_result_formation_title_win': '战斗胜利',
            'battle_result_title': '战斗结果',
            'battle_result_title_lose': '征讨失败',
            'battle_result_title_rob_lose': '夺宝失败',
            'battle_result_title_rob_win': '夺宝奖励',
            'battle_result_title_win': '征讨奖励',
            'battle_tip': '攻击等级高、存钱多的玩家能抢到更多银币哦~',
            'be_restraint': '被克',
            'force_none': '未加入势力',
            'formation': '调整阵容',
            'formation detail': '阵容对比',
            'in_avoid_war': '免战中',
            'lose_message': '你被打败，小有损失～',
            'refresh opps': '刷新对手',
            'refresh_opponents': '刷新对手',
            'resist': '抵抗',
            'restraint': '克制',
            'search_prefix': 'Lv.',
            'sum attack': '军团攻击力：',
            'sum defence': '军团防御力：',
            'weapon_hit': '暴击',
            'win_message_01': '恭喜主公，我军击败了{{:name}}，并缴获了【{{:bonus}}】～',
            'win_message_02': '恭喜主公，我军击败了{{:name}}，打扫战场时发现了【{{:bonus}}】～',
            'win_message_03': '恭喜主公，我军击败了{{:name}}～',
            'win_message_04': '主公～真遗憾！你在行军过程中【{{:bonus}}】已经被其他人抢走了！',
            'win_message_05': '主公～我军虽胜，但{{:name}}携【{{:bonus}}】跑路了～',
            'win_message_06': '主公～你有可能获得装备卡哦～',
            'win_message_07': '主公~你就是当代的活雷锋啊！我军击败了{{:name}}，并将【{{:bonus}}】归还给了{{:frdname}}～',
        },
    };
    w.Mojo.lang['mall'] = {
        'zh_tw': {
            'batch_buy_dlg_tip': '',
            'batch_buy_num_tip': '',
            'buy': '購買',
            'buy-again': '',
            'buy_entity_content': '主公～您購買的東東已經放入包裹，可以從【首頁-卡牌】中查收～',
            'buy_fail_title': '購買失敗！',
            'buy_props_content': '主公～您購買的東東已經放入包裹，可以從【首頁-道具】中查收～',
            'buy_rm': '購買元寶',
            'buy_success_body': 'PS:您購買的東東已經放入包裹。',
            'buy_success_title': '購買成功',
            'buy_tips': '',
            'buy_tips_91': '',
            'buy_tips_pp': '',
            'buy_vm': '購買銀幣',
            'buy_warning_content': '主公～我軍要購入此東東嗎？',
            'buy_warning_title': '購買確認',
            'continue_mall': '繼續購物',
            'cost_vm': '',
            'current_rm': '',
            'current_vm': '',
            'discount_goods_flag': '%<br/>折扣',
            'discount_goods_flag_new': '{{:discount}}折',
            'go_accept': '查收',
            'go_payment': '去加值',
            'go_see': '',
            'go_vm': '去換錢',
            'goods_detail_title': '商品資訊',
            'has_buy': '已購買',
            'heaven_bless': '',
            'hot_goods_flag': '熱賣',
            'needCount': '',
            'need_rm': '主公～您的元寶不夠啦，荷包存點錢再來吧！',
            'need_vm': '主公～您的銀幣不夠啦，荷包存點錢再來吧！',
            'new_goods_flag': '新品',
            'niuyige': '',
            'not_tip': '',
            'open_ext_tip': '',
            'open_minis_result': '開啟扭蛋',
            'open_minis_tip': '主公～您扭出了【{{name}}】，可以從【首頁-卡牌】中查收～',
            'open_minis_tip1': '主公～您扭出了【{{name}}】，可以從【首頁-圖鑒-活動】中查收～',
            'pay_tips': '',
            'pay_tips_1': '',
            'pay_tips_2': '',
            'pay_tips_3': '',
            'pay_tips_4': '',
            'pay_tips_5': '',
            'pay_tips_content_1': '',
            'pay_tips_content_2': '',
            'pay_tips_content_3': '',
            'pay_tips_content_4': '',
            'play_minis': '打開扭蛋',
            'price_title': '{{name}}商城售價：',
            'rm_not_enough': '',
            'shilianchou': '',
            'shilianchou-title': '',
            'spend_rm': '',
            'spend_vm': '',
            'sure_buy': '確定購買',
            'tavern_update_time': '酒館更新倒數計時 %hhu %mmu %ssu',
            'tehui_bought': '',
            'tehui_endTime': '',
            'tehui_title': '',
            'think_again': '再想想',
            'wait_buy_result': '待收貨',
            'warm_tips': '',
        },
        'zh_cn': {
            'batch_buy_dlg_tip': '主公~请输入我军要购买此东东的数量~',
            'batch_buy_num_tip': '购买数量：',
            'buy': '购买',
            'buy-again': '再次购买',
            'buy_entity_content': '主公～您购买的东东已经放入包裹，可以从【首页-卡牌】中查收～',
            'buy_fail_title': '购买失败！',
            'buy_props_content': '主公～您购买的东东已经放送达，可以从【商城-道具】中查收～',
            'buy_rm': '购买元宝',
            'buy_success_body': 'PS:您购买的东东已经放入包裹。',
            'buy_success_title': '购买成功',
            'buy_tips': '主公～您还可以购买{{:name}}，{{:money}}元即可获得200元宝和稀有卡牌，每位主公仅限购一次哦～',
            'buy_tips_91': '主公～您还可以购买{{:name}}，{{:money}}(91豆)即可获得200元宝和稀有卡牌，每位主公仅限购一次哦～',
            'buy_tips_pp': '主公～您还可以购买{{:name}}，{{:money}}(pp币)即可获得200元宝和稀有卡牌，每位主公仅限购一次哦～',
            'buy_vm': '购买银币',
            'buy_warning_content': '主公～我军要购入此东东吗？',
            'buy_warning_title': '购买确认',
            'continue_mall': '继续购物',
            'cost_vm': '预计花费：',
            'current_rm': '现有元宝：',
            'current_vm': '现有银币：',
            'discount_goods_flag': '%<br/>折扣',
            'discount_goods_flag_new': '{{:discount}}折',
            'go_accept': '查收',
            'go_payment': '去充值',
            'go_see': '去查看',
            'go_vm': '去换钱',
            'goods_detail_title': '商品信息',
            'has_buy': '已购买',
            'heaven_bless': '天降鸿福',
            'hot_goods_flag': '热卖',
            'needCount': '本次更名消耗道具数：{{:needCount}}',
            'need_rm': '主公～您的元宝不够啦，快去充值吧！',
            'need_vm': '主公～您的银币不够啦，攒点钱再来吧！',
            'new_goods_flag': '新品',
            'niuyige': '扭一个',
            'not_tip': '不再提示',
            'open_ext_tip': '主公~您扭出了十张卡牌，包含一张五星卡【{{:name}}】，可以在【首页-卡牌】中查收~',
            'open_minis_result': '开启扭蛋',
            'open_minis_tip': '主公～您扭出了【{{name}}】，可以从【首页-卡牌】中查收～',
            'open_minis_tip1': '主公～您扭出了【{{name}}】，可以从【首页-图鉴-活动】中查收～',
            'pay_tips': '充值失败小贴士',
            'pay_tips_1': '<span class = "pay_tips_home"><br>1、充值时，提示：“你的付款方式卡被拒绝”或提示“请联络iTunes支持人员以完成交易”。</span>',
            'pay_tips_2': '<span class = "pay_tips_home"><br>2、充值时，提示：“ipa buy failed”。</span>',
            'pay_tips_3': '<span class = "pay_tips_home"><br>3、充值时，提示：“你尚未购买此游戏”。</span>',
            'pay_tips_4': '<span class = "pay_tips_home"><br>4、iOS7升级后，无法正常充值或购买游戏内道具。</span>',
            'pay_tips_5': '<span ><br>5、如果您还有其他问题，请点击下方的“联系客服”，我们会全力帮您解决。</span>',
            'pay_tips_content_1': '<span class = "pay_tips_header">1、充值时，提示：“你的付款方式卡被拒绝”或提示“请联络iTunes支持人员以完成交易”解决方案：</span><br><span class = "pay_tips_content">一般是先报错提示1，然后多次后报错提示2。不好意思，你的苹果账号就封了，更可怕的是设备可能也被封，换id换信用卡可能也不行。如果在出现第一次报错1的时候就收手，不要继续点击购买，那么不会被封，你换信用卡或银行支付就行。<br>还可以给苹果的技术支持写信：<br> 步骤一：访问 https://expresslane.apple.com/GetproductgroupList.do?PRKEYS=PF4<br>步骤二：先选国籍中国，然后选择 iTunes -> iTunes Store -> 购买、账单与兑换 -> "您的信用卡已被拒绝"消息。<br>步骤三：写上标题：比如内购报错“您的信用卡已被拒绝”，多次后报错“请联络iTunes支持人员以完成交易”。<br>步骤四：继续，登录账号。<br>步骤五：写上内容比如：“我的信用卡号：XXXXXXXXXXX，请快点解决，很急”，提交就行了，大概2~5个工作日就能解锁。</span>',
            'pay_tips_content_2': '<span class = "pay_tips_header">2、充值时，提示：“ipa buy failed”解决方案:</span><br><span class = "pay_tips_content">因为你越狱并且装了ipa crark或ipa free插件。<br>只要你在cydia里卸载ipa crark，或关闭ipa free就行。<br>如果你没越狱，那可能是服务器验证报错，需要联系客服询问。</span>',
            'pay_tips_content_3': '<span class = "pay_tips_header">3、充值时，提示：“你尚未购买此游戏”解决方案：</span><br><span class = "pay_tips_content">因为你是越狱用户，游戏并不是从app下载并安装的，而是通过类似同步推软件安装。<br>最简单的办法是ipad和iphone设备不用任何操作，连接电脑并通过电脑上的itunes软件，点击下载此游戏，就认为购买了。</span>',
            'pay_tips_content_4': '<span class = "pay_tips_header">4、iOS7升级后，无法正常充值或购买游戏内道具解决方案：</span><br><span class = "pay_tips_content">方法一：首先，建议您从设备的【设置】-【itunes&App store】用苹果ID登陆。<br>然后，强制重新启动设备。同时按住home键和电源键，直到看到苹果的标志，等待机子自己重启。<br>方法二： 注销App Store，重启设备，然后重新登陆账号。<br>方法三：修改系统默认日期与时间，把系统默认的时间改成与库比蒂诺时间一致。<br>（库比蒂诺为苹果电脑的全球总公司所在地，位于美国旧金山）。</span>',
            'play_minis': '打开扭蛋',
            'price_title': '{{name}}商城售价：',
            'rm_not_enough': '主公~您的元宝不足~',
            'shilianchou': '十连扭',
            'shilianchou-title': '十连扭更划算，必得五星卡！',
            'spend_rm': '消耗元宝：',
            'spend_vm': '消耗银币：',
            'sure_buy': '确定购买',
            'tavern_update_time': '酒馆更新倒计时 %hhu %mmu %ssu',
            'tehui_bought': '已购买该礼包~',
            'tehui_endTime': '剩余时间：{{:time}}',
            'tehui_title': '限时充值特惠，每项限购一次！',
            'think_again': '再想想',
            'wait_buy_result': '待收货',
            'warm_tips': '温馨提示',
        },
    };
    w.Mojo.lang['appraise'] = {
        'zh_tw': {
            'appraise_btn_txt': '去評論',
            'appraise_desc': '主公~去App Store给五星評論，您將獲得：',
            'appraise_info1': '隨機將領卡一張',
            'appraise_info2': '最少有四星將領哦~',
            'appraise_info3': '評論後，獎勵將在24小時内發放',
            'appraise_tip': '不再彈出提示',
            'appraise_title': '評五星送大禮',
        },
        'zh_cn': {
            'appraise_btn_txt': '去评价',
            'appraise_desc': '主公~去App Store给五星评价，您将获得：',
            'appraise_info1': '随机将领卡一张',
            'appraise_info2': '保底四星将领哦~',
            'appraise_info3': '评价后，奖励将在24小时内发放',
            'appraise_tip': '不再弹出提示',
            'appraise_title': '评五星送大礼',
        },
    };
    w.Mojo.lang['fuben'] = {
        'zh_tw': {
            'atLeastOne': '',
            'attack_bonus': '攻擊加成：{{:attack_bonus}}%',
            'award': '獎勵',
            'be_restraint': '被克',
            'buy': '付費購買',
            'challenge': '挑戰',
            'choose_award': '恭喜主公，我軍擊敗了【{{:boss_name}}】！<br>以下獎勵二選一：',
            'choose_one': '（獎品二選一）',
            'choose_team_friends': '協助戰鬥的好友（{{:current}}/{{:total}}）',
            'day': '天',
            'defeat': '戰敗',
            'defence': '【防禦】',
            'dont_get_award_content': '報~主公~前方有疑似獎勵的東東~是否在重新闖關前，先去領獎？',
            'dont_get_award_title': '未領取獎勵',
            'for_help': '又吃鱉啦~幹嘛不組幾個強力的好友來幫忙呢？',
            'for_sale': '<span>售價：</span>',
            'free': '免費',
            'friend': '好友',
            'fuben': '闖關',
            'fuben_assistant_alert1': '',
            'fuben_assistant_alert2': '',
            'fuben_assistant_alert3': '',
            'fuben_assistant_auto_end2': '',
            'fuben_assistant_auto_end3': '',
            'fuben_assistant_auto_end4': '',
            'fuben_assistant_auto_end_alert': '',
            'fuben_assistant_auto_start': '',
            'fuben_assistant_buyCard': '',
            'fuben_assistant_content1': '',
            'fuben_assistant_content2': '',
            'fuben_assistant_content3': '',
            'fuben_assistant_content4': '',
            'fuben_assistant_end': '',
            'fuben_assistant_log0': '',
            'fuben_assistant_log1': '',
            'fuben_assistant_log2': '',
            'fuben_assistant_log3': '',
            'fuben_assistant_prompt_title': '',
            'fuben_assistant_start': '',
            'fuben_assistant_title': '',
            'fuben_assistant_title1': '',
            'fuben_assistant_title2': '',
            'fuben_assistant_title3': '',
            'fuben_award_content1': '恭喜主公，我軍擊敗了【{{:boss_name}}】，【{{:entity_name}}】仰慕主公，前來投奔~',
            'fuben_award_content2': '恭喜主公，我軍擊敗了【{{:boss_name}}】，並繳獲了【{{:entity_name}}】～',
            'fuben_award_content3': '恭喜主公，我軍擊敗了【{{:boss_name}}】，打開神秘禮物後獲得【{{:entity_name}}】～',
            'fuben_award_title': '闖關獎勵',
            'fuben_entity_excess': '',
            'fuben_expire_log': '',
            'fuben_expire_tip': '',
            'fuben_not_fuben': '',
            'fuben_settings': '',
            'fuben_settings_title': '',
            'fuben_view': '',
            'get_for_free': '免費獲得',
            'go_award': '去領獎',
            'go_to_clean': '去剿匪',
            'has_enemy_content': '報~主公~前方仍有敵軍餘黨，是否在重新闖關前，剿滅他們奪取獎勵？',
            'has_enemy_title': '尚有敵軍',
            'hour': '時',
            'in': '進入',
            'in_cd': '冷卻中：',
            'in_fuben': '闖關中：',
            'in_fuben_not_setting': '',
            'is_enough': '主公~{{:count}}個強力好友就夠了~',
            'less_level': '主公~您的級別不足哦~',
            'minute': '分',
            'need_to_upgrade': '主公~您的等級不足哦~',
            'no friends': '主公～我們現在還沒有盟友，速速去加上幾個好友吧～人多好辦事！',
            'no_friends': '點擊【組隊】按鈕選擇協助戰鬥的好友',
            'none': '無',
            'refresh_time': '闖關時間結束後才能再次闖關',
            'restart': '重新闖關',
            'restraint': '克制',
            'second': '秒',
            'select_fuben': '',
            'skills': '【技能】<br>',
            'team': '組隊',
            'team_add': '好友組隊加成：{{:team_add}}%',
            'unlock_level': '解鎖級別：',
            'wait_to_do': '主公~稍等一下再執行該任務吧~',
        },
        'zh_cn': {
            'atLeastOne': '请至少选择一个关卡！',
            'attack_bonus': '攻击加成：{{:attack_bonus}}%',
            'award': '领奖',
            'be_restraint': '被克',
            'buy': '付费购买',
            'challenge': '挑战',
            'choose_award': '恭喜主公，我军击败了【{{:boss_name}}】！<br>以下奖励二选一：',
            'choose_one': '（奖品二选一）',
            'choose_team_friends': '协助战斗的好友（{{:current}}/{{:total}}）',
            'day': '天',
            'defeat': '战败',
            'defence': '【防御】',
            'dont_get_award_content': '报～主公～前方有疑似奖励的东东～是否遗弃它们，重新开始闯关？',
            'dont_get_award_title': '未领取奖励',
            'for_help': '又吃败仗了，为啥不组几个强力的好友来帮忙呢？',
            'for_sale': '<span>售价：</span>',
            'free': '免费',
            'friend': '好友',
            'fuben': '闯关',
            'fuben_assistant_alert1': '主公~您的闯关已全部完成~',
            'fuben_assistant_alert2': '主公~您点的太快啦~休息几秒再点吧~',
            'fuben_assistant_alert3': '主公~闯关小助手正在帮您自动完成闯关哦~',
            'fuben_assistant_auto_end2': '<div class="fontWait bottomTitle">自动闯关已完成，<span class="redfont">请主公手动领取各关奖励</span>。</div>',
            'fuben_assistant_auto_end3': '<div class="fontWait bottomTitle">已手动中止自动闯关。</div>',
            'fuben_assistant_auto_end4': '<div class="fontWait bottomTitle">自动闯关已经停止。</div>',
            'fuben_assistant_auto_end_alert': '主公~闯关小助手已帮您完成本次闯关了哦~',
            'fuben_assistant_auto_start': '<div class="fontWait">自动闯关初始化中......</div>',
            'fuben_assistant_buyCard': '购买礼包',
            'fuben_assistant_content1': '<span class="assist_dlg_title">主公~欢迎使用闯关小助手~</span><br><span class="assist_content">点击【开启】后，闯关小助手可以在主公做其它事时<span class="redfont">（包括主公不在线哦~）</span>，帮助主公自动完成闯关哦~<br>点击【设置】可设置要自动闯关的副本。注：自动闯关完成后需要主公手动去领取每关的BOSS奖励哦～</span>',
            'fuben_assistant_content2': '闯关小助手只有可领取日进斗金的主公才能使用哦~小助手可以帮助主公自动完成闯关（即便主公不在线）~',
            'fuben_assistant_content3': '主公~您本次还有闯关未做完哦，您确定刷新闯关吗？',
            'fuben_assistant_content4': '<div class="fontWait bottomTitle">退出势力，闯关中止。</div>',
            'fuben_assistant_end': '中止',
            'fuben_assistant_log0': '<div class="p"><div class="time"><span>{{:time}}</span> </div><div>执行：{{:task_name}} ({{:percent}}%)</div></div>',
            'fuben_assistant_log1': '<div class="p"><div class="time"><span>{{:time}}</span> </div><div>执行：{{:task_name}} ({{:percent}}%)</div><div class="gets">获得：{{:gets}}</div></div>',
            'fuben_assistant_log2': '<div class="p"><div class="time"><span>{{:time}}</span> </div><div>执行：{{:task_name}} <span class="redfont">（失败）</span></div></div>',
            'fuben_assistant_log3': '<div class="p"><div class="time"><span>{{:time}}</span> </div><div>执行：{{:task_name}} <span class="redfont">（精力不足）</span></div></div>',
            'fuben_assistant_prompt_title': '温馨提示',
            'fuben_assistant_start': '开启',
            'fuben_assistant_title': '闯关小助手',
            'fuben_assistant_title1': '<span class="assist_title">闯关小助手：</span><span>可以自动完成闯关~</span>',
            'fuben_assistant_title2': '<span class="assist_title">闯关小助手：</span><span class="assis_state_in">开启中</span>',
            'fuben_assistant_title3': '<span class="assist_title">闯关小助手：</span><span class="assis_state_out">未开启</span>',
            'fuben_award_content1': '恭喜主公，我军击败了【{{:boss_name}}】，【{{:entity_name}}】仰慕主公，前来投奔～',
            'fuben_award_content2': '恭喜主公，我军击败了【{{:boss_name}}】，并缴获了【{{:entity_name}}】～',
            'fuben_award_content3': '恭喜主公，我军击败了【{{:boss_name}}】，打开神秘礼物后获得【{{:entity_name}}】～',
            'fuben_award_title': '闯关奖励',
            'fuben_entity_excess': '您的卡牌已满，中止自动闯关。',
            'fuben_expire_log': '使用权限已到期，自动闯关中止。',
            'fuben_expire_tip': '使用权限已到期。',
            'fuben_not_fuben': '正在自动闯关中，不能重新闯关~',
            'fuben_settings': '设置',
            'fuben_settings_title': '闯关设置',
            'fuben_view': '查看',
            'get_for_free': '免费获得',
            'go_award': '去领奖',
            'go_to_clean': '去清剿',
            'has_enemy_content': '报～主公～前方仍有敌军残留，是否放他们一马，重新开始闯关？',
            'has_enemy_title': '未扫清敌军',
            'hour': '时',
            'in': '进入',
            'in_cd': '冷却中：',
            'in_fuben': '闯关中：',
            'in_fuben_not_setting': '自动闯关时无法进行设置哦~',
            'is_enough': '主公～{{:count}}个强力好友就够了～',
            'less_level': '主公～您的级别不足哦～',
            'minute': '分',
            'need_to_upgrade': '主公～我们还是先修炼修炼再来挑战吧～',
            'no friends': '主公～我们现在还没有盟友，速速去加上几个好友吧～人多好办事儿！',
            'no_friends': '点击【组队】按钮选择协助战斗的好友',
            'none': '无',
            'refresh_time': '闯关时间结束后才能再次闯关',
            'restart': '重新闯关',
            'restraint': '克制',
            'second': '秒',
            'select_fuben': '选择想要自动闯荡的关卡',
            'skills': '【技能】<br>',
            'team': '组队',
            'team_add': '好友组队加成：{{:team_add}}%',
            'unlock_level': '解锁级别：',
            'wait_to_do': '主公～等会儿再执行该任务吧～',
        },
    };
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.Broadcast = w.Mojo.Object.extend({
        clsname: function () {
            return "com.Broadcast";
        },
        init: function (options) {
            this._super('com-broadcast', options);
            this.element().addClass('mojo-com-broadcast');
            this.element().append('<div class="icon"></div>');
            this._wrapper = $('<div class="wrapper"></div>').appendTo(this.element());
            var self = this;
            this._interval = w.setInterval(function () {
                self.sync();
            }, 300000);
            this._index = 0;
            this._run();
        },
        _run: function () {
            if (this._data == undefined || this._data == null || this._data.length == 0) {
                this._running = false;
                this.sync();
            } else {
                this._running = true;
                var self = this;
                if (this._index >= this._data.length) this._index = 0;
                this._current = this._data[this._index];
                var item = this._genItem(this._current);
                this["_display" + this._options.display](item);
            }
        },
        _display0: function (item) {
            var self = this;
            item.animate({
                left: -item.width(),
            }, {
                duration: (item.width() + self._wrapper.width()) * 40,
                complete: function () {
                    $(this).remove();
                    self._index = parseInt((self._index + 1) % self._data.length);
                    self._run();
                },
            });
        },
        _display1: function (item) {
            var self = this;
            item.animate({
                top: "-=" + self._wrapper.height(),
            }, {
                duration: 1000,
                complete: function () {
                    if ($(this).position().top + $(this).height() > self._wrapper.height()) {
                        setTimeout(function () {
                            self._display1(item);
                        }, 2000);
                    } else {
                        $(this).delay(3000).animate({
                            opacity: 0,
                        }, {
                            duration: 1000,
                            complete: function () {
                                $(this).remove();
                                self._index = parseInt((self._index + 1) % self._data.length);
                                self._run();
                            }
                        });
                    }
                },
            });
        },
        _genItem: function (data) {
            if (this._options.display == 0) {
                return $('<div class="item">' + data.content + '</div>').appendTo(this._wrapper).css('left', this._wrapper.width()).css('top', 0);
            }
            return $('<div class="item">' + data.content + '</div>').appendTo(this._wrapper).css('left', 0).css('top', this._wrapper.height());
        },
        _getDefaultOptions: function () {
            return {
                display: 1,
            };
        },
        sync: function () {
            var self = this;
            var data = Mojo.cache.get("broadcast");
            if (data != undefined) {
                self._data = data;
                if (!self._running) {
                    self._run();
                }
            } else {
                Mojo.ajax('/message/broadcast', {
                    start: 0,
                    count: 1,
                }, function (result) {
                    if (result.errorCode == 0) {
                        self._data = result.data;
                        Mojo.cache.set("broadcast", self._data, 300);
                        if (!self._running) {
                            self._run();
                        }
                    }
                });
            }
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.ErrorDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.ErrorDialog";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-errdlg');
            var self = this;
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            this._content.html(this._options.errorMsg);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('ui', 'Close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: 'Error',
                errorCode: 0,
                errorMsg: '',
                handle: $.noop,
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.BaseProfileDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.BaseProfileDialog";
        },
        init: function (options) {
            this._super('com-profile-base-dialog', options);
            this.element().addClass('mojo-com-profile-base-dialog');
            var self = this;
            this._interval = w.setInterval(function () {
                self._refresh();
            }, 1000);
            this._tips = $('<div class="paragraph"></div>').appendTo(this._content);
            this._refresh();
            this._scroll = new Mojo.ui.Scroll(undefined, this._content, {
                direction: 2,
            });
            this.element().append(this._scroll.element());
            this._footer.append((new Mojo.ui.Button(undefined, {
                special: 'button-big-red',
                text: Mojo.utils.locale('common', 'Go Statistics'),
                click: function () {
                    Mojo.app.redirect('/statistics', {}, 'event', '04_022');
                },
            })).element());
            this._footer.append((new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                dataProvider: $.noop,
                title: Mojo.utils.locale('ui', 'Base Informations'),
                close: function () {
                    w.clearInterval(self._interval);
                }
            });
        },
        _refresh: function () {
            var data = this._options.dataProvider();
            this._tips.empty();
            this._genTooltip(data);
        },
        _genTooltip: function (data) {
            new Mojo.ui.Label(undefined, {
                classes: ['name'],
                text: Mojo.utils.locale('common', 'name') + data.name
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['playid'],
                text: Mojo.utils.locale('common', 'playerId') + data.id
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['level'],
                text: Mojo.utils.locale('common', 'level') + data.level
            }).element().appendTo(this._tips);
            if (data.xp > data.next_xp) {
                data.xp = data.next_xp;
            }
            new Mojo.ui.Label(undefined, {
                classes: ['xp'],
                text: Mojo.utils.locale('common', 'xp') + data.xp + "/" + data.next_xp
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['rm'],
                text: Mojo.utils.locale('common', 'rm') + data.rm
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['vm'],
                text: Mojo.utils.locale('common', 'vm') + data.vm
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['grain'],
                text: Mojo.utils.locale('common', 'grain') + data.grain
            }).element().appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['ep'],
                text: Mojo.utils.locale('common', 'ep') + data.ep + "/" + data.energy
            }).element().appendTo(this._tips);
            var time4ep = Mojo.utils.locale('common', 'time for next ep') + this._genEpRestore(data) + "<br>" + Mojo.utils.locale('common', 'time for all ep') + this._genEpFullRestore(data) + (data.ep_percent > 0 ? ('<br>' + Mojo.utils.locale('common', 'acceleration for restore ep') + data.ep_percent + "%") : '');
            $("<span class='time-for-ep'></span>").appendTo(this._tips).html(time4ep);
            new Mojo.ui.Label(undefined, {
                classes: ['sp'],
                text: Mojo.utils.locale('common', 'sp') + data.sp + "/" + data.stamina
            }).element().appendTo(this._tips);
            var time4sp = Mojo.utils.locale('common', 'time for next sp') + this._genSpRestore(data) + "<br>" + Mojo.utils.locale('common', 'time for all sp') + this._genSpFullRestore(data) + (data.sp_percent > 0 ? ('<br>' + Mojo.utils.locale('common', 'acceleration for restore sp') + data.sp_percent + "%") : '');
            $("<span class='time-for-sp'></span>").html(time4sp).appendTo(this._tips);
            new Mojo.ui.Label(undefined, {
                classes: ['avoid_war_time'],
                text: Mojo.utils.locale('common', 'avoid war time', {
                    avoid_war_time: Mojo.utils.formatTime(data.avoid_war_time)
                })
            }).element().appendTo(this._tips);
            if (data != undefined && data.buffs != undefined && data.buffs.title != undefined && data.buffs.title != "") {
                new Mojo.ui.Label(undefined, {
                    classes: ['userbuff'],
                    text: Mojo.utils.locale('common', 'userbuff') + data.buffs.title,
                }).element().appendTo(this._tips);
                var userbuffs = '';
                $.each(data.buffs.list, function (i, u) {
                    userbuffs += '&#149' + u.name + '：' + u.desc + "</br>";
                });
                $("<span class='userbuffs'></span>").html(userbuffs).appendTo(this._tips);
            }
        },
        _genSpRestore: function (data) {
            var str = undefined;
            if (data.sp == data.stamina) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime(data.sp_second);
            }
            return str;
        },
        _genSpFullRestore: function (data) {
            var str = undefined;
            if (data.sp == data.stamina) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime((data.stamina - data.sp - 1) * data.sp_restore_pp + data.sp_second);
            }
            return str;
        },
        _genEpRestore: function (data) {
            var str = undefined;
            if (data.ep == data.energy) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime(data.ep_second);
            }
            return str;
        },
        _genEpFullRestore: function (data) {
            var str = undefined;
            if (data.ep == data.energy) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime((data.energy - data.ep - 1) * data.ep_restore_pp + data.ep_second);
            }
            return str;
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.BaseProfile = w.Mojo.Object.extend({
        clsname: function () {
            return "com.BaseProfile";
        },
        init: function (options) {
            this._super('com-profile-base', options);
            this.element().addClass('mojo-com-profile-base');
            this.element().append('<div class="left"></div><div class="center"></div><div class="right"></div>');
            this._addLeft();
            this._addCenter();
            this._addRight();
            var self = this;
            this._data = {};
            this._syncInterval = w.setInterval(function () {
                self.sync();
            }, 60000);
            this._restoreInterval = w.setInterval(function () {
                self._calcEp();
                self._calcSp();
                self._calcAvoidWarTime();
            }, 1000);
            this.element().click(function () {
                Mojo.track.onEvent('04_021');
                (this._bpdlg = new Mojo.com.BaseProfileDialog({
                    dataProvider: function () {
                        return self._data;
                    }
                })).open();
                this._bpdlg._scroll.refresh();
            });
        },
        _getDefaultOptions: function () {
            return {
                refreshCallback: $.noop,
            };
        },
        _addLeft: function () {
            var left = this.element().find('.left');
            this._name = $('<div class="name"></div>').appendTo(left);
            this._level = $('<div class="level">0</div>').appendTo(left);
            this._xp = new Mojo.ui.Progress(undefined, {
                classes: ['xp'],
                labelTemplate: '#{divide}',
            });
            this._xp.element().appendTo(left);
            $('<div class="xp-border"></div>').appendTo(left);
        },
        _addCenter: function () {
            this._rm = new Mojo.ui.Label(undefined, {
                classes: ['rm'],
                text: '0',
            });
            this._vm = new Mojo.ui.Label(undefined, {
                classes: ['vm'],
                text: '0',
            });
            this.element().find('.center').append(this._rm.element()).append(this._vm.element());
        },
        _addRight: function () {
            this._ep = new Mojo.ui.Progress(undefined, {
                classes: ['ep'],
                labelTemplate: '#{divide}',
            });
            this._sp = new Mojo.ui.Progress(undefined, {
                classes: ['sp'],
                labelTemplate: '#{divide}',
            });
            this.element().find('.right').append(this._ep.element()).append($('<div class="ep-border"></div>')).append(this._sp.element()).append($('<div class="sp-border"></div>'));
        },
        _refresh: function () {
            var data = this._data;
            this._name.html(data.name);
            this._level.html(data.level);
            if (parseInt(data.xp) > parseInt(data.next_xp)) {
                data.xp = data.next_xp;
            }
            this._xp.value({
                value: data.xp,
                max: data.next_xp
            });
            this._rm.text(data.rm);
            this._vm.text(data.vm);
            this._ep.value({
                value: data.ep,
                max: data.energy
            });
            this._sp.value({
                value: data.sp,
                max: data.stamina
            });
            this._options.refreshCallback(data);
        },
        epRefresh: function (ep) {
            this._data.ep = ep;
            this._ep.value({
                value: this._data.ep,
                max: this._data.energy
            });
        },
        data: function (value) {
            if (value == undefined) {
                return this._data;
            }
            this._data = $.extend(true, this._data, value);
            this._refresh();
            if (Mojo.app.data.needLoginStatus == true) {
                if (Mojo.app.data.event == undefined)
                    Mojo.app.data.event = null;
                if (value.event != null) {
                    Mojo.app.data.event = value.event;
                    value.event = null;
                }
            }
            if (Mojo.app.data.needLoginStatus == false) {
                if (value.event == null) {
                    value.event = Mojo.app.data.event;
                    Mojo.app.data.event = undefined;
                    Mojo.app.data.needLoginStatus = undefined;
                }
            }
            if (!Mojo.utils.isNone(value.event)) {
                var evt = value.event;
                var t = evt.type;
                if (t == 15) {
                    var content = $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'forcewar_notice_members1', {
                        title: evt.title,
                        ownername: evt.userName,
                        forcename: evt.opponentForceName
                    }));
                    var dlg = new Mojo.ui.Dialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: Mojo.utils.locale('common', 'force_message'),
                        content: content
                    });
                    new Mojo.ui.Button(undefined, {
                        special: "button-big-red",
                        text: Mojo.utils.locale('ui', 'In War'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 2
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('ui', 'View More'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 5
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    dlg.open();
                } else if (t == 11) {
                    var content = $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'forcewar_win_grain', {
                        forcename: evt.opponentForceName,
                        grain: evt.grainCount
                    }));
                    var dlg = new Mojo.ui.Dialog(undefined, {
                        title: Mojo.utils.locale('common', 'force_message'),
                        content: content
                    });
                    new Mojo.ui.Button(undefined, {
                        special: "button-big-red",
                        text: Mojo.utils.locale('ui', 'View More'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 5
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('ui', 'Close'),
                        click: function () {
                            dlg.close();
                        }
                    }).element().appendTo(dlg._footer);
                    dlg.open();
                } else if (t == 13) {
                    var content = $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'forcewar_lose_grain', {
                        forcename: evt.opponentForceName,
                        grain: evt.grainCount
                    }));
                    var dlg = new Mojo.ui.Dialog(undefined, {
                        title: Mojo.utils.locale('common', 'force_message'),
                        content: content
                    });
                    new Mojo.ui.Button(undefined, {
                        special: "button-big-red",
                        text: Mojo.utils.locale('ui', 'Retaliate'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 2,
                                target_force_id: evt.attacker_id
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('ui', 'View More'),
                        click: function () {
                            Mojo.app.redirect('/force', {
                                index: 5
                            });
                        }
                    }).element().appendTo(dlg._footer);
                    dlg.open();
                } else if (t == 800 || t == 300 || t == 314 || t == 210 || t == 301 || t == 383 || t == 200) {
                    var dlg = new Mojo.com.CommonDialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: evt.header,
                        content: $('<div class="paragraph"></div>').html(evt.content),
                        leftBtnText: Mojo.utils.locale('ui', 'In War'),
                        leftBtnClick: function (that) {
                            that.close();
                            Mojo.app.redirect('/force', {
                                index: 2
                            });
                        },
                        rightBtnText: Mojo.utils.locale('common', 'close'),
                        rightBtnClick: function (that) {
                            that.close();
                        }
                    });
                    dlg.open();
                } else if (t == 81) {
                    var dlg = new Mojo.com.CommonDialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: evt.header,
                        content: $('<div class="paragraph"></div>').html(evt.content),
                        leftBtnText: Mojo.utils.locale('ui', 'In War2'),
                        leftBtnClick: function (that) {
                            that.close();
                            Mojo.app.redirect('/force', {
                                index: 7
                            });
                        },
                        rightBtnText: Mojo.utils.locale('common', 'close'),
                        rightBtnClick: function (that) {
                            that.close();
                        }
                    });
                    dlg.open();
                } else if (t == 91) {
                    var dlg = new Mojo.com.CommonDialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: evt.header,
                        content: $('<div class="paragraph"></div>').html(evt.content),
                        leftBtnText: Mojo.utils.locale('ui', 'In War'),
                        leftBtnClick: function (that) {
                            that.close();
                            Mojo.app.redirect('/force', {
                                index: 2
                            });
                        },
                        rightBtnText: Mojo.utils.locale('common', 'close'),
                        rightBtnClick: function (that) {
                            that.close();
                        }
                    });
                    dlg.open();
                } else if (t == 93) {
                    var dlg = new Mojo.com.CommonDialog(undefined, {
                        classes: ['mojo-com-forcemsgdlg'],
                        title: evt.header,
                        content: $('<div class="paragraph"></div>').html(evt.content),
                        leftBtnText: Mojo.utils.locale('ui', 'Retaliate'),
                        leftBtnClick: function (that) {
                            that.close();
                            Mojo.app.redirect('/force', {
                                index: 2,
                                refresh: 1,
                                target_city_id: 'xxx'
                            });
                        },
                        rightBtnText: Mojo.utils.locale('common', 'close'),
                        rightBtnClick: function (that) {
                            that.close();
                        }
                    });
                    dlg.open();
                }
            }
        },
        sync: function (isforce) {
            var self = this;
            Mojo.ajax('/player/profile', {}, function (result) {
                if (result.errorCode == 0) {
                    Mojo.app.baseProfileData = result.data;
                    Mojo.cache.set('userId', result.data.id);
                    Mojo.cache.set('guid', result.data.guid);
                    self.data(result.data);
                    if (result.data != undefined && Mojo.utils.isNone(result.data.army) == false && parseInt(result.data.army) != 0) {
                        Mojo.gap.buffCut(result.data.army);
                    }
                    if (result.data && result.data.couldLoginGift && Mojo.app.currentPage && Mojo.app.currentPage.checkLoginGift) {
                        if (Mojo.utils.getSomething("isNewPlayer") == 'yes' || Mojo.utils.getSomething("isNewPlayer") == 'tutorial' || Mojo.utils.getSomething("tutorial") == 'yes')
                            return;
                        Mojo.app.currentPage.checkLoginGift();
                    }
                    if (result.data.is_annouce_new == 1 && Mojo.app.currentPage._updateAnnouncementIcon instanceof Function) {
                        Mojo.app.currentPage._updateAnnouncementIcon(result.data);
                    }
                }
            });
            if (Mojo.app.battleAnimation() == undefined) {
                Mojo.ajax("/settings", {}, function (response) {
                    if (response.errorCode == 0) {
                        self._settingsData = {};
                        for (var item in response.data) {
                            var o = response.data[item];
                            self._settingsData[o.key] = {
                                value: o.value
                            };
                            for (var k in o) {
                                if (k != 'key' && k != 'value') {
                                    self._settingsData[o.key][k] = o[k];
                                }
                            }
                        }
                        if (self._settingsData['flash'] && self._settingsData['flash'].value) {
                            Mojo.app.battleAnimation(self._settingsData['flash'].value);
                        }
                    }
                });
            }
        },
        _calcEp: function () {
            if (this._data.ep < this._data.energy) {
                if (this._data.ep_second < 0) {
                    this._data.ep_second = this._data.ep_restore_pp;
                    return;
                }
                this._data.ep_second--;
                if (this._data.ep_second == 0) {
                    this._data.ep_second = this._data.ep_restore_pp;
                    this._data.ep++;
                    this._refresh();
                }
            }
        },
        _calcSp: function () {
            if (this._data.sp < this._data.stamina) {
                if (this._data.sp_second < 0) {
                    this._data.sp_second = this._data.sp_restore_pp;
                    return;
                }
                this._data.sp_second--;
                if (this._data.sp_second == 0) {
                    this._data.sp_second = this._data.sp_restore_pp;
                    this._data.sp++;
                    this._refresh();
                }
            }
        },
        _calcAvoidWarTime: function () {
            if (this._data.avoid_war_time > 0) {
                this._data.avoid_war_time--;
            }
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.LevelUpDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.LevelUpDialog";
        },
        init: function (data, fulldata, options) {
            this._data = data;
            this._fulldata = fulldata;
            this._BARRACKUPMAXLEVEL = 120;
            this._super(undefined, options);
            this.element().addClass('mojo-com-levelupdlg');
            this.element().addClass('mojo-com-levelupdlg-' + Mojo.app.data.userLanguage);
            this._addContent();
            this._addHandleButtons();
        },
        _getIOSMajorVersion: function () {
            var userAgent = window.navigator.userAgent;
            var result = userAgent.match(/iPhone OS (\d*)_/);
            if (!Mojo.utils.isNone(result)) {
                return result[1];
            }
            result = userAgent.match(/iPad OS (\d*)_/);
            if (!Mojo.utils.isNone(result)) {
                return result[1];
            }
            return undefined;
        },
        _addContent: function () {
            this._genTips();
            if (this._data.award.vm != undefined && this._data.award.vm != null) {
                this._bonus = $('<div class="bonus mojo-ui-label"></div>').appendTo(this._content.find('.paragraph'));
                this._bonus.append((new Mojo.ui.Label(undefined, {
                    classes: ['vm'],
                    text: this._data.award.vm
                })).element());
            }
            if (this._data.award.rm != undefined && this._data.award.rm != null) {
                this._bonus.append((new Mojo.ui.Label(undefined, {
                    classes: ['rm'],
                    text: this._data.award.rm
                })).element());
            }
        },
        _isDataChanged: function (attr) {
            if (attr && attr.length > 1) {
                return attr[0] != attr[1];
            }
            return false;
        },
        _genTips: function () {
            var _message = $('<div class="paragraph"></div>');
            new Mojo.ui.Label(undefined, {
                classes: ['level'],
                text: Mojo.utils.locale('common', 'level_up', {
                    'level': this._data.level[1]
                })
            }).element().appendTo(_message);
            new Mojo.ui.Label(undefined, {
                classes: ['base_attack'],
                text: Mojo.utils.locale('common', 'base_attack', {
                    'old': this._data.attack[0],
                    'new': this._data.attack[1]
                })
            }).element().appendTo(_message);
            new Mojo.ui.Label(undefined, {
                classes: ['base_defence'],
                text: Mojo.utils.locale('common', 'base_defence', {
                    'old': this._data.defence[0],
                    'new': this._data.defence[1]
                })
            }).element().appendTo(_message);
            new Mojo.ui.Label(undefined, {
                classes: ['max_energy'],
                text: Mojo.utils.locale('common', 'max_energy', {
                    'old': this._data.energy[0],
                    'new': this._data.energy[1]
                })
            }).element().appendTo(_message);
            if (this._isDataChanged(this._data.stamina)) {
                new Mojo.ui.Label(undefined, {
                    classes: ['max_stamina'],
                    text: Mojo.utils.locale('common', 'max_stamina', {
                        'old': this._data.stamina[0],
                        'new': this._data.stamina[1]
                    })
                }).element().appendTo(_message);
            }
            if (this._isDataChanged(this._data.maxFriendsNum)) {
                new Mojo.ui.Label(undefined, {
                    classes: ['max_friend'],
                    text: Mojo.utils.locale('common', 'max_friends_count', {
                        'old': this._data.maxFriendsNum[0],
                        'new': this._data.maxFriendsNum[1]
                    })
                }).element().appendTo(_message);
            }
            if (this._isDataChanged(this._data.entity)) {
                new Mojo.ui.Label(undefined, {
                    classes: ['entity'],
                    text: Mojo.utils.locale('common', 'max_entity', {
                        'old': this._data.entity[0],
                        'new': this._data.entity[1]
                    })
                }).element().appendTo(_message);
            }
            if (this._isDataChanged(this._data.unlockSlotNum)) {
                new Mojo.ui.Label(undefined, {
                    classes: ['unlock_slot'],
                    text: Mojo.utils.locale('common', 'unlock_slot_count', {
                        'old': this._data.unlockSlotNum[0],
                        'new': this._data.unlockSlotNum[1]
                    })
                }).element().appendTo(_message);
            }
            if (!Mojo.utils.isNone(this._data.unlockFuben)) {
                new Mojo.ui.Label(undefined, {
                    classes: ['unlock_fuben'],
                    text: Mojo.utils.locale('common', 'unlock_fuben_name', {
                        'name': this._data.unlockFuben
                    })
                }).element().appendTo(_message);
            }
            var appendAwardTitle = false;
            var award = this._data.award;
            if (!Mojo.utils.isNone(award.vm) || !Mojo.utils.isNone(award.rm)) {
                new Mojo.ui.Label(undefined, {
                    classes: ['levelup_award'],
                    text: Mojo.utils.locale('common', 'gain_levelup_award')
                }).element().appendTo(_message);
                appendAwardTitle = true;
            }
            _message.appendTo(this._content);
        },
        _doWeiboBind: function () {
            Mojo.app.redirect('/newplayer/sinaAuth?state=bind');
        },
        _addHandleButtons: function () {
            var self = this;
            if (self._data.level[1] >= 20 && self._data.level[1] % 5 == 0 && !self._fulldata.data.isbind && !Mojo.app.isNd) {
                self._needBind = true;
            }
            if (self._data && self._data.weibo) {
                self._data.weibo.btnClick = function () {
                    self.close();
                    if (self._needBind) {
                        self._showGoBindDialog();
                    }
                };
            }
            self._data.weibo.showGoBindDialog = function () {
                if (self._needBind) {
                    self._showGoBindDialog();
                }
            };
            var weiboBind = self._fulldata.data.weiboBind || false;
            self._data.weibo = self._data.weibo || {};
            self._data.weibo.weiboBind = weiboBind;
            self._data.weibo.level = self._data.level[1];
            var platformBtn = new Mojo.com.PlatformButton(undefined, self._data.weibo, function () {
                if (self._data.level[1] == self._BARRACKUPMAXLEVEL) {
                    self._showActiveBarrackDialog();
                }
            });
            self._footer.prepend(platformBtn.element());
            this._footer.append((new Mojo.ui.Button('close-btn', {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                    if (self._data.level[1] == self._BARRACKUPMAXLEVEL) {
                        self._showActiveBarrackDialog();
                    }
                    if (self._needBind) {
                        self._showGoBindDialog();
                    }
                }
            })).element());
        },
        _showActiveBarrackDialog: function () {
            var dlg = new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('common', 'barrack_active_dlg_title'),
                content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'barrack_active_dlg_content')),
                leftBtnText: Mojo.utils.locale('common', 'go_look'),
                leftBtnClick: function () {
                    Mojo.app.redirect('/package', {
                        selected: -1
                    });
                    dlg.close();
                },
                rightBtnText: Mojo.utils.locale('common', 'close'),
                rightBtnClick: function () {
                    dlg.close();
                }
            });
            dlg.open();
        },
        _showGoBindDialog: function () {
            var self = this;
            self._needBind = false;
            setTimeout(function () {
                var dlg = new Mojo.com.CommonDialog(undefined, {
                    title: Mojo.utils.locale('common', 'friendly_tip'),
                    content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'bind_tip3')),
                    leftBtnText: Mojo.utils.locale('weibo', 'go bind'),
                    leftBtnClick: function () {
                        dlg.close();
                        Mojo.app.redirect('/settings', {
                            selected: 1
                        });
                    },
                });
                dlg.open();
            }, 500);
        },
        _showFiveStarDialog: function () {
            var self = this;
            var isOpenUrlSupport = Mojo.utils.isOpenUrlAvailable();
            if (!Mojo.app.isNd && self._data.showFiveStarCommentActivity && isOpenUrlSupport) {
                Mojo.track.onEvent('101_001');
                self._openFiveStarDialog();
            }
        },
        _openFiveStarDialog: function () {
            var self = this;
            self._flag = false;
            var fiveStarDlg = new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('appraise', 'appraise_title'),
                classes: ['five-star-dialog'],
                leftBtnText: Mojo.utils.locale('appraise', 'appraise_btn_txt'),
                leftBtnClick: function (that) {
                    Mojo.track.onEvent('101_002');
                    Mojo.ajax('/gameactivity/fivestarcomment', {
                        agree: 1
                    }, function (resp) {
                        that.close();
                        var url = 'itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=';
                        if (Mojo.gap.device == 'ipad') {
                            url = url + '527515340';
                        } else {
                            url = url + '500601105';
                        }
                        var dlg = new Mojo.ui.Dialog(undefined, {
                            title: Mojo.utils.locale('common', 'tips'),
                            content: $('<div class="tip"></div>').html(Mojo.utils.locale('gameactivity', 'five_star_agree', {
                                '__default__': '请主公稍等，24小时内系统会随即奖励一张四星卡发放到您的卡牌包中，祝您游戏愉快！'
                            })),
                            close: function () {
                                Mojo.gap.openurl(url);
                            }
                        });
                        (new Mojo.ui.Button(undefined, {
                            text: Mojo.utils.locale('common', 'ok'),
                            click: function () {
                                dlg.close();
                            }
                        })).element().appendTo(dlg._footer);
                        dlg.open();
                    }, {
                        showWait: true
                    });
                },
                rightBtnText: Mojo.utils.locale('common', 'close'),
                rightBtnClick: function (that) {
                    that.close();
                },
                close: function () {
                    Mojo.track.onEvent('101_003');
                }
            });
            var paragraph = $('<div class="paragraph"></div>').appendTo(fiveStarDlg._content);
            var desc = $('<div class="desc"></div>').html(Mojo.utils.locale('appraise', 'appraise_desc')).appendTo(paragraph);
            var imgborder = $('<div class="img-border"></div>').appendTo(paragraph);
            var img = $('<div class="img"></div>').appendTo(imgborder);
            var info1 = $('<div class="info1"></div>').html(Mojo.utils.locale('appraise', 'appraise_info1')).appendTo(paragraph);
            var info2 = $('<div class="info2"></div>').html(Mojo.utils.locale('appraise', 'appraise_info2')).appendTo(paragraph);
            var info3 = $('<div class="info3"></div>').html(Mojo.utils.locale('appraise', 'appraise_info3')).appendTo(paragraph);
            fiveStarDlg.open();
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                noTitle: true,
                close: function () {
                    self._showFiveStarDialog();
                },
                zIndex: 1101
            });
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.CommonDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.CommonDialog";
        },
        init: function (id, options) {
            this._super(id, options);
            this.element().addClass("mojo-com-commondialog");
            this.leftButton = undefined;
            this.rightButton = undefined;
            this._addButtons();
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                leftBtnText: undefined,
                leftBtnDisabled: false,
                leftBtnClick: undefined,
                leftBtnDisabledClick: undefined,
                rightBtnText: undefined,
                rightBtnDisabled: false,
                rightBtnClick: undefined,
                rightBtnDisabledClick: undefined
            });
        },
        _addButtons: function () {
            var self = this;
            if (self._options.leftBtnText) {
                self.leftButton = new Mojo.ui.Button(undefined, {
                    text: self._options.leftBtnText,
                    disabled: self._options.leftBtnDisabled,
                    special: "button-big-red",
                    click: function () {
                        if (self._options.leftBtnClick instanceof Function) {
                            self._options.leftBtnClick(self);
                        }
                    },
                    disableClick: function () {
                        if (self._options.leftBtnDisabledClick instanceof Function) {
                            self._options.leftBtnDisabledClick(self);
                        }
                    }
                });
                self.leftButton.element().appendTo(self._footer);
            }
            if (self._options.rightBtnText) {
                self.rightButton = new Mojo.ui.Button(undefined, {
                    text: self._options.rightBtnText,
                    disabled: self._options.rightBtnDisabled,
                    click: function () {
                        if (self._options.rightBtnClick instanceof Function) {
                            self._options.rightBtnClick(self);
                        }
                    },
                    disableClick: function () {
                        if (self._options.rightBtnDisabledClick instanceof Function) {
                            self._options.rightBtnDisabledClick(self);
                        }
                    }
                });
                self.rightButton.element().appendTo(self._footer);
            }
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.page = w.Mojo.page || {};
    w.Mojo.page.FbMission = w.Mojo.Page.extend({
        clsname: function () {
            return "page.FbMission";
        },
        init: function (fb_id, fb_refresh) {
            this._super('page-fbmission', {
                baseProfile: true
            });
            this._fbId = fb_id;
            this._fbRefresh = fb_refresh;
            this._addFbTaskList();
        },
        _addFbTaskList: function () {
            var self = this;
            this._taskList = new Mojo.com.FbTaskList({
                fb_id: self._fbId,
                fb_refresh: self._fbRefresh,
                clickFuben: function () {
                    Mojo.app.redirect('/fb');
                },
                afterDoTask: function (data, result) {
                    self.baseProfile.data(data.player);
                },
                onListRefresh: function () {},
                refreshProfile: function (data) {
                    self.baseProfile.data(data);
                },
                getTeam: function (data, dlg) {
                    self._getTeam(data, dlg);
                },
            });
            this.element().append(this._taskList.element());
        },
        _getTeam: function (data, dlg) {
            var self = this;
            self._tmpdlg = dlg;
            self._taskList.hide();
            if (self._team == undefined || self._team == null) {
                self._teamData = data;
                self._team = new Mojo.com.Team(self._teamData, {
                    callback: function (ids) {
                        self._team.element().hide();
                        self._taskList.show();
                        var arr = ids.split(',');
                        var old = [];
                        if (self._teamData != undefined && self._teamData.crew != undefined) {
                            for (var i = 0; i < self._teamData.crew.length; i++) {
                                old.push(self._teamData.crew[i].id);
                            }
                        }
                        if (old.sort().toString() == arr.sort().toString()) {
                            self._tmpdlg.show();
                        } else {
                            Mojo.ajax('/fuben/changeTeam', {
                                crew: ids,
                            }, function (result) {
                                if (result.errorCode == 0) {
                                    self._teamData = result.data.team;
                                    self._tmpdlg.update(result.data);
                                    self._tmpdlg.show();
                                }
                            }, function () {}, {
                                showWait: true
                            });
                        }
                    },
                });
                self.element().append(self._team.element());
            } else {
                self._team.element().show();
            }
        },
        _switchToTaskList: function (sid) {
            this._taskList.show();
            this._taskList.switchTo(sid);
        },
        load: function () {
            this._super();
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FbTaskList = w.Mojo.ui.ListPanel.extend({
        clsname: function () {
            return "com.FbTaskList";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-fbtasklist');
            this._addNavigator();
        },
        _addNavigator: function () {
            var self = this;
            this._fbBtn = new Mojo.ui.Button('btn-fuben', {
                text: '',
                click: function () {
                    self._options.clickFuben(self._options.fb_id);
                },
            });
            this._gpRadio = new Mojo.ui.Radio('radio-groups', {
                selectionChange: function (i) {
                    self.switchTo(self._options.fb_id, self.data.fb_task_groups[i].fb_task_group_id);
                },
                disableClick: function (index) {
                    Mojo.app.toast.show(Mojo.utils.locale('mission', 'You have to complete the previous task group!'));
                },
            });
            this._group_scroll = new Mojo.ui.Scroll('task-groups-scroll', this._gpRadio, {
                direction: 1,
            });
            this.element().children('.header').append(this._fbBtn.element()).append(this._group_scroll.element());
        },
        _refreshNav: function () {
            var self = this;
            this._fbBtn.text(this.data.cur_fuben.name);
            this._gpRadio.removeAll();
            this._gpRadio.element().css('width', self.data.fb_task_groups.length * this.getR("unitWidth"));
            $.each(self.data.fb_task_groups, function (i, gp) {
                self._gpRadio.addOption(gp.name);
                if (gp.unlock == 0) {
                    self._gpRadio.disable(i, true);
                }
                if (gp.fb_task_group_id == self.data.cur_fb_task_group.fb_task_group_id) {
                    self._gpRadio.selection(i);
                    self._group_scroll.scroll((i * self.getR("unitWidth")), 0, 0);
                }
            });
            this._options.cur_fuben = this.data.cur_fuben;
            this._options.fb_task_group = this.data.cur_fb_task_group;
            this._options.fb_id = this.data.cur_fuben.order;
            this._options.fb_task_group_id = this.data.cur_fb_task_group.fb_task_group_id;
            this._group_scroll.refresh();
        },
        _refreshList: function () {
            this.initial();
            this.appendData(this.data.fb_tasks);
            this.resize();
            this._options.onListRefresh();
        },
        switchTo: function (fid, gid, track) {
            if (fid == undefined || fid == this._options.fb_id) {
                if (gid == undefined || gid == this._options.fb_task_group_id) {
                    return;
                }
            }
            if (fid == undefined) {
                return;
            }
            this._options.fb_id = fid;
            this._options.fb_task_group_id = gid;
            this.removeAll();
            this._children = [];
            this._load(track);
        },
        _getDefaultOptions: function () {
            var self = this;
            return {
                onListRefresh: $.noop,
                scrollable: true,
                fb_id: null,
                fb_refresh: null,
                cur_fuben: null,
                fb_task_group: null,
                fb_task_group_id: null,
                pageSize: 50,
                clickFuben: $.noop,
                afterDoTask: $.noop,
                refreshProfile: $.noop,
                unlockFuben: $.noop,
                getTeam: $.noop,
                loadFunc: function (start, count, track) {
                    var params = {
                        start: start,
                        count: count,
                    };
                    if (self._options.fb_task_group_id != null) {
                        params.fb_task_group_id = self._options.fb_task_group_id;
                    }
                    params.fuben_id = self._options.fb_id;
                    if (self._options.fb_refresh != null && self._options.fb_refresh != '') {
                        params.fuben_refresh = self._options.fb_refresh;
                    }
                    Mojo.ajax('/fuben/fbTasks', params, function (result) {
                        if (result.errorCode == 0) {
                            self.data = result.data;
                            self._refreshNav();
                            self._refreshList();
                        }
                    }, function () {
                        self.appendData(null);
                    });
                },
                drawFunc: function (data) {
                    return new Mojo.com.FbTask(self._options.cur_fuben, self.data.cur_fb_task_group, data, {
                        complete: function (task, unlock) {
                            if (unlock != undefined && unlock != null) {
                                self._unlock(unlock.fuben_id, unlock.fb_task_group_id, unlock.fb_task_id, unlock.next_level);
                            }
                        },
                        afterDo: function (data, result) {
                            self._options.afterDoTask(data, result);
                        },
                        refreshProfile: function (data) {
                            self._options.refreshProfile(data);
                        },
                        getTeam: function (data, dlg) {
                            self._options.getTeam(data, dlg);
                        },
                        assist: self.data.assist,
                    });
                },
            };
        },
        _unlock: function (fid, gid, tid, nlevel) {
            if (fid != this._options.fb_id) {
                this._options.unlockFuben(fid);
            } else if (gid == this._options.fb_task_group_id && nlevel != undefined && nlevel == 1) {
                this.switchTo(fid, gid, true);
                return;
            }
            if (fid != this._options.fb_id || gid != this._options.fb_task_group_id) {
                this.switchTo(fid, gid, true);
            } else {
                var ts = this.children();
                var t = null;
                for (var i = 0; i < ts.length; i++) {
                    t = ts[i];
                    if (t.task.fb_task_id == tid) {
                        t.unlock(true);
                        break;
                    }
                }
            }
        },
        debugTitle: function () {
            return "Mojo.com.FbTaskList";
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FbTask = w.Mojo.Object.extend({
        clsname: function () {
            return "com.FbTask";
        },
        init: function (fuben, group, task, options) {
            this.fuben = fuben;
            this.group = group;
            this.task = task;
            this._super(undefined, options);
            this.element().addClass('mojo-com-fbtask');
            this._addTitle();
            this._addDescription();
            this._addDetail();
            this._addAction();
            this._refresh();
        },
        _addTitle: function () {
            this.element().append('<div class="title"><div class="left">' +
                this.fuben.order + '-' + this.group.fb_task_group_id + '-' + this.task.order + '</div><div class="center">' +
                this.task.name + '</div><div class="right">' +
                Mojo.utils.locale('ui', 'Level') + this.task.level + '</div></div>');
        },
        _addDescription: function () {
            this.element().append('<div class="row description">' + this.task.description + '</div>');
        },
        _addDetail: function () {
            if (this.task.hp > 0) {
                this._lblHp = new Mojo.ui.Label(undefined, {
                    classes: ['hp'],
                    text: this.task.hp
                });
            }
            if (this.task.ep > 0) {
                this._lblEp = new Mojo.ui.Label(undefined, {
                    classes: ['ep'],
                    text: this.task.ep
                });
            }
            if (this.task.sp > 0) {
                this._lblSp = new Mojo.ui.Label(undefined, {
                    classes: ['sp'],
                    text: this.task.sp
                });
            }
            if (this.task.xp > 0) {
                this._lblXp = new Mojo.ui.Label(undefined, {
                    classes: ['xp'],
                    text: this.task.xp
                });
            }
            if (this.task.rm > 0) {
                this._lblRm = new Mojo.ui.Label(undefined, {
                    classes: ['rm'],
                    text: this.task.rm
                });
            }
            if (this.task.vm > 0) {
                this._lblVm = new Mojo.ui.Label(undefined, {
                    classes: ['vm'],
                    text: this.task.vm
                });
            }
            if (this.task.hp > 0 || this.task.ep > 0 || this.task.sp > 0) {} else {
                this._lblDemand = new Mojo.ui.Label(undefined, {
                    classes: ['demand'],
                    text: Mojo.utils.locale('fuben', 'none'),
                });
            }
            if (this.task.award == null) {
                if (this.task.xp > 0 || this.task.vm > 0 || this.task.rm > 0) {} else {
                    this._lblAward = new Mojo.ui.Label(undefined, {
                        classes: ['bonus'],
                        text: Mojo.utils.locale('fuben', 'none'),
                    });
                }
            } else {
                this._lblAward = new Mojo.ui.Label(undefined, {
                    classes: ['bonus'],
                    text: this.task.award,
                });
            }
            this._cd = this.task.cold_down;
            this._lblCd = new Mojo.ui.Label(undefined, {
                text: '',
                classes: ['cd'],
            });
            this._progress = new Mojo.ui.Progress(undefined, {
                value: this.task.count,
                max: this.task.sum_count,
            });
            this.element().append('<div class="row"><div class="requirement"></div><div class="reward"></div><div class="progress"></div></div>');
            this.element().find('.row > .requirement').append(Mojo.utils.locale('ui', 'Requirement') + '<br>').append(this._lblHp != undefined ? this._lblHp.element() : '').append(this._lblEp != undefined ? this._lblEp.element() : '').append(this._lblSp != undefined ? this._lblSp.element() : '').append(this._lblDemand != undefined ? this._lblDemand.element() : '');
            this.element().find('.row > .reward').append(Mojo.utils.locale('ui', 'Reward') + '<br>').append('<div class="group"></div>').find('.group').append(this._lblXp != undefined ? this._lblXp.element() : '').append(this._lblRm != undefined ? this._lblRm.element() : '').append(this._lblVm != undefined ? this._lblVm.element() : '').append(this._lblAward != undefined ? this._lblAward.element() : '');
            this.element().find('.row > .progress').append(Mojo.utils.locale('ui', 'Progress') + '<br>').append(this._progress.element());
            if (this.task.boss_image != undefined) {
                this.element().append('<div class="row"><div class="defence"></div></div>');
                this.element().find('.row > .defence').html(Mojo.utils.locale('fuben', 'defence') + this.task.defence_min + '~' + this.task.defence_max);
                if (this.task.skills != undefined && this.task.skills.length > 0) {
                    this.element().append('<div class="row"><div class="skills"></div></div>');
                    var str = '';
                    for (var i = 0; i < this.task.skills.length; i++) {
                        str += this.task.skills[i] + '<br>';
                    }
                    this.element().find('.row > .skills').html(Mojo.utils.locale('fuben', 'skills') + '<span>' + str + '</span>');
                }
            }
        },
        _addAction: function () {
            var self = this;
            if (this.task.boss_image != undefined) {
                this._boss = new Mojo.ui.Image(undefined, {
                    src: this.task.boss_image
                });
                this._btnDo = new Mojo.ui.Button(undefined, {
                    text: Mojo.utils.locale('ui', 'Do'),
                    click: function () {
                        if (self.task.status == 3) {
                            self._showGetAwardDlg();
                        } else {
                            self._showFbBattlePreviewDlg();
                        }
                    },
                    disableClick: function () {
                        if (self.task.status == 2 || self.task.status == 3) {
                            Mojo.app.toast.show(Mojo.utils.locale('mission', 'The task is completed!'));
                        } else if (self._options.assist == 0) {
                            Mojo.app.toast.show(Mojo.utils.locale('fuben', 'fuben_assistant_alert3'));
                        } else {
                            Mojo.app.toast.show(Mojo.utils.locale('mission', 'Please complete the tasks above!'));
                        }
                    },
                    disabled: this.task.unlock == 0 || self._options.assist == 0,
                    special: 'button-big-red',
                });
            } else {
                this._slot = new Mojo.com.Slot({
                    slotId: 'slot-task-' + this.task.id,
                });
                this._btnDo = new Mojo.ui.Button(undefined, {
                    text: Mojo.utils.locale('ui', 'Do'),
                    click: function () {
                        self._showWait = false;
                        self._btnDo.disable(true);
                        self._slot.startInSchedule();
                        self._sendRequest();
                    },
                    disableClick: function () {
                        if (self.task.status == 2) {
                            Mojo.app.toast.show(Mojo.utils.locale('mission', 'The task is completed!'));
                        } else if (self._cd > 0) {
                            Mojo.app.toast.show(Mojo.utils.locale('fuben', 'wait_to_do'));
                        } else if (self._options.assist == 0) {
                            Mojo.app.toast.show(Mojo.utils.locale('fuben', 'fuben_assistant_alert3'));
                        }
                    },
                    disabled: self._options.assist == 0,
                    special: 'button-big-red',
                    sound: '17_slotmachine',
                });
            }
            var action = $('<div class="action"></div>').append(this._lblCd.element()).append(this._btnDo.element());
            $('<div class="row"><div class="slot"></div></div>').appendTo(this.element()).append(action).children('.slot').append(this._slot == undefined ? this._boss.element() : this._slot.element());
            this._showCd();
        },
        _refresh: function () {
            this._progress.value(this.task.count);
            this._btnDo.disable(this._options.assist == 0 || this.task.status == 2 || this.task.unlock == 0 || parseInt(this.task.cold_down) > 0);
            if (this.task.status == 3) {
                this._btnDo.text(Mojo.utils.locale('fuben', 'award'));
                this._btnDo.disable(false);
            }
        },
        _onResult: function (result) {
            var self = this;
            var data = result.data;
            self._cd = data.fb_task.cold_down;
            self._overlayHide();
            if (data.award.boss != undefined) {
                $.extend(self.task, data.fb_task);
                self._options.afterDo(data);
                self._refresh();
                self._showFbBattleResultDialog(data.award.boss, 0);
            } else {
                if (data.fb_task.status != 2) {
                    self._showCd();
                }
                (new Mojo.com.FbTaskDialog(data, {
                    close: function () {
                        $.extend(self.task, data.fb_task);
                        self.task.cold_down = self._cd;
                        self._options.afterDo(data, result);
                        self._refresh();
                        if (self.task.status == 2) {
                            self.unlock(false);
                            self._options.complete(this, data.unlock);
                        }
                    },
                })).open(true);
            }
        },
        _showFbBattlePreviewDlg: function () {
            var self = this;
            Mojo.ajax('/fuben/preview', {
                id: self.task.id,
            }, function (result) {
                if (result.errorCode == 0) {
                    self._team = result.data.team;
                    self._fbBattlePreviewDlg = new Mojo.com.FbBattlePreviewDialog(result.data, {
                        attackBtnClick: function (team) {
                            if (team != undefined) self._team = team;
                            self._showWait = true;
                            self._fbBattlePreviewDlg.hide();
                            self._sendRequest();
                        },
                        teamBtnClick: function (team) {
                            self._fbBattlePreviewDlg.hide();
                            self._options.getTeam(team, self._fbBattlePreviewDlg);
                        },
                    });
                    self._fbBattlePreviewDlg.open(true);
                } else {
                    self._stopSlot(undefined, function () {
                        self._overlayHide();
                    });
                    if (self.task.boss_image != undefined) {
                        self._overlayHide();
                    }
                    if (result.errorCode == 10002) {
                        (new Mojo.com.EpDialog(result.data, {
                            title: Mojo.utils.locale('mission', 'Energy point is not enough'),
                            message: result.errorMsg,
                            refreshProfile: function (data) {
                                self._options.refreshProfile(data);
                            },
                        })).open();
                    } else {
                        Mojo.app.toast.show(result.errorMsg);
                    }
                }
            }, function () {}, {
                showWait: true
            });
        },
        _showGetAwardDlg: function () {
            var self = this;
            Mojo.ajax('/fuben/getAward', {
                id: self.task.id,
            }, function (result) {
                if (result.errorCode == 0) {
                    self._showFbBattleResultDialog(result.data, 1);
                }
            }, function () {}, {
                showWait: true
            });
        },
        _showFbBattleResultDialog: function (data, status) {
            var self = this;
            (self._fbBattleResultDialog = new Mojo.com.FbBattleResultDialog(data, {
                fb_id: self.fuben.order,
                fb_task_id: self.task.id,
                boss_name: self.task.boss_name,
                status: status,
                refreshProfile: function (player) {
                    self._options.refreshProfile(player);
                },
                callback: function (unlock) {
                    self._btnDo.text(Mojo.utils.locale('ui', 'Do'));
                    self._btnDo.disable(true);
                    if (unlock.fuben_id == 0) {} else {
                        if (self._fbBattlePreviewDlg != undefined) {
                            self._fbBattlePreviewDlg.close();
                        }
                        self._options.complete(this, unlock);
                    }
                },
            })).open(true);
        },
        _showCd: function () {
            var self = this;
            if (this._cd == undefined || this._cd == 0) return;
            this._lblCd.text(Mojo.utils.locale('fuben', 'in_cd') + self._formatCDTime(self._cd));
            this._lblCd.show();
            this._interval = w.setInterval(function () {
                if (self._cd != undefined && self._cd > 1) {
                    self._cd--;
                    self._lblCd.text(Mojo.utils.locale('fuben', 'in_cd') + self._formatCDTime(self._cd));
                } else {
                    self._cd = 0;
                    w.clearInterval(self._interval);
                    if (self._options.assist != 0) {
                        self._btnDo.disable(false);
                    }
                    self._lblCd.hide();
                }
            }, 1000);
        },
        _overlayShow: function () {
            if (this._overlay == undefined) {
                this._overlay = new Mojo.ui.Overlay('task-slot-overlay', {
                    opacity: 0,
                });
            }
            this._overlay.show();
        },
        _overlayHide: function () {
            if (this._overlay != undefined) {
                this._overlay.hide();
            }
        },
        _sendRequest: function () {
            var self = this;
            self._overlayShow();
            Mojo.ajax('/fuben/do', {
                id: this.task.id,
            }, function (result) {
                if (result.errorCode == 0) {
                    self._stopSlot(result.data.award.bonus, function () {
                        self._onResult(result);
                    });
                    if (self._slot == undefined) {
                        setTimeout(function () {
                            Mojo.ajax('/battle/Detail', {}, function (response) {
                                if (response.errorCode == 0) {
                                    Mojo.ui.BattleAnimation.onclose = function () {
                                        self._onResult(result);
                                    };
                                    Mojo.ui.BattleAnimation.openBattle(response);
                                } else {}
                            }, function () {}, {
                                showWait: true
                            });
                        }, 100);
                    }
                } else {
                    self._stopSlot(undefined, function () {
                        self._overlayHide();
                    });
                    if (self.task.boss_image != undefined) {
                        self._overlayHide();
                    }
                    if (result.errorCode == 10002) {
                        (new Mojo.com.EpDialog(result.data, {
                            title: Mojo.utils.locale('mission', 'Energy point is not enough'),
                            message: result.errorMsg,
                            refreshProfile: function (data) {
                                self._options.refreshProfile(data);
                            },
                        })).open();
                    } else if (result.errorCode == 20006) {
                        Mojo.ajax('/battle/Detail', {}, function (response) {
                            if (response.errorCode == 0) {
                                Mojo.ui.BattleAnimation.onclose = function () {
                                    setTimeout(function () {
                                        self._options.refreshProfile(result.data.player);
                                        var dlg = new Mojo.ui.Dialog(undefined, {
                                            title: Mojo.utils.locale('fuben', 'defeat'),
                                            content: $('<div class="tip"></div>').html(Mojo.utils.locale('fuben', 'for_help')),
                                            deviceaware: true
                                        });
                                        var teamBtn = new Mojo.ui.Button(undefined, {
                                            text: Mojo.utils.locale('fuben', 'team'),
                                            click: function () {
                                                dlg.close();
                                                self._options.getTeam(self._team, self._fbBattlePreviewDlg);
                                            },
                                            special: 'button-big-red',
                                        });
                                        var detailBtn = new Mojo.ui.Button(undefined, {
                                            text: Mojo.utils.locale('battle', 'formation detail'),
                                            click: function () {
                                                dlg.hide();
                                                (new Mojo.com.FbBattleDetailDialog(response.data, {
                                                    team_add: self._team.team_add,
                                                    close: function () {
                                                        dlg.show();
                                                    },
                                                })).open(true);
                                            },
                                        });
                                        dlg._footer.append(teamBtn.element()).append(detailBtn.element());
                                        dlg.open(true);
                                    }, 100);
                                };
                                Mojo.ui.BattleAnimation.openBattle(response);
                            } else {}
                        }, function () {}, {
                            showWait: true
                        });
                    } else if (result.errorCode == 160003) {
                        var dlg = new Mojo.com.CommonDialog(undefined, {
                            title: Mojo.utils.locale('common', 'capacify_lack'),
                            content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'capacify_lack_tip')),
                            leftBtnText: Mojo.utils.locale('common', 'go_intensify'),
                            leftBtnClick: function () {
                                Mojo.app.redirect('/intensify');
                            },
                            rightBtnText: Mojo.utils.locale('common', 'go_sale'),
                            rightBtnClick: function () {
                                Mojo.app.redirect('/entity', {
                                    selected: 3
                                });
                            },
                            close: function () {
                                Mojo.app.redirect('/home');
                            }
                        });
                        dlg.open();
                    } else {
                        Mojo.app.toast.show(result.errorMsg);
                    }
                }
            }, function () {
                self._stopSlot(undefined, function () {
                    self._overlayHide();
                });
            }, {
                showWait: self._showWait
            });
        },
        _stopSlot: function (bonus, callback) {
            if (this._slot == undefined) return;
            var n = 1;
            if (bonus != undefined) {
                if (bonus.vm != undefined) {
                    n = 2;
                } else if (bonus.xp != undefined) {
                    n = 3;
                } else if (bonus.entities != undefined) {
                    n = 4;
                }
            }
            this._slot.stopInSchedule(n, callback);
        },
        update: function (data) {
            this._team = data.team;
        },
        _formatCDTime: function (sec) {
            var str = '';
            var dd = parseInt(sec / 86400);
            var hh = parseInt((sec % 86400) / 3600);
            var mm = parseInt((sec % 3600) / 60);
            var ss = sec % 60;
            if (dd > 0) {
                str = dd + Mojo.utils.locale('fuben', 'day') + hh + Mojo.utils.locale('fuben', 'hour');
            } else if (hh > 0) {
                str = hh + Mojo.utils.locale('fuben', 'hour') + mm + Mojo.utils.locale('fuben', 'minute');
            } else if (mm > 0) {
                str = mm + Mojo.utils.locale('fuben', 'minute') + ss + Mojo.utils.locale('fuben', 'second');
            } else {
                str = ss + Mojo.utils.locale('fuben', 'second');
            }
            return str;
        },
        _getDefaultOptions: function () {
            return {
                complete: $.noop,
                afterDo: $.noop,
                refreshProfile: $.noop,
                getTeam: $.noop,
            };
        },
        unlock: function (value) {
            this._btnDo.disable(!value);
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    var g = w.Mojo.com.Slot = w.Mojo.Object.extend({
        clsname: function () {
            return "com.Slot";
        },
        init: function (options) {
            this._super(undefined, options);
            var self = this;
            this._slotContainer = this.element();
            this._slotContainer.show().addClass(self._options.slotContainerClass);
            this._slot = $('<div></div>').attr("id", self._options.slotId).addClass(self._options.slotClass).addClass(self._options.slotClass + '-' + Mojo.app.data.userLanguage).appendTo(this._slotContainer);
            $(this._slot).pan({
                fps: 30,
                dir: 'down'
            });
            $(this._slot).spStop();
        },
        _getDefaultOptions: function () {
            var self = this;
            return {
                slotId: '0',
                speed: 0,
                step: 2,
                interval: null,
                maxSpeed: 60,
                minSpeed: 10,
                imgHeight: self.getR("imgHeight"),
                spriteHeight: self.getR("spriteHeight"),
                started: false,
                slotContainerClass: 'mojo-com-slot-container',
                slotClass: 'mojo-com-slot',
                slotMotionClass: 'mojo-com-slot-motion',
                slotActivePaneClass: 'mojo-com-slot-activepane',
                slotActiveBtnClass: 'mojo-com-slot-activebtn',
            };
        },
        reset: function () {
            var self = this;
            $(this._slot).spStop();
            $._spritely.instances[self._options.slotId].t = 0;
            $(this._slot).css('background-position', self.getR("background-position"));
            self._options.speed = 0;
        },
        canStart: function () {
            var self = this;
            if (self._options.started === false && self._options.speed == 0) {
                return true;
            } else {
                return false;
            }
        },
        startInSchedule: function () {
            var self = this;
            if (self._options.started === false) {
                if (self._options.speed == 0) {
                    self.start();
                } else {
                    var interval = window.setInterval(function () {
                        if (self._options.speed == 0) {
                            self.start();
                            clearInterval(interval);
                        }
                    }, 100);
                }
            }
        },
        start: function () {
            var self = this;
            $(this._slot).spStart();
            self._options.started = true;
            self._options.interval = window.setInterval(function () {
                if (self._options.speed < self._options.maxSpeed) {
                    self._options.speed += self._options.step;
                    $(self._slot).spSpeed(self._options.speed);
                }
            }, 40);
        },
        canStop: function () {
            var self = this;
            if (self._options.started === true && self._options.speed >= self._options.maxSpeed) {
                return true;
            } else {
                return false;
            }
        },
        stopInSchedule: function (n, callback) {
            var self = this;
            if (self._options.started === true) {
                var targetPos = self._options.spriteHeight * n;
                if (self._options.speed >= self._options.maxSpeed) {
                    self.stop(targetPos, callback);
                } else {
                    var interval = window.setInterval(function () {
                        if (self._options.speed >= self._options.maxSpeed) {
                            self.stop(targetPos, callback);
                            clearInterval(interval);
                        }
                    }, 100);
                }
            }
        },
        stop: function (targetPos, callback) {
            var self = this;
            clearInterval(self._options.interval);
            self._options.interval = window.setInterval(function () {
                if (self._options.speed > self._options.minSpeed) {
                    self._options.speed -= self._options.step;
                    $(self._slot).spSpeed(self._options.speed);
                }
                if (self._options.speed <= self._options.minSpeed) {
                    var range = self._rangeFromTarget_when_dir_down(targetPos);
                    if (range > 0) {
                        if (Mojo.gap.device == 'ipad') {
                            if (range < 0.05) {
                                var best = targetPos;
                                var bgPos = "0px " + best + "px";
                                $(self._slot).css('background-position', bgPos);
                                $(self._slot).spSpeed(0);
                                $(self._slot).spStop();
                                clearInterval(self._options.interval);
                                $(self._slot).removeClass(self._options.slotMotionClass);
                                self._options.speed = 0;
                                self._options.started = false;
                                if (callback != undefined) {
                                    callback.call();
                                }
                            } else if (range < 0.1) {
                                self._options.speed = 1;
                                $(self._slot).spSpeed(1);
                            } else if (range < 0.5) {
                                self._options.speed = 2;
                                $(self._slot).spSpeed(2);
                            } else if (range < 0.9) {
                                self._options.speed = 4;
                                $(self._slot).spSpeed(4);
                            } else if (range < 1.4) {
                                self._options.speed = 6;
                                $(self._slot).spSpeed(6);
                            } else if (range < 2) {
                                self._options.speed = 8;
                                $(self._slot).spSpeed(8);
                            }
                        } else {
                            if (range < 0.1) {
                                var best = targetPos - 7;
                                var bgPos = "5px " + best + "px";
                                $(self._slot).css('background-position', bgPos);
                                $(self._slot).spSpeed(0);
                                $(self._slot).spStop();
                                clearInterval(self._options.interval);
                                $(self._slot).removeClass(self._options.slotMotionClass);
                                self._options.speed = 0;
                                self._options.started = false;
                                if (callback != undefined) {
                                    callback.call();
                                }
                            } else if (range < 0.5) {
                                self._options.speed = 2;
                                $(self._slot).spSpeed(2);
                            } else if (range < 0.9) {
                                self._options.speed = 4;
                                $(self._slot).spSpeed(4);
                            } else if (range < 1.4) {
                                self._options.speed = 6;
                                $(self._slot).spSpeed(6);
                            } else if (range < 2) {
                                self._options.speed = 8;
                                $(self._slot).spSpeed(8);
                            }
                        }
                    }
                }
            }, 40);
        },
        _rangeFromTarget_when_dir_down: function (targetPos) {
            var self = this;
            var currentPos = $(self._slot).css('background-position');
            currentPos = currentPos.split(' ')[1];
            currentPos = parseInt(currentPos, 10);
            if ((targetPos - (currentPos % self._options.imgHeight)) > 0) {
                return ((targetPos - (currentPos % self._options.imgHeight)) / self._options.spriteHeight);
            } else {
                return -1;
            }
        },
        _rangeFromTarget_when_dir_up: function (targetPos) {
            var self = this;
            var currentPos = $(self._slot).css('background-position');
            currentPos = currentPos.split(' ')[1];
            currentPos = parseInt(currentPos, 10);
            if (((currentPos % self._options.imgHeight) - targetPos) > 0) {
                return (((currentPos % self._options.imgHeight) - targetPos) / self._options.spriteHeight);
            } else {
                return -1;
            }
        },
        _isNearTarget: function (range, targetPos) {
            var self = this;
            var currentPos = $(self._slot).css('background-position');
            currentPos = currentPos.split(' ')[1];
            currentPos = parseInt(currentPos, 10);
            if (((currentPos % self._options.imgHeight) - targetPos) > 0 && ((currentPos % self._options.imgHeight) - targetPos) < (self._options.spriteHeight * range)) {
                return true;
            } else {
                return false;
            }
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FbTaskDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.FbTaskDialog";
        },
        init: function (data, options) {
            this._data = data.award;
            this._task = data.task;
            this._super(undefined, options);
            this.element().addClass('mojo-com-fbtaskdlg');
            var self = this;
            this._xp = this._xpText();
            this._vm = this._vmText();
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var data = null;
            var vm = 0,
                rm = 0,
                xp = 0,
                addvm = 0,
                addrm = 0,
                addvm = 0;
            if (this._data.bonus != undefined) {
                if (this._data.bonus.entities != undefined && this._data.bonus.entities.length > 0) {
                    Mojo.gap.soundPlay('18_new_card');
                    data = this._data.bonus.entities[0];
                }
            } else {}
            if (this._data.boss != undefined) {
                if (this._data.boss.entities != undefined && this._data.boss.entities.length > 0) {
                    data = this._data.boss.entities[0];
                }
            }
            if (data != null) {
                this._entity = new Mojo.com.LargeEntity(data);
                this._content.append(this._entity.element());
                this._content.append('<div class="tip">' + this._contentText(data) + '</div>');
            }
            if (this._xp != '' || this._vm != '') {
                this._content.append('<div class="reward"></div>');
                this._content.find('.reward').append((new Mojo.ui.Label(undefined, {
                    text: Mojo.utils.locale('mission', 'Gained') + '：',
                    classes: ['gained'],
                })).element());
            }
            if (this._xp != '') {
                this._content.find('.reward').append((new Mojo.ui.Label(undefined, {
                    text: this._xp,
                    classes: ['xp'],
                })).element());
            }
            if (this._vm != '') {
                this._content.find('.reward').append((new Mojo.ui.Label(undefined, {
                    text: this._vm,
                    classes: ['vm'],
                })).element());
            }
        },
        _xpText: function () {
            var xp = '';
            if (this._data.bonus != undefined) {
                if (parseInt(this._data.fixed.xp) > 0) {
                    xp = this._data.fixed.xp;
                    if (parseInt(this._data.fixed.add_xp) > 0) {
                        xp += '+' + this._data.fixed.add_xp;
                        if (parseInt(this._data.bonus.xp > 0)) {
                            xp += '+' + this._data.bonus.xp;
                        }
                    } else if (this._data.bonus.xp > 0) {
                        xp += '+' + this._data.bonus.xp;
                    }
                } else if (parseInt(this._data.bonus.xp) > 0) {
                    xp = this._data.bonus.xp;
                    if (parseInt(this._data.fixed.add_xp) > 0) {
                        xp += '+' + this._data.fixed.add_xp;
                    }
                }
                return xp;
            } else {
                if (parseInt(this._data.fixed.xp) > 0) {
                    return parseInt(this._data.fixed.xp) + (parseInt(this._data.fixed.add_xp) > 0 ? ('+' + this._data.fixed.add_xp) : '');
                } else {
                    return '';
                }
            }
        },
        _vmText: function () {
            var vm = '';
            if (this._data.bonus != undefined) {
                if (parseInt(this._data.fixed.vm) > 0) {
                    vm = this._data.fixed.vm;
                    if (parseInt(this._data.fixed.add_vm) > 0) {
                        vm += '+' + this._data.fixed.add_vm;
                        if (parseInt(this._data.bonus.vm > 0)) {
                            vm += '+' + this._data.bonus.vm;
                        }
                    } else if (this._data.bonus.vm > 0) {
                        vm += '+' + this._data.bonus.vm;
                    }
                } else if (parseInt(this._data.bonus.vm) > 0) {
                    vm = this._data.bonus.vm;
                    if (parseInt(this._data.fixed.add_vm) > 0) {
                        vm += '+' + this._data.fixed.add_vm;
                    }
                }
                return vm;
            } else {
                if (parseInt(this._data.fixed.vm) > 0) {
                    return parseInt(this._data.fixed.vm) + (parseInt(this._data.fixed.add_vm) > 0 ? ('+' + this._data.fixed.add_vm) : '');
                } else {
                    return '';
                }
            }
        },
        _contentText: function (entity) {
            var number = Math.random();
            if (this._data.bonus != undefined) {
                if (entity.type_id == 1) {
                    if (number > 0.5) {
                        return Mojo.utils.locale('mission', 'Get One Generals', {
                            name: entity.name
                        });
                    } else {
                        return Mojo.utils.locale('mission', 'Get Another Generals', {
                            name: entity.name
                        });
                    }
                } else {
                    return Mojo.utils.locale('mission', 'Get One Collection', {
                        name: entity.name
                    });
                }
            } else {
                if (entity.type_id == 1) {
                    return Mojo.utils.locale('mission', 'Attack One Generals', {
                        boss_name: this._task.boss_name,
                        name: entity.name
                    });
                } else {
                    return Mojo.utils.locale('mission', 'Attack Another Generals', {
                        boss_name: this._task.boss_name,
                        name: entity.name
                    });
                }
            }
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button(undefined, {
                special: 'button-big-red',
                text: Mojo.utils.locale('common', 'ok'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('mission', 'Task Awards'),
                handle: $.noop,
            });
        },
        open: function () {
            if (this._entity != null && this._entity != undefined) {
                this._super();
            } else {
                var str = '';
                if (this._xp != '' && this._vm != '') {
                    str += ' XP:' + this._xp + '&nbsp;，&nbsp;' + Mojo.utils.locale('mission', 'Coins') + ':' + this._vm;
                } else if (this._xp != '') {
                    str += ' XP:' + this._xp;
                } else if (this._vm != '') {
                    str += Mojo.utils.locale('mission', 'Coins') + ':' + this._vm;
                }
                if (str != '') {
                    Mojo.app.toast.show(Mojo.utils.locale('mission', 'Gained') + str);
                }
                this.close();
            }
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.Entity = w.Mojo.Object.extend({
        clsname: function () {
            return "com.Entity";
        },
        init: function (id, data, options) {
            this.data = data;
            this._super(id, options);
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.LargeEntity = w.Mojo.com.Entity.extend({
        clsname: function () {
            return "com.LargeEntity";
        },
        init: function (data, options) {
            this._super(undefined, data, options);
            this._entityEffectText = {
                "attack_max": {
                    text: Mojo.utils.locale('largeentity', 'attack'),
                    unit: ""
                },
                "attack_min": {
                    text: Mojo.utils.locale('largeentity', 'attack'),
                    unit: ""
                },
                "defence_max": {
                    text: Mojo.utils.locale('largeentity', 'defence'),
                    unit: ""
                },
                "defence_min": {
                    text: Mojo.utils.locale('largeentity', 'defence'),
                    unit: ""
                },
                "xp_value": {
                    text: Mojo.utils.locale('largeentity', 'effect_xp'),
                    unit: ""
                },
                "xp_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_xp'),
                    unit: "%"
                },
                "rm_value": {
                    text: Mojo.utils.locale('largeentity', 'effect_rm'),
                    unit: ""
                },
                "rm_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_rm'),
                    unit: "%"
                },
                "vm_value": {
                    text: Mojo.utils.locale('largeentity', 'effect_vm'),
                    unit: ""
                },
                "vm_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_vm'),
                    unit: "%"
                },
                "ep_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_ep'),
                    unit: "%"
                },
                "sp_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_sp'),
                    unit: "%"
                },
                "max_attack_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_max_attack_pro'),
                    unit: "%"
                },
                "max_defence_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_max_defence_pro'),
                    unit: "%"
                },
                "attack_max_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_max_attack'),
                    unit: "%"
                },
                "attack_min_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_min_attack'),
                    unit: "%"
                },
                "defence_max_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_max_defence'),
                    unit: "%"
                },
                "defence_min_percent": {
                    text: Mojo.utils.locale('largeentity', 'effect_min_defence'),
                    unit: "%"
                }
            };
            this.element().addClass('mojo-com-entity-large');
            this._row1 = $('<div class="row"><div class="picture"></div></div>').appendTo(this.element());
            if (typeof data == 'string') {
                var self = this;
                Mojo.ajax("/entity/detail", {
                    id: data,
                    pid: this._options.pid,
                    eid: this._options.eid,
                    rebirth_count: this._options.rebirthCount,
                }, function (response) {
                    if (response && response.errorCode === 0) {
                        self.data = response.data;
                        self._setPicture();
                        self._refresh();
                    } else {
                        self.data = undefined;
                    }
                    if (self._options.callback instanceof Function) {
                        self._options.callback(self);
                    }
                }, function () {
                    self.data = undefined;
                    if (self._options.callback instanceof Function) {
                        self._options.callback(self);
                    }
                });
            } else if (typeof data == 'object') {
                this._setPicture();
                this._refresh();
                if (this._options.callback instanceof Function) {
                    this._options.callback(this);
                }
            }
        },
        _getEntityEffectText: function () {
            for (var eattr in this._entityEffectText) {
                if (this.data[eattr] && this.data[eattr] > 0) {
                    return this._entityEffectText[eattr].text + this.data[eattr] + this._entityEffectText[eattr].unit;
                }
            }
            return "";
        },
        _setEntityEffectText: function () {
            if (this._options.showEntityEffect) {
                this._skills.append('<div class="paragraph">' + this._getEntityEffectText() + '</div>');
            }
        },
        _setPicture: function () {
            if (this._options.showDescription) {
                this._description = $('<div class="description mojo-com-entity-large--row--description">' + Mojo.utils.locale('ui', 'Introduction') + ':<br>' + this.data.description + '</div>').appendTo(this._row1);
            }
            this._skills = $('<div class="row skills"></div>').hide().appendTo(this.element());
            if (this._options.showSkill) {
                this._skills.show();
            }
            this._row1.find('.picture').append('<img src="' + this.data.large_image + '" class="mojo-com-entity-large--row--img">').append('<div class="border"></div>').append('<div class="name mojo-com-entity-large--row--picture--name">' + this.data.name + '</div>').append('<div class="type"></div>').append('<div class="attributes mojo-com-entity-large--row--picture--attributes"></div>');
            this._row1.find('.picture > .name').addClass('rebirth-' + (this.data.rebirth_sum > 6 ? 6 : this.data.rebirth_sum));
        },
        _addAttributes: function () {
            if (parseInt(this.data.type_id) != 7 && parseInt(this.data.type_id) != 8 && parseInt(this.data.type_id) != 22 && this.data.level > 0) {
                this._row1.find('.attributes').append((this._xpProgress = new Mojo.ui.Progress(undefined, {
                    value: this.data.xp,
                    max: this.data.next_xp,
                    labelTemplate: '',
                    classes: ['mojo-com-entity-large--row--picture--attributes--mojo-ui-progress'],
                })).element()).append('<div class="level mojo-com-entity-large--row--picture--attributes--level">' + this.data.level + '</div>');
            }
            this._effects = $('<div class="effects mojo-com-entity-large--row--picture--attributes--effects"></div>').appendTo(this._row1.find('.attributes'));
            this.data.attack_max = parseInt(this.data.attack_max);
            this.data.attack_min = parseInt(this.data.attack_min);
            this.data.defence_max = parseInt(this.data.defence_max);
            this.data.defence_min = parseInt(this.data.defence_min);
            if (Mojo.utils.isWhat(this.data.type_id, "general")) {
                if (this.data.attack_max > 0) {
                    if (this.data.attack_max < this.data.attack_min) this.data.attack_max = this.data.attack_min;
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-attack', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.attack_min + '-' + this.data.attack_max,
                    })).element());
                }
                if (this.data.defence_max > 0) {
                    if (this.data.defence_max < this.data.defence_min) this.data.defence_max = this.data.defence_min;
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-defence', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.defence_min + '-' + this.data.defence_max,
                    })).element());
                }
            } else {
                if (this.data.attack_max > 0) {
                    if (this.data.attack_max < this.data.attack_min) this.data.attack_max = this.data.attack_min;
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-attack', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.attack_min + '-' + this.data.attack_max,
                    })).element());
                }
                if (this.data.defence_max > 0) {
                    if (this.data.defence_max < this.data.defence_min) this.data.defence_max = this.data.defence_min;
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-defence', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.defence_min + '-' + this.data.defence_max,
                    })).element());
                }
                if (this.data.xp_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-xp', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.xp_percent + '%',
                    })).element());
                }
                if (this.data.ep_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-ep', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.ep_percent + '%',
                    })).element());
                }
                if (this.data.sp_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-sp', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.sp_percent + '%',
                    })).element());
                }
                if (this.data.vm_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-vm', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.vm_percent + '%',
                    })).element());
                }
                if (this.data.max_attack_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-max-attack-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.max_attack_percent + '%',
                    })).element());
                }
                if (this.data.max_defence_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-max-defence-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.max_defence_percent + '%',
                    })).element());
                }
                if (this.data.attack_max_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-attack-max-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.attack_max_percent + '%',
                    })).element());
                }
                if (this.data.attack_min_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-attack-min-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.attack_min_percent + '%',
                    })).element());
                }
                if (this.data.defence_max_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-defence-max-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.defence_max_percent + '%',
                    })).element());
                }
                if (this.data.defence_min_percent > 0) {
                    this._effects.append((new Mojo.ui.Label(undefined, {
                        classes: ['effect-defence-min-percent', 'mojo-com-entity-large--row--picture--attributes--mojo-ui-label'],
                        text: this.data.defence_min_percent + '%',
                    })).element());
                }
            }
        },
        _refresh: function () {
            if (parseInt(this.data.type_id) === 7 || parseInt(this.data.type_id) === 8 || parseInt(this.data.type_id) === 22) {
                this._row1.find('.picture').addClass('bg-level-other').addClass('mojo-com-entity-large--row--picture');
            } else {
                this._row1.find('.picture').addClass('bg-level-' + (parseInt((this.data.level - 1) / 10) + 1)).addClass('mojo-com-entity-large--row--picture');
            }
            this._row1.find('.picture > .rarity').addClass('star-rarity-' + this.data.rarity_id);
            this._row1.find('.picture > .border').addClass('border-rarity-' + (this.data.rarity_id ? this.data.rarity_id : "other")).addClass("mojo-com-entity-large--row--picture--border");
            if (this.data.group_id_1) {
                this._row1.find('.picture > .type').addClass('type-gp-' + this.data.group_id_1).addClass('type-gp-' + this.data.group_id_1 + '-' + Mojo.app.data.userLanguage).addClass("mojo-com-entity-large--row--picture--type").addClass("mojo-com-entity-large--row--picture--type" + '-' + Mojo.app.data.userLanguage);
            } else {
                var typeid = this.data.type_id;
                if (parseInt(typeid) === 22)
                    typeid = 7;
                this._row1.find('.picture > .type').addClass('type-' + typeid).addClass("mojo-com-entity-large--row--picture--type").addClass("mojo-com-entity-large--row--picture--type" + '-' + Mojo.app.data.userLanguage);
            }
            if (Mojo.utils.isWhat(this.data.type_id, "minis")) {
                var minisFlag = $('<div></div>').addClass("minis-flag").addClass("minis-flag" + '-' + Mojo.app.data.userLanguage).appendTo(this._row1.find(".picture"));
                if (Mojo.utils.isWhat(this.data.entity_type_id, "general")) {
                    minisFlag.addClass('minis-flag-type-gp-' + this.data.entity_group_id).addClass('minis-flag-type-gp-' + this.data.entity_group_id + '-' + Mojo.app.data.userLanguage).show();
                } else {
                    minisFlag.addClass('minis-flag-type-' + this.data.entity_type_id).addClass('minis-flag-type-' + this.data.entity_type_id + '-' + Mojo.app.data.userLanguage).show();
                }
            }
            this._addAttributes();
            if (this._options.showSkill && this.data.skills) {
                var skills = "";
                for (var sid in this.data.skills) {
                    var skill = this.data.skills[sid];
                    skills += '<div class="paragraph">' + skill.description + '</div>';
                }
                this._skills.html(skills);
            }
            if (Mojo.utils.isWhat(this.data.type_id, "mounts") || Mojo.utils.isWhat(this.data.type_id, "treasure")) {
                this._setEntityEffectText();
            }
            this.refresh();
        },
        refresh: function () {
            if (typeof this.data == 'object') {
                if (this.data.is_max_level == 1) {
                    this._xpProgress.value(0);
                }
            }
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                pid: "",
                eid: "",
                rebirthCount: 0,
                callback: undefined,
                showSkill: false,
                showDescription: true,
                showEntityEffect: true
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FbBattlePreviewDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.FbBattlePreviewDialog";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-fbbattlepreviewdlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            this._name = $('<div class="name"></div>').appendTo(this._content);
            this._player = $('<div class="player"></div>').appendTo(this._name);
            $('<div class="player_icon"></div>').appendTo(this._player);
            this._playerName = $('<div class="player_name"></div>').html(self._data.player_name).appendTo(this._player);
            this._playerAttack = $('<div class="player_attack"></div>').html('(' + self._data.attack_min + '-' + self._data.attack_max + ')').appendTo(this._player);
            this._vs = $('<div class="vs"></div>').html('VS').appendTo(this._name);
            this._opp = $('<div class="opp"></div>').appendTo(this._name);
            $('<div class="opp_icon"></div>').appendTo(this._opp);
            this._oppName = $('<div class="opp_name"></div>').html(self._data.boss_name).appendTo(this._opp);
            this._oppDefence = $('<div class="opp_defence"></div>').html('(' + self._data.defence_min + '-' + self._data.defence_max + ')').appendTo(this._opp);
            var len = (self._data.team.crew == undefined ? 0 : self._data.team.crew.length);
            this._assist = $('<div class="assist"></div>').appendTo(this._content);
            this._assistTitle = $('<div class="assist-title"></div>').html(Mojo.utils.locale('fuben', 'choose_team_friends', {
                current: len,
                total: self._data.team.team_sum
            })).appendTo(this._assist);
            this._assistFriends = $('<div class="assist-friends"></div>').html(this._getFriends(self._data)).appendTo(this._assist);
            this._ifwin = $('<div class="ifwin"></div>').appendTo(this._content);
            this._win = $('<div class="win"></div>').html(Mojo.utils.locale('common', 'when win') + Mojo.utils.locale('fuben', 'choose_one')).appendTo(this._ifwin);
            this._ifwin.append($('<div class="win_award"></div>').html(self._data.win_award));
            this._iflose = $('<div class="iflose"></div>').appendTo(this._content);
            this._lose = $('<div class="lose"></div>').html(Mojo.utils.locale('common', 'when lose')).appendTo(this._iflose);
            this._iflose.append((new Mojo.ui.Label(undefined, {
                classes: ['losevm'],
                text: '-' + self._data.lose_vm,
            })).element());
        },
        _addHandleButtons: function () {
            var self = this;
            this._attackBtn = new Mojo.ui.Button('attack-btn', {
                text: Mojo.utils.locale('common', 'attack'),
                click: function () {
                    self._options.attackBtnClick(self._data.team);
                },
                special: 'button-big-red',
            });
            this._footer.append(this._attackBtn.element());
            this._teamBtn = new Mojo.ui.Button('team-btn', {
                text: Mojo.utils.locale('fuben', 'team'),
                click: function () {
                    self._options.teamBtnClick(self._data.team);
                },
            });
            this._footer.append(this._teamBtn.element());
        },
        update: function (data) {
            this._data.team = data.team;
            this._playerAttack.text('(' + data.attack_min + '-' + data.attack_max + ')');
            this._assistTitle.html(Mojo.utils.locale('fuben', 'choose_team_friends', {
                current: data.team.crew.length,
                total: data.team.team_sum
            }));
            this._assistFriends.html(this._getFriends(data));
        },
        _getFriends: function (data) {
            var self = this;
            var friends = '';
            if (data.team.crew != undefined) {
                var tlen = data.team.crew.length;
                for (var i = 0; i < tlen; i++) {
                    if (i != tlen - 1) {
                        friends += data.team.crew[i].name + '、';
                    } else {
                        friends += data.team.crew[i].name;
                    }
                }
            }
            if (friends == '') {
                friends = Mojo.utils.locale('fuben', 'no_friends');
            }
            return friends;
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('battle', 'battle result preview'),
                callback: $.noop,
                attackBtnClick: $.noop,
                teamBtnClick: $.noop,
                fightProfile: null,
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FbBattleResultDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.FbBattleResultDialog";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-fbbattleresultdlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            this._tip = $('<div class="tip"></div>').html(Mojo.utils.locale('fuben', 'choose_award', {
                boss_name: self._options.boss_name
            })).appendTo(this._content);
            if (this._data.type == 'big') {
                this._freeNd = (new Mojo.com.LargeEntity(self._data.free_award, {
                    showDescription: false,
                    showEntityEffect: false,
                    classes: ['free-niudan'],
                })).element().appendTo(this._content);
            } else {
                this._freeNd = (new Mojo.com.RandomBonus(undefined, self._data.free_award, {
                    classes: ['free-niudan'],
                })).element().appendTo(this._content);
            }
            this._freeNdTxt = $('<div class="free-nd-txt"></div>').html(Mojo.utils.locale('fuben', 'for_sale') + Mojo.utils.locale('fuben', 'free')).appendTo(this._content);
            this._payNd = (new Mojo.com.LargeEntity(self._data.pay_award, {
                showDescription: false,
                showEntityEffect: false,
                classes: ['pay-niudan'],
            })).element().appendTo(this._content);
            this._payNdTxt = $('<div class="pay-nd-txt"></div>').html(Mojo.utils.locale('fuben', 'for_sale')).appendTo(this._content);
            this._payRm = new Mojo.ui.Label(undefined, {
                text: (self._data.type == 'small' ? self._data.pay_award.rm * 10 / 7 : self._data.pay_award.rm),
                classes: ['rm'],
            });
            this._payRm.element().appendTo(this._payNdTxt);
            if (this._data.type == 'small') {
                this._payRm.element().find('.text > span').addClass('virtual');
                this._payRm.element().find('.text').append($('<div class="real"></div>').html(self._data.pay_award.rm));
                this._payNdTxt.append($('<div class="discount"></div>').html(Mojo.utils.locale("mall", 'discount_goods_flag_new', {
                    discount: 7
                })));
            }
        },
        _addHandleButtons: function () {
            var self = this;
            this._freeNdBtn = new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('fuben', 'get_for_free'),
                click: function () {
                    if (self._data.type == 'big') {
                        self._onTrack(0);
                    }
                    self._openAward(self._data.free_award, self._data.type == 'small' ? 0 : 1);
                },
                special: 'button-big-red',
            });
            this._freeNdBtn.element().appendTo(this._footer);
            this._payNdBtn = new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('fuben', 'buy'),
                click: function () {
                    if (self._data.type == 'big') {
                        self._onTrack(1);
                    }
                    self._openAward(self._data.pay_award, 1);
                }
            });
            this._payNdBtn.element().appendTo(this._footer);
        },
        _openAward: function (award, status) {
            var self = this;
            Mojo.ajax("/fuben/openAward", {
                id: self._options.fb_task_id,
                award_id: award.id,
                status: self._options.status,
            }, function (result) {
                self._showAwardResult(result, award, status);
            }, function () {}, {
                showWait: true
            });
        },
        _showAwardResult: function (result, award, status) {
            var self = this;
            if (result && result.errorCode === 0) {
                self.close();
                self._options.refreshProfile(result.data.player);
                if (award != undefined) {
                    if (status == 1) {
                        Mojo.gap.niudanAnimationPlay(award.rarity_id);
                    }
                    var entity = result.data.entity;
                    var entityDetailDialog = new Mojo.ui.Dialog(undefined, {
                        title: Mojo.utils.locale('fuben', 'fuben_award_title'),
                        content: (new Mojo.com.LargeEntity(entity)).element(),
                        zIndex: 1060,
                        close: function () {
                            if (result.data.unlock.fuben_id == 0) {
                                if (entityDetailDialog._nextDialog != undefined) {
                                    entityDetailDialog._nextDialog.afterPublish = function () {
                                        setTimeout(function () {
                                            Mojo.app.redirect('/fb');
                                        }, 600);
                                    };
                                } else {
                                    Mojo.app.redirect('/fb');
                                }
                            }
                            self._options.callback(result.data.unlock);
                        },
                    });
                    var tip = $('<div></div>').addClass('tip').appendTo(entityDetailDialog._content);
                    if (entity.type_id == 1) {
                        tip.html(Mojo.utils.locale('fuben', 'fuben_award_content1', {
                            boss_name: self._options.boss_name,
                            entity_name: entity.name
                        }));
                    } else {
                        tip.html('恭喜主公，我军击败了【' + self._options.boss_name + '】，打开神秘礼物后获得【' + entity.name + '】～');
                    }
                    new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('common', 'ok'),
                        click: function () {
                            entityDetailDialog.close();
                        },
                        special: 'button-big-red',
                    }).element().appendTo(entityDetailDialog._footer);
                    setTimeout(function () {
                        entityDetailDialog.open();
                    }, 1000);
                }
            } else {
                self.hide();
                if (result && result.errorCode == '10005') {
                    (new Mojo.com.BuyFailDialog({
                        message: result.errorMsg,
                        close: function () {
                            self.show();
                        },
                    })).open(true);
                } else {
                    (new Mojo.com.CommonDialog(undefined, {
                        title: self.getL('common', 'buy_fail_title'),
                        content: $("<div class='paragraph'></div>").html(result.errorMsg),
                        leftBtnText: self.getL('common', 'close'),
                        leftBtnClick: function (that) {
                            that.close();
                        },
                        close: function () {
                            self.show();
                        },
                    })).open(true);
                }
            }
        },
        _onTrack: function (status) {
            var point = '';
            switch (parseInt(this._options.fb_id)) {
            case 1:
                point = (status == 0 ? '22_005' : '22_006');
                break;
            case 2:
                point = (status == 0 ? '22_105' : '22_106');
                break;
            case 3:
                point = (status == 0 ? '22_205' : '22_206');
                break;
            case 4:
                point = (status == 0 ? '22_305' : '22_306');
                break;
            default:
                break;
            }
            Mojo.track.onEvent(point);
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                fb_id: null,
                fb_task_id: null,
                boss_name: '',
                status: 0,
                noTitle: true,
                zIndex: 1013,
                callback: $.noop,
                refreshProfile: $.noop,
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FbBattleDetailDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.FbBattleDetailDialog";
        },
        init: function (data, options) {
            var self = this;
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-battledetaildlg');
            this._addContent();
            this._showResult();
            this._addButtons();
        },
        _addContent: function () {
            var self = this;
            this._content.append(this._templateLeft);
            this._content.append(this._templateRight);
            this._content.after($('<div class="fb_center_line"></div>'));
        },
        _showResult: function () {
            var self = this;
            this._content.find('.top-left > .player_name').html(self._data.attacker.player.name);
            this._content.find('.top-left > .player_level').html(Mojo.utils.locale('common', 'level') + self._data.attacker.player.level);
            this._content.find('.top-left > .player_sum').html(Mojo.utils.locale('battle', 'sum attack') + parseInt(self._data.attacker.player.sum_attack * (1 + self._options.team_add / 100)));
            this._content.find('.top-left > .player_base').html(Mojo.utils.locale('battle', 'base attack') + self._data.attacker.player.base_attack);
            this._content.find('.top-left > .player_team_add').html(Mojo.utils.locale('fuben', 'team_add', {
                team_add: self._options.team_add
            }));
            this._content.find('.top-right > .player_name').html(self._data.defender.player.name);
            this._content.find('.top-right > .player_sum').html(Mojo.utils.locale('battle', 'sum defence') + self._data.defender.player.sum_defence);
            this._army = $('<div class="army"></div>').appendTo(this._content);
            this._blankScroll = $('<div></div>');
            this._playerArmy = $('<div class="con_left"></div>').appendTo(this._blankScroll);
            if (self._data.attacker.army != undefined && self._data.attacker.army.length > 0) {
                for (var index in self._data.attacker.army) {
                    var army = self._data.attacker.army[index];
                    var attacker = $('<div></div>').addClass("player_attacker").appendTo(this._playerArmy);
                    var image = $('<div class="small-card"></div>');
                    $('<img></img>').attr('src', army.small_image).appendTo(image);
                    image.appendTo(attacker);
                    var attackerRestraint = $('<div class="attacker-restraint"></div>').appendTo(attacker);
                    if (army.is_res == 1) {
                        var res = new Mojo.ui.Label(undefined, {
                            text: Mojo.utils.locale('fuben', 'restraint'),
                            classes: ['restraint'],
                        });
                        res.element().appendTo(attackerRestraint);
                    }
                    if (army.is_be_res == 1) {
                        var be_res = new Mojo.ui.Label(undefined, {
                            text: Mojo.utils.locale('fuben', 'be_restraint'),
                            classes: ['be-restraint'],
                        });
                        be_res.element().appendTo(attackerRestraint);
                    }
                    var attackerName = $('<div></div>').addClass("attacker_name").addClass('rebirth-' + (army.rebirth_sum > 6 ? 6 : army.rebirth_sum)).appendTo(attacker).html(army.name);
                    var attackerAttack = $('<div></div>').addClass("attacker_attack").appendTo(attacker).html(Mojo.utils.locale('common', 'simple_attack') + army.attack);
                }
            }
            this._opponentArmy = $('<div class="con_right"></div>').appendTo(this._blankScroll);
            if (self._data.defender.army != undefined && self._data.defender.army.length > 0) {
                for (var index in self._data.defender.army) {
                    var army = self._data.defender.army[index];
                    var defender = $('<div></div>').addClass("opponent_defender").appendTo(this._opponentArmy);
                    var image = $('<div class="small-card"></div>');
                    $('<img></img>').attr('src', army.small_image).appendTo(image);
                    image.appendTo(defender);
                    var defenderRestraint = $('<div class="defender-restraint"></div>').appendTo(defender);
                    if (army.is_res == 1) {
                        var res = new Mojo.ui.Label(undefined, {
                            text: Mojo.utils.locale('fuben', 'restraint'),
                            classes: ['restraint'],
                        });
                        res.element().appendTo(defenderRestraint);
                    }
                    if (army.is_be_res == 1) {
                        var be_res = new Mojo.ui.Label(undefined, {
                            text: Mojo.utils.locale('fuben', 'be_restraint'),
                            classes: ['be-restraint'],
                        });
                        be_res.element().appendTo(defenderRestraint);
                    }
                    var defenderName = $('<div></div>').addClass("defender_name").addClass('rebirth-' + (army.rebirth_sum > 6 ? 6 : army.rebirth_sum)).appendTo(defender).html(army.name);
                    var defenderDefence = $('<div></div>').addClass("defender_defence").appendTo(defender).html(Mojo.utils.locale('common', 'simple_defence') + army.defence);
                }
            }
            self._scroll = new Mojo.ui.Scroll(undefined, self._blankScroll, {
                direction: 2
            });
            this._army.append(self._scroll.element());
            self._scroll.element().css('height', self.getR("height"));
            if (self._data.win == true) {
                Mojo.gap.soundPlay('19_battle_win,mp3');
            } else {
                Mojo.gap.soundPlay('20_battle_lose,mp3');
            }
        },
        _onDialogAppend: function () {
            var self = this;
            self._scroll.refresh();
        },
        _addButtons: function () {
            var self = this;
            var btn = new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('battle', 'formation'),
                click: function () {
                    Mojo.app.redirect('/package');
                },
                special: 'button-big-red',
            });
            this._footer.append(btn.element());
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('battle', 'formation detail'),
                opponent_id: '',
                opponent_name: '',
                entity_id: '',
                pk_mode: false,
                team_add: 0,
                zIndex: 1005,
                backCallback: $.noop,
                xp: '',
                vm: '',
                entity: null,
            });
        },
        _templateLeft: '<div class="top-left">\
    <div class="player_name"></div>\
    <div class="player_level"></div>\
    <div class="player_sum"></div>\
    <div class="player_base"></div>\
    <div class="player_team_add"></div>\
   </div>',
        _templateRight: '<div class="top-right">\
    <div class="player_name"></div>\
    <div class="player_level"></div>\
    <div class="player_sum"></div>\
    <div class="player_base"></div>\
    <div class="player_team_add"></div>\
   </div>',
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.Team = w.Mojo.Object.extend({
        clsname: function () {
            return "com.Team";
        },
        init: function (data, options) {
            this._super(undefined, options);
            this._data = data;
            this.element().addClass('mojo-com-team');
            this._initData();
            this._addTabs();
            this._addHeader();
            this._addTeamList();
        },
        _initData: function () {
            this._teamArray = [];
            if (this._data != undefined && this._data.crew != undefined) {
                for (var i = 0; i < this._data.crew.length; i++) {
                    this._teamArray.push(this._data.crew[i].id);
                }
            }
            this._attackBonus = this._data.team_add == undefined ? 0 : this._data.team_add;
        },
        _addTabs: function () {
            this._tabs = new Mojo.ui.Tabs('tabs-team');
            this.element().append(this._tabs.element());
            this._tabs.addTab(Mojo.utils.locale('fuben', 'friend'));
            this._panel = this._tabs.element().find('.panel').addClass('box-outter');
        },
        _addHeader: function () {
            var self = this;
            this._attackBonusLbl = new Mojo.ui.Label(undefined, {
                text: Mojo.utils.locale('fuben', 'attack_bonus', {
                    attack_bonus: this._attackBonus
                }),
                classes: ['attack-bonus'],
            });
            this._confirmButton = new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'ok'),
                click: function () {
                    var ids = '';
                    for (var i = 0; i < self._teamArray.length; i++) {
                        if (i != self._teamArray.length - 1) {
                            ids += self._teamArray[i] + ',';
                        } else {
                            ids += self._teamArray[i];
                        }
                    }
                    self._options.callback(ids);
                },
                special: 'confirm-btn',
            });
            this.element().append(this._attackBonusLbl.element()).append(this._confirmButton.element());
        },
        _addTeamList: function () {
            var self = this;
            this._title = new Mojo.ui.Label(undefined, {
                text: Mojo.utils.locale('fuben', 'choose_team_friends', {
                    current: self._data.crew.length,
                    total: self._data.team_sum
                }),
                classes: ['title'],
            });
            this._teamlist = new Mojo.com.TeamList({
                onLoaded: function () {},
                refreshCallback: function () {
                    self._refresh();
                },
                chooseClick: function (data) {
                    if (self._isInArray(data.id, self._teamArray)) {
                        self._teamArray = self._popArray(data.id, self._teamArray);
                        self._attackBonus -= self._calcAttackBonus(data);
                        $('#te-' + data.id).find('.buttons > .combo').removeClass('combo-selected-class');
                    } else {
                        if (self._teamArray.length >= self._data.team_sum) {
                            Mojo.app.toast.show(Mojo.utils.locale('fuben', 'is_enough', {
                                count: self._data.team_sum
                            }));
                            return;
                        }
                        self._teamArray.push(data.id);
                        self._attackBonus += self._calcAttackBonus(data);
                        $('#te-' + data.id).find('.buttons > .combo').addClass('combo-selected-class');
                    }
                    self._attackBonusLbl.text(Mojo.utils.locale('fuben', 'attack_bonus', {
                        attack_bonus: self._formatFloat(self._attackBonus, 1)
                    }));
                    self._title.text(Mojo.utils.locale('fuben', 'choose_team_friends', {
                        current: self._teamArray.length,
                        total: self._data.team_sum
                    }));
                },
            });
            this._title.element().appendTo(this._teamlist._header);
            this._teamlist.element().appendTo(this._panel);
        },
        _calcAttackBonus: function (data) {
            var v = this._formatFloat(Math.log(parseInt(data.level) * (parseInt(data.attack_min) + parseInt(data.attack_max) + parseInt(data.defence_min) + parseInt(data.defence_max)) / 100) / Math.log(2) - 7, 1);
            return v < 1 ? 1 : v;
        },
        _formatFloat: function (src, pos) {
            return Math.round(src * Math.pow(10, pos)) / Math.pow(10, pos);
        },
        _refresh: function () {
            for (var i = 0; i < this._teamArray.length; i++) {
                $('#te-' + this._teamArray[i]).find('.buttons > .combo').addClass('combo-selected-class');
            }
        },
        _isInArray: function (v, arr) {
            for (var i = 0; i < arr.length; i++) {
                if (v == arr[i]) return true;
            }
            return false;
        },
        _popArray: function (v, arr) {
            var tmp = [];
            for (var i = 0; i < arr.length; i++) {
                if (v != arr[i]) {
                    tmp.push(arr[i]);
                }
            }
            return tmp;
        },
        _getDefaultOptions: function () {
            return {
                callback: $.noop,
            };
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.TeamList = w.Mojo.ui.ListPanel.extend({
        clsname: function () {
            return "com.TeamList";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-teamlist');
        },
        _getDefaultOptions: function () {
            var self = this;
            return {
                pageSize: 10,
                scrollable: true,
                showMore: true,
                moreLabel: Mojo.utils.locale('common', 'more'),
                emptyLabel: Mojo.utils.locale('fuben', 'no friends'),
                onLoaded: undefined,
                loadFunc: function (start, count, params) {
                    Mojo.ajax('/friend', {
                        start: start,
                        count: count,
                    }, function (result) {
                        if (result.errorCode == 0) {
                            self.data = result.data;
                            self.appendData(self.data.friends);
                            if (result.data.friends != undefined && (result.data.friends.length == self._options.pageSize || result.data.friends.length == self._options.pageSize - 1)) {
                                self._more.element().show();
                            } else {
                                self._more.element().hide();
                            }
                            self._options.refreshCallback();
                            self.resize();
                        }
                    }, function () {
                        self.appendData();
                    });
                },
                drawFunc: function (data) {
                    return new Mojo.com.TeamElement(data, {
                        chooseClick: function () {
                            self._options.chooseClick(data);
                        },
                    });
                },
                refreshCallback: function () {
                    self._options.refreshCallback();
                },
            };
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.TeamElement = w.Mojo.Object.extend({
        clsname: function () {
            return "com.TeamElement";
        },
        init: function (data, options) {
            this._data = data;
            this._super('te-' + data.id, options);
            this.element().addClass('mojo-com-teamelement').addClass('box-inner');
            this.element().append('<div class="attributes"></div><div class="buttons"></div>');
            this._addAttributes();
            this._addButtons();
        },
        _addAttributes: function () {
            var attack, defence, name;
            if (parseInt(this._data.attack_min) > parseInt(this._data.attack_max)) {
                attack = this._data.attack_min;
            } else {
                attack = this._data.attack_min + '-' + this._data.attack_max;
            }
            if (parseInt(this._data.defence_min) > parseInt(this._data.defence_max)) {
                defence = this._data.defence_min;
            } else {
                defence = this._data.defence_min + '-' + this._data.defence_max;
            }
            if (this._data.force != undefined && this._data.force.title != '') {
                name = '[<span class="official">' + this._data.force.title + '</span>]' + this._data.name;
            } else {
                name = this._data.name;
            }
            this.element().find('.attributes').append('<div class="level">' + Mojo.utils.locale('common', 'lv') + this._data.level + '</div>').append('<div class="name">' + name + '</div>').append('<hr>');
            if (this._data.force != undefined && this._data.force.name != '') {
                this.element().find('.attributes').append('<div class="fname">' + Mojo.utils.locale('common', 'force') + this._data.force.name + '</div>');
            }
            this.element().find('.attributes').append('<div class="attack">' + Mojo.utils.locale('common', 'simple_attack') + attack + '</div>');
            if (this._options.isFriend) {
                this.element().find('.attributes').append('<div class="defence">' + Mojo.utils.locale('common', 'simple_defence') + defence + '</div>');
            } else {
                this.element().find('.attributes').append('<div class="defence">' + Mojo.utils.locale('common', 'simple_defence') + '?' + '</div>');
            }
        },
        _addButtons: function () {
            var self = this;
            this._btn = new Mojo.ui.Button(undefined, {
                classes: ['combo'],
                text: '',
                click: function () {
                    self._options.chooseClick();
                },
            });
            this.element().find('.buttons').append(this._btn.element());
        },
        _getDefaultOptions: function () {
            return {
                isFriend: true,
                chooseClick: $.noop,
            };
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.EpDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.EpDialog";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-epdlg');
            var self = this;
            this._message = $('<div class="paragraph"></div>').appendTo(this._content);
            this._goods = $('<div class="goods"></div>').appendTo(this._content);
            this._card = $('<div class="card"></div>').appendTo(this._goods);
            this._img = $('<img></img>').attr('src', '' + this._data.props.goods_small_image).appendTo(this._card);
            this._count = $('<div class="count"></div>').html(this._data.props.count).appendTo(this._card);
            this._name = $('<div class="name"></div>').html(this._data.props.goods_name).appendTo(this._goods);
            this._desc = $('<div class="desc"></div>').html(this._data.props.goods_description).appendTo(this._goods);
            this._price = $('<div class="price"></div>').appendTo(this._goods);
            this._priceTitle = $('<div class="price-title"></div>').html(Mojo.utils.locale('common', 'price in mall')).appendTo(this._price);
            this._priceIcon = $('<div class="price-icon"></div>').appendTo(this._price);
            this._priceValue = $('<div class="price-value"></div>').appendTo(this._price);
            if (this._data.props.goods_vm > 0) {
                this._priceValue.html(this._data.props.goods_vm);
            } else {
                this._priceValue.html(this._data.props.goods_rm);
            }
            this._interval = w.setInterval(function () {
                self._calcEp();
                self._refresh();
            }, 1000);
            this._addHandleButtons();
            $("<div class='tip'></div>").text(Mojo.utils.locale("common", "not enough ep")).appendTo(this.element());
            this._refresh();
            if (this._data.light == '1') {
                Mojo.light.showLight('energy|1');
            }
            Mojo.track.onEvent('18_020');
        },
        _refresh: function () {
            this._count.html(this._data.props.count);
            this._message.html(this._genEptip(this._data));
            if (this._data.props.count <= 0) {
                this._useBtn.disable(true);
            } else {
                this._useBtn.disable(false);
            }
        },
        _genEptip: function (data) {
            var str = "" + this._options.message + "<br>" +
                Mojo.utils.locale('common', 'time for next ep') + this._genEpRestore(data) + "<br>" +
                Mojo.utils.locale('common', 'time for all ep') + this._genEpFullRestore(data) + "<br>";
            return str;
        },
        _genEpRestore: function (data) {
            var str = undefined;
            if (data.ep == data.energy) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime(data.ep_second);
            }
            return str;
        },
        _genEpFullRestore: function (data) {
            var str = undefined;
            if (data.ep == data.energy) {
                str = Mojo.utils.locale('common', 'has reached the maximum');
            } else {
                str = Mojo.utils.formatTime((data.energy - data.ep - 1) * data.ep_restore_pp + data.ep_second);
            }
            return str;
        },
        _calcEp: function () {
            if (this._data.ep < this._data.energy) {
                this._data.ep_second--;
                if (this._data.ep_second < 0) {
                    this._data.ep_second = this._data.ep_restore_pp;
                    this._data.ep++;
                }
            }
        },
        _addBuyBtn: function () {
            var self = this;
            self._buyBtn = (new Mojo.ui.Button('buy-btn', {
                text: Mojo.utils.locale('common', 'buy'),
                click: function () {
                    self.hide();
                    var buyWarningDialog = new Mojo.ui.Dialog(undefined, {
                        title: Mojo.utils.locale('common', 'buy_warning_title'),
                        content: $('<div class="tip">' + Mojo.utils.locale('common', 'buy_warning_content') + '</div>'),
                        deviceaware: true
                    });
                    new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('common', 'sure_buy'),
                        special: "button-big-red",
                        click: function () {
                            buyWarningDialog.close();
                            self.show();
                            Mojo.track.onEvent('18_021');
                            Mojo.ajax('/mall/Buy', {
                                id: self._data.props.goods_id,
                            }, function (result) {
                                self._buyBtn.disable(false);
                                if (result.errorCode == 0) {
                                    if (self._data.light == '0') {
                                        Mojo.light.showLight('energy|1');
                                    }
                                    self._data.props.count = parseInt(self._data.props.count) + 1;
                                    self._data.props.id = result.data.entities[0].player_entity_id;
                                    self._options.refreshProfile(result.data.player);
                                    self._refresh();
                                    Mojo.app.toast.show(Mojo.utils.locale("common", "buy ep succ"));
                                } else {
                                    (new Mojo.com.BuyFailDialog({
                                        message: result.errorMsg,
                                    })).open(true);
                                }
                            });
                            self._buyBtn.disable(true);
                        }
                    }).element().appendTo(buyWarningDialog._footer);
                    new Mojo.ui.Button(undefined, {
                        text: Mojo.utils.locale('common', 'think_again'),
                        special: 'button-big-blue',
                        click: function () {
                            buyWarningDialog.close();
                            self.show();
                        }
                    }).element().appendTo(buyWarningDialog._footer);
                    buyWarningDialog.open(true);
                },
            }));
            this._footer.append(self._buyBtn.element());
        },
        _addUseBtn: function () {
            var self = this;
            self._useBtn = (new Mojo.ui.Button('use-btn', {
                text: Mojo.utils.locale('common', 'use'),
                special: 'button-big-red',
                click: function () {
                    Mojo.track.onEvent('18_022');
                    Mojo.ajax('/entity/Use', {
                        id: self._data.props.id,
                    }, function (result) {
                        if (result.errorCode == 0) {
                            if (self._data.light == '0' || self._data.light == '1') {
                                Mojo.light.showLight('energy|0');
                            }
                            self._data.ep_second = result.data.player.ep_second;
                            self._data.ep_restore_pp = result.data.player.ep_restore_pp;
                            self._data.ep = result.data.player.ep;
                            self._data.energy = result.data.player.energy;
                            self._data.props.count = parseInt(self._data.props.count) - 1;
                            self._refresh();
                            self._options.refreshProfile(self._data);
                            Mojo.app.toast.show(Mojo.utils.locale('common', 'add_ep', {
                                name: self._data.props.goods_name
                            }));
                            if (result.data.player.ep >= result.data.player.energy) {
                                w.clearInterval(self._interval);
                                self.close();
                            } else {
                                if (self._data.props.count <= 0) {
                                    self.element().find('#use-btn').disable(true);
                                }
                            }
                        } else {}
                    }, function () {}, {
                        showWait: true
                    });
                },
            }));
            this._footer.find("#use-btn").remove();
            this._footer.append(this._useBtn.element());
        },
        _addHandleButtons: function () {
            var self = this;
            this._addUseBtn();
            this._addBuyBtn();
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('common', 'no enough energy'),
                message: '',
                zIndex: 1021,
                close: function () {
                    w.clearInterval(self._interval);
                },
                refreshProfile: null,
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.RandomBonus = w.Mojo.Object.extend({
        clsname: function () {
            return "com.RandomBonus";
        },
        init: function (id, data, options) {
            this.data = data;
            this._super(id, options);
            this.element().addClass('mojo-com-entity-large mojo-com-randombonus');
            this._addContent();
        },
        _addContent: function () {
            this._row1 = $('<div class="row"><div class="picture bg-level-other mojo-com-entity-large--row--picture"></div></div>').appendTo(this.element());
            this._row1.find('.picture').append('<div class="img"></div>').append('<div class="border border-rarity-other mojo-com-entity-large--row--picture--border"></div>').append('<div class="name">' + this.data.name + '</div>');
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.PaymentElement = w.Mojo.Object.extend({
        clsname: function () {
            return "com.PaymentElement";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this._rmLabel = undefined;
            this._moneyLabel = undefined;
            this.element().addClass("mojo-com-payment-element").addClass("box-inner");
            if (parseInt(this._data.type) == 0) {
                this.element().addClass('payment-award');
            } else {
                this.element().addClass(Mojo.utils.getSomething("advertising") || this._options.advertising.status);
            }
            if (this._data.sub_id && (('' + this._data.sub_id).indexOf('month_ticket') >= 0)) {
                this.element().addClass('vip-recharge month-ticket-recharge');
                if ('super_month_ticket' == this._data.sub_id) {
                    this.element().addClass('super-month-ticket');
                }
            }
            if (this._data.sub_id && (('' + this._data.sub_id).indexOf('vip_recharge') >= 0)) {
                this.element().addClass('vip-recharge');
            }
            this._nameDiv = $('<div class="name"></div>').appendTo(this.element());
            this._prepaidDiv = $('<div class="prepaid"></div>').appendTo(this.element());
            this._advPrepaidDiv = $('<div class="advertising-prepaid"></div>').appendTo(this.element());
            this._descriptionDiv = $('<div class="description"></div>').appendTo(this.element());
            this._refresh();
        },
        _refresh: function () {
            var self = this;
            if (parseInt(this._data.type) == 0) {
                if (Mojo.utils.isNone(this._data.name) == false) {
                    this._nameDiv.html(this._data.name);
                }
            }
            if (Mojo.utils.isNone(this._data.description) == false) {
                this._descriptionDiv.html(this._data.description);
            }
            this._rmLabel = new Mojo.ui.Label(undefined, {
                text: this._data.rm
            });
            this._rmLabel.element().addClass("payment-rm-price").appendTo(this.element().find(".prepaid"));
            $('<div class="need"></div>').html("=").appendTo(this.element().find(".prepaid"));
            this._moneyLabel = new Mojo.ui.Label(undefined, {
                text: this._data.money
            });
            this._moneyLabel.element().addClass("payment-money-price").appendTo(this.element().find(".prepaid"));
            if (true === Mojo.gap.isPPZhushou) {
                this._moneyLabel.element().addClass("ppzhushou-money-price");
            }
            var btnTxt = Mojo.utils.locale('common', 'buy');
            var btnDisable = false;
            if (parseInt(this._data.type) == 0) {
                if (parseInt(this._data.status) == 1) {
                    btnTxt = Mojo.utils.locale('mall', 'has_buy');
                    btnDisable = true;
                } else if (('' + this._data.sub_id).indexOf('month_ticket') >= 0 && this._data.player_ticket && parseInt(this._data.player_ticket.buy_status) >= 3) {
                    if (3 == parseInt(this._data.player_ticket.status)) {
                        btnTxt = Mojo.utils.locale('mall', 'wait_buy_result');
                    } else {
                        btnTxt = Mojo.utils.locale('mall', 'has_buy');
                    }
                    btnDisable = true;
                } else if (('' + this._data.sub_id).indexOf('vip_recharge') >= 0 && 3 == parseInt(this._data.status)) {
                    btnTxt = Mojo.utils.locale('mall', 'wait_buy_result');
                    btnDisable = true;
                }
            }
            if (false == this._options.isRechargeSelf) {
                btnTxt = Mojo.utils.locale('mall', 'to_recharge_friend', {
                    '__default__': '赠送'
                });
            }
            var buyBtn = (new Mojo.ui.Button(undefined, {
                text: btnTxt,
                special: "button-small-red",
                disabled: btnDisable,
                click: function () {
                    if (parseInt(self._data.type) == 0) {
                        buyBtn.disable(true);
                        buyBtn.text(Mojo.utils.locale('mall', 'wait_buy_result'));
                    }
                    if (self._options.click instanceof Function) {
                        self._options.click(self._data, self);
                    }
                },
                disableClick: function () {
                    if (('' + self._data.sub_id).indexOf('month_ticket') >= 0 && parseInt(self._data.player_ticket.buy_status) == 4) {
                        Mojo.app.toast.show(Mojo.utils.locale('mall', 'month_ticket_has_buy', {
                            '__default__': '主公~再过{{:days}}天才能再次购买这个东东哦~',
                            'days': self._data.player_ticket.buy_days
                        }));
                    }
                }
            }));
            buyBtn.element().addClass("payment-btn").appendTo(this.element());
            if (this._data.sub_id && ('' + this._data.sub_id).indexOf('vip_recharge') >= 0) {
                var showAllVipRechargeBtn = new Mojo.ui.Button(undefined, {
                    text: Mojo.utils.locale('mall', 'show_all_vip_recharge', {
                        '__default__': '查看各级礼包'
                    }),
                    click: function () {
                        $('#payment-dialog').hide();
                        (new Mojo.com.VipRechargeListDialog(self._data.viplist, {
                            close: function () {
                                $('#payment-dialog').show();
                            }
                        })).open(true);
                    }
                });
                showAllVipRechargeBtn.element().addClass("show-all-vip-recharge").appendTo(this.element());
            }
            this._setAdvertising();
        },
        _setAdvertising: function () {
            var advertising = this._options.advertising.status;
            var discountMoney = this._data.discount_money;
            advertising = Mojo.utils.getSomething("advertising") || advertising;
            discountMoney = Mojo.utils.getSomething("discount") || discountMoney;
            if (advertising == "first" || advertising == "first_discount") {
                this._rmLabel.element().addClass("payment-before-price");
                new Mojo.ui.Label(undefined, {
                    text: parseInt((this._data.rm) * (isNaN(parseFloat(this._options.advertising.value)) ? 1 : parseFloat(this._options.advertising.value)))
                }).element().addClass("payment-rm-new-price").appendTo(this.element().find(".advertising-prepaid"));
            }
            if (advertising == "discount" || advertising == "first_discount") {
                this._moneyLabel.element().addClass("payment-before-price");
                new Mojo.ui.Label(undefined, {
                    text: discountMoney
                }).element().addClass("payment-money-new-price").appendTo(this.element().find(".advertising-prepaid"));
            }
        },
        _getDefaultOptions: function () {
            return {
                isRechargeSelf: true,
                click: undefined,
                advertising: {}
            };
        }
    });
})(window, jQuery);
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.VipRechargeListDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.VipRechargeListDialog";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-viprechargelistdialog');
            this.refreshList();
            this.refreshButton();
            var self = this;
            setTimeout(function () {
                if (self.list) {
                    self.list.resize();
                }
            }, 0);
        },
        refreshList: function () {
            var self = this;
            this.list = (new Mojo.ui.ListPanel(undefined, {
                scrollable: true,
                showMore: false,
                pageSize: 200,
                loadFunc: function (len, count, params, that) {
                    $('<div class="vip-recharge-tip box-inner"></div>').html(Mojo.utils.locale('mall', 'vip_recharge_tip', {
                        '__default__': '每级腾龙大礼包只能购买一次，购买完当前级别礼包后可获得购买下级礼包权利。'
                    })).appendTo(that._list);
                    that.appendData(self._data);
                },
                drawFunc: function (recharge) {
                    var rechargeObj = new Mojo.Object();
                    rechargeObj.element().addClass('box-inner vip-recharge-element');
                    $('<div class="image"><img src="' + recharge.small_image + '" /></div>').appendTo(rechargeObj.element());
                    var info = $('<div class="recharge-info"></div>').appendTo(rechargeObj.element());
                    $('<div class="recharge-name"></div>').html(recharge.name).appendTo(info);
                    $('<div class="recharge-description"></div>').html(recharge.description).appendTo(info);
                    var price = $('<div class="price"></div>').appendTo(info);
                    $('<div class="price-title"></div>').html(Mojo.utils.locale('common', 'price_title')).appendTo(price);
                    var moneyLabel = new Mojo.ui.Label(undefined, {
                        text: recharge.money
                    });
                    moneyLabel.element().addClass("payment-money-price").appendTo(price);
                    return rechargeObj;
                }
            }));
            this.list.element().appendTo(this._content);
        },
        refreshButton: function () {
            var self = this;
            (new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                }
            })).element().appendTo(this._footer);
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('mall', 'vip_recharge_list_dialog_title', {
                    '__default__': '礼包详情'
                })
            });
        }
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.TipsDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.TipsDialog";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-tipsdlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            self._message = $('<div class="paragraph"></div>').html(self._options.message).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button('close-btn', {
                special: 'button-big-red',
                text: Mojo.utils.locale('ui', '确定'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('common', 'tips'),
                message: '',
                zIndex: 1100,
                deviceaware: true
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.BuyFailDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.BuyFailDialog";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-buyfaildlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            this._message = $('<div class="paragraph"></div>').html(self._options.message).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            if (this._options.useRm == true) {
                this._footer.append((new Mojo.ui.Button(undefined, {
                    text: Mojo.utils.locale('common', 'go_payment'),
                    click: function () {
                        Mojo.app.redirect('/mall', {
                            selected: 4
                        });
                    },
                    special: 'button-big-red',
                })).element());
            } else {
                this._footer.append((new Mojo.ui.Button(undefined, {
                    text: Mojo.utils.locale('common', 'go_vm'),
                    click: function () {
                        Mojo.app.redirect('/mall', {
                            selected: 2
                        });
                    },
                    special: 'button-big-red',
                })).element());
            }
            this._footer.append((new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('common', 'buy_fail_title'),
                message: '',
                useRm: true,
                zIndex: 1100,
                deviceaware: true
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.WeiboPublishDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.WeiboPublishDialog";
        },
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-weibopublishdlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            var text = self._options.hintText;
            var lengthLimit = self._options.maxlength;
            if (self._options.appendix != '') {
                lengthLimit = lengthLimit - parseInt(self._options.appendix.length) - 1;
            }
            var lengthDisplay = lengthLimit;
            if (self._options.defaultText != '') {
                text = self._options.defaultText;
                lengthDisplay = lengthDisplay - parseInt(self._options.defaultText.length);
            }
            var paragraph = $("<div class='paragraph'></div>").appendTo(this._content);
            self._bonus = $('<div class="bonus"></div>').html(Mojo.utils.locale('weibo', 'weibo bonus')).appendTo(paragraph);
            self._tip = $('<div class="words-tip"></div>').html(lengthDisplay).appendTo(paragraph);
            self._border = $('<div class="border"></div>').appendTo(paragraph);
            self._content = $('<form name="form" method="post" action=""><textarea name="textarea" maxlength="' + lengthLimit + '" id="message-content" cols="45" rows="5">' + text + '</textarea></form>').appendTo(self._border);
            self._textarea = this._content.find('textarea').focus(function () {
                if (this.value == self._options.hintText) {
                    this.value = '';
                }
            });
            self._textarea.bind("input propertychange", function () {
                var maxLength = $(this).attr('maxlength');
                var v = $(this).val().length;
                if (v <= maxLength) {
                    self._tip.html(maxLength - v);
                    return true;
                } else {
                    $(this).val($(this).val().substring(0, maxLength));
                    return false;
                }
            });
        },
        _addHandleButtons: function () {
            var self = this;
            self._sendBtn = new Mojo.ui.Button(undefined, {
                special: 'button-big-red',
                text: Mojo.utils.locale('ui', 'Send'),
                click: function () {
                    self._sendBtn.disable(true);
                    var message = $("#message-content").val();
                    if (message == self._options.hintText) {
                        message = '';
                    }
                    if (self._options.appendix != '') {
                        message = message + ' ' + self._options.appendix;
                    }
                    if (Mojo.utils.trim(message) == '') {
                        Mojo.app.toast.show(Mojo.utils.locale('weibo', 'Please input weibo content'));
                        self._sendBtn.disable(false);
                        return;
                    }
                    Mojo.app.weibo.statusesUpdate({
                        access_token: self._data.access_token,
                        status: message,
                        errorFunc: function () {
                            Mojo.app.toast.show(Mojo.utils.locale('weibo', 'Send Success'));
                            self.close();
                            Mojo.ajax('/player/weiboPublish', {}, function (result) {
                                Mojo.app.refreshCurrentProfile();
                                self.afterPublish();
                            });
                        },
                        successFunc: function () {
                            Mojo.app.toast.show(Mojo.utils.locale('weibo', 'Send Success'));
                            self.close();
                            Mojo.ajax('/player/weiboPublish', {}, function (result) {
                                Mojo.app.refreshCurrentProfile();
                                self.afterPublish();
                            });
                        },
                        failedFunc: function () {
                            self.close();
                            Mojo.ajax('/player/weiboPublish', {}, function (result) {
                                self.afterPublish();
                            });
                        },
                    });
                },
            });
            this._footer.append(self._sendBtn.element());
            this._footer.append((new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                    self.afterPublish();
                },
            })).element());
        },
        afterPublish: function () {},
        close: function () {
            this._super();
            window.scrollTo(0);
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('weibo', 'Send weibo'),
                maxlength: 140,
                hintText: Mojo.utils.locale('weibo', 'Please input weibo content'),
                defaultText: '',
                appendix: '',
                zIndex: 1100,
            });
        },
    });
})(window, jQuery);
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FacebookFeedDialog = w.Mojo.ui.Dialog.extend({
        init: function (data, options) {
            this._data = data;
            this._super(undefined, options);
            this.element().addClass('mojo-com-facebookfeeddlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            var text = self._options.hintText;
            if (self._options.defaultText != '') {
                text = self._options.defaultText;
            }
            self._bonus = $('<div class="bonus"></div>').html(Mojo.utils.locale('facebook', 'weibo bonus')).appendTo(this._content);
            self._border = $('<div class="border"></div>').appendTo(this._content);
            self._content = $('<form name="form" method="post" action=""><textarea name="textarea" ' + '" id="message-content" cols="45" rows="5">' + text + '</textarea></form>').appendTo(self._border);
            self._textarea = this._content.find('textarea').focus(function () {
                if (this.value == self._options.hintText) {
                    this.value = '';
                }
            });
        },
        _addHandleButtons: function () {
            var self = this;
            self._sendBtn = new Mojo.ui.Button(undefined, {
                special: 'button-big-red',
                text: Mojo.utils.locale('ui', 'Send'),
                click: function () {
                    self._sendBtn.disable(true);
                    var message = $("#message-content").val();
                    if (message == self._options.hintText) {
                        message = '';
                    }
                    var linkUrl = "";
                    if (self._options.appendix != '') {
                        linkUrl = self._options.appendix;
                    }
                    if (Mojo.utils.trim(message) == '') {
                        Mojo.app.toast.show(Mojo.utils.locale('facebook', 'Please input weibo content'));
                        self._sendBtn.disable(false);
                        return;
                    }
                    var params = {
                        caption: self._options.defaultTitle,
                        name: self._options.defaultTitle,
                        picture: self._getImgurl(),
                        link: linkUrl,
                        description: self._options.defaultText,
                        access_token: self._data.access_token,
                        actions: [{
                            name: 'go to sanguo',
                            link: linkUrl
                        }],
                    };
                    FB.api('/me/feed', 'post', params, function (response) {
                        if (response && response.id) {
                            Mojo.ajax('/player/weiboPublish', {}, function (result) {
                                Mojo.app.refreshCurrentProfile();
                            });
                        } else {}
                        self.close();
                    });
                },
            });
            this._footer.append(self._sendBtn.element());
            this._footer.append((new Mojo.ui.Button(undefined, {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                    self.afterPublish();
                },
            })).element());
        },
        afterPublish: function () {},
        _getImgurl: function () {
            var loc = location.href;
            var a = loc.indexOf('/mojo');
            var b = loc.substring(0, a);
            var url = b + '/mojo/resources/classic/mobile/image/ui/icon.jpg';
            if (Mojo.app.data.userLanguage == 'zh_tw') {
                url = b + '/mojo/resources/classic/mobile/image/ui/icon-tw.jpg';
            }
            return url;
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('facebook', 'Send weibo'),
                hintText: Mojo.utils.locale('facebook', 'Please input feed content'),
                defaultTitle: '',
                defaultText: '',
                appendix: '',
                zIndex: 1100,
            });
        },
        debugable: function () {
            return Mojo.utils.debug.vars.com.weibopublishdlg;
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.WeiboExpireDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.WeiboExpireDialog";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-weiboexpiredlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            self._message = $('<div class="paragraph"></div>').html(Mojo.utils.locale('weibo', 'expire message')).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button('login-btn', {
                special: 'button-big-red',
                text: Mojo.utils.locale('weibo', 'go login'),
                click: function () {
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                    self.close();
                },
            })).element());
            this._footer.append((new Mojo.ui.Button('close-btn', {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('weibo', 'Your weibo account has expired!'),
                zIndex: 1100,
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.WeiboBindDialog = w.Mojo.ui.Dialog.extend({
        clsname: function () {
            return "com.WeiboBindDialog";
        },
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-weibobinddlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            self._message = $('<div class="paragraph"></div>').html(Mojo.utils.locale('weibo', 'bind message')).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button('bind-btn', {
                special: 'button-big-red',
                text: Mojo.utils.locale('weibo', 'go bind'),
                click: function () {
                    self._redirectToSettings = 1;
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                    self.close();
                },
            })).element());
            this._footer.append((new Mojo.ui.Button('close-btn', {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _close: function () {
            if (this._redirectToSettings == 1) {
                delete this._redirectToSettings;
                return false;
            }
            if (this._options.level == 120) {
                this._showActiveBarrackDialog();
            }
        },
        _showActiveBarrackDialog: function () {
            var dlg = new Mojo.com.CommonDialog(undefined, {
                title: Mojo.utils.locale('common', 'barrack_active_dlg_title'),
                content: $('<div class="paragraph"></div>').html(Mojo.utils.locale('common', 'barrack_active_dlg_content')),
                leftBtnText: Mojo.utils.locale('common', 'go_look'),
                leftBtnClick: function () {
                    Mojo.app.redirect('/package', {
                        selected: -1
                    });
                    dlg.close();
                },
                rightBtnText: Mojo.utils.locale('common', 'close'),
                rightBtnClick: function () {
                    dlg.close();
                }
            });
            dlg.open();
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                title: Mojo.utils.locale('weibo', 'bind title'),
                zIndex: 1100,
                close: function () {
                    self._close();
                }
            });
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FacebookExpireDialog = w.Mojo.ui.Dialog.extend({
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-facebookexpiredlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            this._message = $('<div class="paragraph"></div>').html(self.locale('expire message')).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button('login-btn', {
                special: 'button-big-red',
                text: self.locale('go login'),
                click: function () {
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                    self.close();
                },
            })).element());
            this._footer.append((new Mojo.ui.Button('close-btn', {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                title: self.locale('Your weibo account has expired!'),
                zIndex: 1100,
            });
        },
        localeCat: function () {
            return 'facebook';
        },
        debugable: function () {
            return Mojo.utils.debug.vars.com.facebookexpiredlg;
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.FacebookBindDialog = w.Mojo.ui.Dialog.extend({
        init: function (options) {
            this._super(undefined, options);
            this.element().addClass('mojo-com-facebookbinddlg');
            this._addContent();
            this._addHandleButtons();
        },
        _addContent: function () {
            var self = this;
            this._message = $('<div class="paragraph"></div>').html(self.locale('bind message')).appendTo(this._content);
        },
        _addHandleButtons: function () {
            var self = this;
            this._footer.append((new Mojo.ui.Button('bind-btn', {
                special: 'button-big-red',
                text: self.locale('go bind'),
                click: function () {
                    Mojo.app.redirect('/settings', {
                        selected: 1
                    }, 'event', '04_056');
                    self.close();
                },
            })).element());
            this._footer.append((new Mojo.ui.Button('close-btn', {
                text: Mojo.utils.locale('common', 'close'),
                click: function () {
                    self.close();
                },
            })).element());
        },
        _getDefaultOptions: function () {
            var self = this;
            return $.extend(true, this._super(), {
                title: self.locale('bind title'),
                zIndex: 1100,
            });
        },
        localeCat: function () {
            return 'facebook';
        },
        debugable: function () {
            return Mojo.utils.debug.vars.com.facebookbinddlg;
        },
    });
})(window, jQuery);;
(function (w, $, undefined) {
    w.Mojo = w.Mojo || {};
    w.Mojo.com = w.Mojo.com || {};
    w.Mojo.com.PlatformButton = w.Mojo.ui.Button.extend({
        init: function (event, options) {
            this._super(undefined, options);
            this._event = event;
            this.element().addClass('mojo-com-platformbtn');
            this._initData();
            this._addContent();
        },
        _initData: function () {
            var self = this;
            if (self._event != undefined && self._event != null) {
                for (var index in self._event) {
                    if (self._event[index].name == 'weibo.create' || self._event[index].name == 'facebook.create') {
                        self._options.access_token = self._event[index].data.access_token;
                        self._options.defaultText = self._event[index].data.content;
                        self._options.expire = self._event[index].expire;
                        self._options.appendix = self._event[index].data.download_url;
                        self._options.defaultTitle = self._event[index].data.title;
                    }
                }
            }
        },
        _addContent: function () {
            var self = this;
            self._platform = Mojo.app.getPlatform();
            if (Mojo.app.getPlatform() == 'facebook')
                self.element().find('.icon').addClass('fb');
            var txt = (self._platform == 'sina' ? Mojo.utils.locale('weibo', 'Send weibo') : Mojo.utils.locale('facebook', 'Send weibo'));
            self.text(txt);
            var weibocontent = self._options.defaultText || self._options.content;
            var weibotitle = self._options.defaultTitle || self._options.title;
            var appendixtxt = self._options.appendix || self._options.download_url;
            self.click(function () {
                self._options.btnClick();
                Mojo.ajax('/player/weiboToken', {}, function (response) {
                    if (response.errorCode == 0) {
                        var access_token = '';
                        if (response.data) {
                            access_token = response.data.token;
                        }
                        if (access_token != null && access_token != '') {
                            if (self._options.expire == 1) {
                                if (self._platform == 'facebook') {
                                    (new Mojo.com.FacebookExpireDialog()).open(true);
                                } else {
                                    (new Mojo.com.WeiboExpireDialog()).open(true);
                                }
                            } else {
                                if (self._platform == 'facebook') {
                                    (new Mojo.com.FacebookFeedDialog({
                                        access_token: access_token
                                    }, {
                                        defaultText: weibocontent,
                                        appendix: appendixtxt,
                                        defaultTitle: weibotitle
                                    })).open(true);
                                } else {
                                    (new Mojo.com.WeiboPublishDialog({
                                        access_token: access_token
                                    }, {
                                        defaultText: weibocontent,
                                        appendix: appendixtxt
                                    })).open(true);
                                }
                            }
                        } else {
                            if (self._platform == 'facebook') {
                                (new Mojo.com.FacebookBindDialog()).open(true);
                            } else {
                                (new Mojo.com.WeiboBindDialog({
                                    showGoBindDialog: self._options.showGoBindDialog,
                                    level: self._options.level
                                })).open(true);
                            }
                        }
                    }
                    self._options.levelUpBtnClick();
                }, function () {}, {
                    showWait: true
                });
            });
        },
        _getDefaultOptions: function () {
            return $.extend(true, this._super(), {
                text: '',
                special: 'button-big-red',
                btnClick: $.noop,
                levelUpBtnClick: $.noop,
                icon: Mojo.app.getPlatform() == 'facebook',
                textWrap: Mojo.app.getPlatform() == 'facebook'
            });
        },
        debugable: function () {
            return Mojo.utils.debug.vars.com.platformbtn;
        },
    });
})(window, jQuery);